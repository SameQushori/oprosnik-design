function Pw(s,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in s)){const c=Object.getOwnPropertyDescriptor(r,o);c&&Object.defineProperty(s,o,c.get?c:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();var Ku=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kw(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var hm={exports:{}},Gl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x_;function Lw(){if(x_)return Gl;x_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,o,c){var h=null;if(c!==void 0&&(h=""+c),o.key!==void 0&&(h=""+o.key),"key"in o){c={};for(var g in o)g!=="key"&&(c[g]=o[g])}else c=o;return o=c.ref,{$$typeof:s,type:r,key:h,ref:o!==void 0?o:null,props:c}}return Gl.Fragment=e,Gl.jsx=t,Gl.jsxs=t,Gl}var D_;function Uw(){return D_||(D_=1,hm.exports=Lw()),hm.exports}var y=Uw(),dm={exports:{}},De={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O_;function zw(){if(O_)return De;O_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.iterator;function b(P){return P===null||typeof P!="object"?null:(P=T&&P[T]||P["@@iterator"],typeof P=="function"?P:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,U={};function V(P,te,he){this.props=P,this.context=te,this.refs=U,this.updater=he||O}V.prototype.isReactComponent={},V.prototype.setState=function(P,te){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,te,"setState")},V.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function re(){}re.prototype=V.prototype;function J(P,te,he){this.props=P,this.context=te,this.refs=U,this.updater=he||O}var K=J.prototype=new re;K.constructor=J,k(K,V.prototype),K.isPureReactComponent=!0;var ae=Array.isArray,le={H:null,A:null,T:null,S:null,V:null},ye=Object.prototype.hasOwnProperty;function D(P,te,he,oe,ve,Oe){return he=Oe.ref,{$$typeof:s,type:P,key:te,ref:he!==void 0?he:null,props:Oe}}function R(P,te){return D(P.type,te,void 0,void 0,void 0,P.props)}function N(P){return typeof P=="object"&&P!==null&&P.$$typeof===s}function M(P){var te={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(he){return te[he]})}var I=/\/+/g;function x(P,te){return typeof P=="object"&&P!==null&&P.key!=null?M(""+P.key):te.toString(36)}function S(){}function W(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(S,S):(P.status="pending",P.then(function(te){P.status==="pending"&&(P.status="fulfilled",P.value=te)},function(te){P.status==="pending"&&(P.status="rejected",P.reason=te)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function ue(P,te,he,oe,ve){var Oe=typeof P;(Oe==="undefined"||Oe==="boolean")&&(P=null);var we=!1;if(P===null)we=!0;else switch(Oe){case"bigint":case"string":case"number":we=!0;break;case"object":switch(P.$$typeof){case s:case e:we=!0;break;case v:return we=P._init,ue(we(P._payload),te,he,oe,ve)}}if(we)return ve=ve(P),we=oe===""?"."+x(P,0):oe,ae(ve)?(he="",we!=null&&(he=we.replace(I,"$&/")+"/"),ue(ve,te,he,"",function(Pn){return Pn})):ve!=null&&(N(ve)&&(ve=R(ve,he+(ve.key==null||P&&P.key===ve.key?"":(""+ve.key).replace(I,"$&/")+"/")+we)),te.push(ve)),1;we=0;var vt=oe===""?".":oe+":";if(ae(P))for(var We=0;We<P.length;We++)oe=P[We],Oe=vt+x(oe,We),we+=ue(oe,te,he,Oe,ve);else if(We=b(P),typeof We=="function")for(P=We.call(P),We=0;!(oe=P.next()).done;)oe=oe.value,Oe=vt+x(oe,We++),we+=ue(oe,te,he,Oe,ve);else if(Oe==="object"){if(typeof P.then=="function")return ue(W(P),te,he,oe,ve);throw te=String(P),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return we}function B(P,te,he){if(P==null)return P;var oe=[],ve=0;return ue(P,oe,"","",function(Oe){return te.call(he,Oe,ve++)}),oe}function ee(P){if(P._status===-1){var te=P._result;te=te(),te.then(function(he){(P._status===0||P._status===-1)&&(P._status=1,P._result=he)},function(he){(P._status===0||P._status===-1)&&(P._status=2,P._result=he)}),P._status===-1&&(P._status=0,P._result=te)}if(P._status===1)return P._result.default;throw P._result}var fe=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function Ee(){}return De.Children={map:B,forEach:function(P,te,he){B(P,function(){te.apply(this,arguments)},he)},count:function(P){var te=0;return B(P,function(){te++}),te},toArray:function(P){return B(P,function(te){return te})||[]},only:function(P){if(!N(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},De.Component=V,De.Fragment=t,De.Profiler=o,De.PureComponent=J,De.StrictMode=r,De.Suspense=f,De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=le,De.__COMPILER_RUNTIME={__proto__:null,c:function(P){return le.H.useMemoCache(P)}},De.cache=function(P){return function(){return P.apply(null,arguments)}},De.cloneElement=function(P,te,he){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var oe=k({},P.props),ve=P.key,Oe=void 0;if(te!=null)for(we in te.ref!==void 0&&(Oe=void 0),te.key!==void 0&&(ve=""+te.key),te)!ye.call(te,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&te.ref===void 0||(oe[we]=te[we]);var we=arguments.length-2;if(we===1)oe.children=he;else if(1<we){for(var vt=Array(we),We=0;We<we;We++)vt[We]=arguments[We+2];oe.children=vt}return D(P.type,ve,void 0,void 0,Oe,oe)},De.createContext=function(P){return P={$$typeof:h,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:c,_context:P},P},De.createElement=function(P,te,he){var oe,ve={},Oe=null;if(te!=null)for(oe in te.key!==void 0&&(Oe=""+te.key),te)ye.call(te,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(ve[oe]=te[oe]);var we=arguments.length-2;if(we===1)ve.children=he;else if(1<we){for(var vt=Array(we),We=0;We<we;We++)vt[We]=arguments[We+2];ve.children=vt}if(P&&P.defaultProps)for(oe in we=P.defaultProps,we)ve[oe]===void 0&&(ve[oe]=we[oe]);return D(P,Oe,void 0,void 0,null,ve)},De.createRef=function(){return{current:null}},De.forwardRef=function(P){return{$$typeof:g,render:P}},De.isValidElement=N,De.lazy=function(P){return{$$typeof:v,_payload:{_status:-1,_result:P},_init:ee}},De.memo=function(P,te){return{$$typeof:m,type:P,compare:te===void 0?null:te}},De.startTransition=function(P){var te=le.T,he={};le.T=he;try{var oe=P(),ve=le.S;ve!==null&&ve(he,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(Ee,fe)}catch(Oe){fe(Oe)}finally{le.T=te}},De.unstable_useCacheRefresh=function(){return le.H.useCacheRefresh()},De.use=function(P){return le.H.use(P)},De.useActionState=function(P,te,he){return le.H.useActionState(P,te,he)},De.useCallback=function(P,te){return le.H.useCallback(P,te)},De.useContext=function(P){return le.H.useContext(P)},De.useDebugValue=function(){},De.useDeferredValue=function(P,te){return le.H.useDeferredValue(P,te)},De.useEffect=function(P,te,he){var oe=le.H;if(typeof he=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return oe.useEffect(P,te)},De.useId=function(){return le.H.useId()},De.useImperativeHandle=function(P,te,he){return le.H.useImperativeHandle(P,te,he)},De.useInsertionEffect=function(P,te){return le.H.useInsertionEffect(P,te)},De.useLayoutEffect=function(P,te){return le.H.useLayoutEffect(P,te)},De.useMemo=function(P,te){return le.H.useMemo(P,te)},De.useOptimistic=function(P,te){return le.H.useOptimistic(P,te)},De.useReducer=function(P,te,he){return le.H.useReducer(P,te,he)},De.useRef=function(P){return le.H.useRef(P)},De.useState=function(P){return le.H.useState(P)},De.useSyncExternalStore=function(P,te,he){return le.H.useSyncExternalStore(P,te,he)},De.useTransition=function(){return le.H.useTransition()},De.version="19.1.0",De}var M_;function pp(){return M_||(M_=1,dm.exports=zw()),dm.exports}var Y=pp();const wt=kw(Y),Bw=Pw({__proto__:null,default:wt},[Y]);var fm={exports:{}},$l={},mm={exports:{}},pm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j_;function Fw(){return j_||(j_=1,function(s){function e(B,ee){var fe=B.length;B.push(ee);e:for(;0<fe;){var Ee=fe-1>>>1,P=B[Ee];if(0<o(P,ee))B[Ee]=ee,B[fe]=P,fe=Ee;else break e}}function t(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var ee=B[0],fe=B.pop();if(fe!==ee){B[0]=fe;e:for(var Ee=0,P=B.length,te=P>>>1;Ee<te;){var he=2*(Ee+1)-1,oe=B[he],ve=he+1,Oe=B[ve];if(0>o(oe,fe))ve<P&&0>o(Oe,oe)?(B[Ee]=Oe,B[ve]=fe,Ee=ve):(B[Ee]=oe,B[he]=fe,Ee=he);else if(ve<P&&0>o(Oe,fe))B[Ee]=Oe,B[ve]=fe,Ee=ve;else break e}}return ee}function o(B,ee){var fe=B.sortIndex-ee.sortIndex;return fe!==0?fe:B.id-ee.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var h=Date,g=h.now();s.unstable_now=function(){return h.now()-g}}var f=[],m=[],v=1,T=null,b=3,O=!1,k=!1,U=!1,V=!1,re=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function ae(B){for(var ee=t(m);ee!==null;){if(ee.callback===null)r(m);else if(ee.startTime<=B)r(m),ee.sortIndex=ee.expirationTime,e(f,ee);else break;ee=t(m)}}function le(B){if(U=!1,ae(B),!k)if(t(f)!==null)k=!0,ye||(ye=!0,x());else{var ee=t(m);ee!==null&&ue(le,ee.startTime-B)}}var ye=!1,D=-1,R=5,N=-1;function M(){return V?!0:!(s.unstable_now()-N<R)}function I(){if(V=!1,ye){var B=s.unstable_now();N=B;var ee=!0;try{e:{k=!1,U&&(U=!1,J(D),D=-1),O=!0;var fe=b;try{t:{for(ae(B),T=t(f);T!==null&&!(T.expirationTime>B&&M());){var Ee=T.callback;if(typeof Ee=="function"){T.callback=null,b=T.priorityLevel;var P=Ee(T.expirationTime<=B);if(B=s.unstable_now(),typeof P=="function"){T.callback=P,ae(B),ee=!0;break t}T===t(f)&&r(f),ae(B)}else r(f);T=t(f)}if(T!==null)ee=!0;else{var te=t(m);te!==null&&ue(le,te.startTime-B),ee=!1}}break e}finally{T=null,b=fe,O=!1}ee=void 0}}finally{ee?x():ye=!1}}}var x;if(typeof K=="function")x=function(){K(I)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,W=S.port2;S.port1.onmessage=I,x=function(){W.postMessage(null)}}else x=function(){re(I,0)};function ue(B,ee){D=re(function(){B(s.unstable_now())},ee)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(B){B.callback=null},s.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<B?Math.floor(1e3/B):5},s.unstable_getCurrentPriorityLevel=function(){return b},s.unstable_next=function(B){switch(b){case 1:case 2:case 3:var ee=3;break;default:ee=b}var fe=b;b=ee;try{return B()}finally{b=fe}},s.unstable_requestPaint=function(){V=!0},s.unstable_runWithPriority=function(B,ee){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var fe=b;b=B;try{return ee()}finally{b=fe}},s.unstable_scheduleCallback=function(B,ee,fe){var Ee=s.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?Ee+fe:Ee):fe=Ee,B){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=fe+P,B={id:v++,callback:ee,priorityLevel:B,startTime:fe,expirationTime:P,sortIndex:-1},fe>Ee?(B.sortIndex=fe,e(m,B),t(f)===null&&B===t(m)&&(U?(J(D),D=-1):U=!0,ue(le,fe-Ee))):(B.sortIndex=P,e(f,B),k||O||(k=!0,ye||(ye=!0,x()))),B},s.unstable_shouldYield=M,s.unstable_wrapCallback=function(B){var ee=b;return function(){var fe=b;b=ee;try{return B.apply(this,arguments)}finally{b=fe}}}}(pm)),pm}var V_;function Hw(){return V_||(V_=1,mm.exports=Fw()),mm.exports}var gm={exports:{}},nn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P_;function qw(){if(P_)return nn;P_=1;var s=pp();function e(f){var m="https://react.dev/errors/"+f;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(f,m,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:f,containerInfo:m,implementation:v}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(f,m){if(f==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,nn.createPortal=function(f,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return c(f,m,null,v)},nn.flushSync=function(f){var m=h.T,v=r.p;try{if(h.T=null,r.p=2,f)return f()}finally{h.T=m,r.p=v,r.d.f()}},nn.preconnect=function(f,m){typeof f=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,r.d.C(f,m))},nn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},nn.preinit=function(f,m){if(typeof f=="string"&&m&&typeof m.as=="string"){var v=m.as,T=g(v,m.crossOrigin),b=typeof m.integrity=="string"?m.integrity:void 0,O=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?r.d.S(f,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:T,integrity:b,fetchPriority:O}):v==="script"&&r.d.X(f,{crossOrigin:T,integrity:b,fetchPriority:O,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},nn.preinitModule=function(f,m){if(typeof f=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=g(m.as,m.crossOrigin);r.d.M(f,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&r.d.M(f)},nn.preload=function(f,m){if(typeof f=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,T=g(v,m.crossOrigin);r.d.L(f,v,{crossOrigin:T,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},nn.preloadModule=function(f,m){if(typeof f=="string")if(m){var v=g(m.as,m.crossOrigin);r.d.m(f,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else r.d.m(f)},nn.requestFormReset=function(f){r.d.r(f)},nn.unstable_batchedUpdates=function(f,m){return f(m)},nn.useFormState=function(f,m,v){return h.H.useFormState(f,m,v)},nn.useFormStatus=function(){return h.H.useHostTransitionStatus()},nn.version="19.1.0",nn}var k_;function UE(){if(k_)return gm.exports;k_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),gm.exports=qw(),gm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L_;function Gw(){if(L_)return $l;L_=1;var s=Hw(),e=pp(),t=UE();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function h(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function g(n){if(c(n)!==n)throw Error(r(188))}function f(n){var i=n.alternate;if(!i){if(i=c(n),i===null)throw Error(r(188));return i!==n?null:n}for(var a=n,l=i;;){var d=a.return;if(d===null)break;var p=d.alternate;if(p===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===a)return g(d),n;if(p===l)return g(d),i;p=p.sibling}throw Error(r(188))}if(a.return!==l.return)a=d,l=p;else{for(var A=!1,w=d.child;w;){if(w===a){A=!0,a=d,l=p;break}if(w===l){A=!0,l=d,a=p;break}w=w.sibling}if(!A){for(w=p.child;w;){if(w===a){A=!0,a=p,l=d;break}if(w===l){A=!0,l=p,a=d;break}w=w.sibling}if(!A)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:i}function m(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=m(n),i!==null)return i;n=n.sibling}return null}var v=Object.assign,T=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),re=Symbol.for("react.provider"),J=Symbol.for("react.consumer"),K=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function x(n){return n===null||typeof n!="object"?null:(n=I&&n[I]||n["@@iterator"],typeof n=="function"?n:null)}var S=Symbol.for("react.client.reference");function W(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===S?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case k:return"Fragment";case V:return"Profiler";case U:return"StrictMode";case le:return"Suspense";case ye:return"SuspenseList";case N:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case O:return"Portal";case K:return(n.displayName||"Context")+".Provider";case J:return(n._context.displayName||"Context")+".Consumer";case ae:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case D:return i=n.displayName||null,i!==null?i:W(n.type)||"Memo";case R:i=n._payload,n=n._init;try{return W(n(i))}catch{}}return null}var ue=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},Ee=[],P=-1;function te(n){return{current:n}}function he(n){0>P||(n.current=Ee[P],Ee[P]=null,P--)}function oe(n,i){P++,Ee[P]=n.current,n.current=i}var ve=te(null),Oe=te(null),we=te(null),vt=te(null);function We(n,i){switch(oe(we,i),oe(Oe,n),oe(ve,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?i_(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=i_(i),n=r_(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}he(ve),oe(ve,n)}function Pn(){he(ve),he(Oe),he(we)}function cs(n){n.memoizedState!==null&&oe(vt,n);var i=ve.current,a=r_(i,n.type);i!==a&&(oe(Oe,n),oe(ve,a))}function wn(n){Oe.current===n&&(he(ve),he(Oe)),vt.current===n&&(he(vt),zl._currentValue=fe)}var Ps=Object.prototype.hasOwnProperty,ks=s.unstable_scheduleCallback,Ls=s.unstable_cancelCallback,yr=s.unstable_shouldYield,ya=s.unstable_requestPaint,mn=s.unstable_now,Lo=s.unstable_getCurrentPriorityLevel,vr=s.unstable_ImmediatePriority,Ei=s.unstable_UserBlockingPriority,Us=s.unstable_NormalPriority,Uo=s.unstable_LowPriority,Ti=s.unstable_IdlePriority,ce=s.log,Me=s.unstable_setDisableYieldValue,Fe=null,Ne=null;function ln(n){if(typeof ce=="function"&&Me(n),Ne&&typeof Ne.setStrictMode=="function")try{Ne.setStrictMode(Fe,n)}catch{}}var Vt=Math.clz32?Math.clz32:cn,va=Math.log,pn=Math.LN2;function cn(n){return n>>>=0,n===0?32:31-(va(n)/pn|0)|0}var _t=256,Ht=4194304;function qt(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function _a(n,i,a){var l=n.pendingLanes;if(l===0)return 0;var d=0,p=n.suspendedLanes,A=n.pingedLanes;n=n.warmLanes;var w=l&134217727;return w!==0?(l=w&~p,l!==0?d=qt(l):(A&=w,A!==0?d=qt(A):a||(a=w&~n,a!==0&&(d=qt(a))))):(w=l&~p,w!==0?d=qt(w):A!==0?d=qt(A):a||(a=l&~n,a!==0&&(d=qt(a)))),d===0?0:i!==0&&i!==d&&(i&p)===0&&(p=d&-d,a=i&-i,p>=a||p===32&&(a&4194048)!==0)?i:d}function _r(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function zo(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bo(){var n=_t;return _t<<=1,(_t&4194048)===0&&(_t=256),n}function Fo(){var n=Ht;return Ht<<=1,(Ht&62914560)===0&&(Ht=4194304),n}function zs(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Bs(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Ho(n,i,a,l,d,p){var A=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var w=n.entanglements,j=n.expirationTimes,q=n.hiddenUpdates;for(a=A&~a;0<a;){var X=31-Vt(a),ne=1<<X;w[X]=0,j[X]=-1;var G=q[X];if(G!==null)for(q[X]=null,X=0;X<G.length;X++){var $=G[X];$!==null&&($.lane&=-536870913)}a&=~ne}l!==0&&us(n,l,0),p!==0&&d===0&&n.tag!==0&&(n.suspendedLanes|=p&~(A&~i))}function us(n,i,a){n.pendingLanes|=i,n.suspendedLanes&=~i;var l=31-Vt(i);n.entangledLanes|=i,n.entanglements[l]=n.entanglements[l]|1073741824|a&4194090}function qo(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var l=31-Vt(a),d=1<<l;d&i|n[l]&i&&(n[l]|=i),a&=~d}}function Ai(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Ea(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function bi(){var n=ee.p;return n!==0?n:(n=window.event,n===void 0?32:S_(n.type))}function Cc(n,i){var a=ee.p;try{return ee.p=n,i()}finally{ee.p=a}}var ot=Math.random().toString(36).slice(2),Ct="__reactFiber$"+ot,Et="__reactProps$"+ot,kn="__reactContainer$"+ot,Go="__reactEvents$"+ot,fd="__reactListeners$"+ot,Si="__reactHandles$"+ot,Nc="__reactResources$"+ot,Er="__reactMarker$"+ot;function wi(n){delete n[Ct],delete n[Et],delete n[Go],delete n[fd],delete n[Si]}function Fs(n){var i=n[Ct];if(i)return i;for(var a=n.parentNode;a;){if(i=a[kn]||a[Ct]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=c_(n);n!==null;){if(a=n[Ct])return a;n=c_(n)}return i}n=a,a=n.parentNode}return null}function hs(n){if(n=n[Ct]||n[kn]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function ds(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function un(n){var i=n[Nc];return i||(i=n[Nc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function mt(n){n[Er]=!0}var $o=new Set,Ta={};function Zn(n,i){Hs(n,i),Hs(n+"Capture",i)}function Hs(n,i){for(Ta[n]=i,n=0;n<i.length;n++)$o.add(i[n])}var xc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Dc={},Tr={};function Oc(n){return Ps.call(Tr,n)?!0:Ps.call(Dc,n)?!1:xc.test(n)?Tr[n]=!0:(Dc[n]=!0,!1)}function Ri(n,i,a){if(Oc(i))if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+a)}}function fs(n,i,a){if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+a)}}function Gt(n,i,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(i,a,""+l)}}var Ar,Mc;function qs(n){if(Ar===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Ar=i&&i[1]||"",Mc=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ar+n+Mc}var Aa=!1;function ba(n,i){if(!n||Aa)return"";Aa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch($){var G=$}Reflect.construct(n,[],ne)}else{try{ne.call()}catch($){G=$}n.call(ne.prototype)}}else{try{throw Error()}catch($){G=$}(ne=n())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch($){if($&&G&&typeof $.stack=="string")return[$.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=l.DetermineComponentFrameRoot(),A=p[0],w=p[1];if(A&&w){var j=A.split(`
`),q=w.split(`
`);for(d=l=0;l<j.length&&!j[l].includes("DetermineComponentFrameRoot");)l++;for(;d<q.length&&!q[d].includes("DetermineComponentFrameRoot");)d++;if(l===j.length||d===q.length)for(l=j.length-1,d=q.length-1;1<=l&&0<=d&&j[l]!==q[d];)d--;for(;1<=l&&0<=d;l--,d--)if(j[l]!==q[d]){if(l!==1||d!==1)do if(l--,d--,0>d||j[l]!==q[d]){var X=`
`+j[l].replace(" at new "," at ");return n.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",n.displayName)),X}while(1<=l&&0<=d);break}}}finally{Aa=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?qs(a):""}function Qo(n){switch(n.tag){case 26:case 27:case 5:return qs(n.type);case 16:return qs("Lazy");case 13:return qs("Suspense");case 19:return qs("SuspenseList");case 0:case 15:return ba(n.type,!1);case 11:return ba(n.type.render,!1);case 1:return ba(n.type,!0);case 31:return qs("Activity");default:return""}}function Sa(n){try{var i="";do i+=Qo(n),n=n.return;while(n);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function hn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Yo(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function md(n){var i=Yo(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),l=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,p=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(A){l=""+A,p.call(this,A)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function wa(n){n._valueTracker||(n._valueTracker=md(n))}function Ko(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return n&&(l=Yo(n)?n.checked?"true":"false":n.value),n=l,n!==a?(i.setValue(n),!0):!1}function br(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var pd=/[\n"\\]/g;function Tt(n){return n.replace(pd,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Rn(n,i,a,l,d,p,A,w){n.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.type=A:n.removeAttribute("type"),i!=null?A==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+hn(i)):n.value!==""+hn(i)&&(n.value=""+hn(i)):A!=="submit"&&A!=="reset"||n.removeAttribute("value"),i!=null?Ii(n,A,hn(i)):a!=null?Ii(n,A,hn(a)):l!=null&&n.removeAttribute("value"),d==null&&p!=null&&(n.defaultChecked=!!p),d!=null&&(n.checked=d&&typeof d!="function"&&typeof d!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.name=""+hn(w):n.removeAttribute("name")}function Sr(n,i,a,l,d,p,A,w){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),i!=null||a!=null){if(!(p!=="submit"&&p!=="reset"||i!=null))return;a=a!=null?""+hn(a):"",i=i!=null?""+hn(i):a,w||i===n.value||(n.value=i),n.defaultValue=i}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=w?n.checked:!!l,n.defaultChecked=!!l,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(n.name=A)}function Ii(n,i,a){i==="number"&&br(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function Gs(n,i,a,l){if(n=n.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=i.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&l&&(n[a].defaultSelected=!0)}else{for(a=""+hn(a),i=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,l&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function et(n,i,a){if(i!=null&&(i=""+hn(i),i!==n.value&&(n.value=i),a==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=a!=null?""+hn(a):""}function wr(n,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(ue(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=hn(i),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l)}function Ln(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Rr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jc(n,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":l?n.setProperty(i,a):typeof a!="number"||a===0||Rr.has(i)?i==="float"?n.cssFloat=a:n[i]=(""+a).trim():n[i]=a+"px"}function Xo(n,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var d in i)l=i[d],i.hasOwnProperty(d)&&a[d]!==l&&jc(n,d,l)}else for(var p in i)i.hasOwnProperty(p)&&jc(n,p,i[p])}function Zo(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),yd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ra(n){return yd.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var $s=null;function Un(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Qs=null,Ys=null;function Jo(n){var i=hs(n);if(i&&(n=i.stateNode)){var a=n[Et]||null;e:switch(n=i.stateNode,i.type){case"input":if(Rn(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Tt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==n&&l.form===n.form){var d=l[Et]||null;if(!d)throw Error(r(90));Rn(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===n.form&&Ko(l)}break e;case"textarea":et(n,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Gs(n,!!a.multiple,i,!1)}}}var ms=!1;function Vc(n,i,a){if(ms)return n(i,a);ms=!0;try{var l=n(i);return l}finally{if(ms=!1,(Qs!==null||Ys!==null)&&(Cu(),Qs&&(i=Qs,n=Ys,Ys=Qs=null,Jo(i),n)))for(i=0;i<n.length;i++)Jo(n[i])}}function Ir(n,i){var a=n.stateNode;if(a===null)return null;var l=a[Et]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var Jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zn=!1;if(Jn)try{var Cr={};Object.defineProperty(Cr,"passive",{get:function(){zn=!0}}),window.addEventListener("test",Cr,Cr),window.removeEventListener("test",Cr,Cr)}catch{zn=!1}var ps=null,Ci=null,Ks=null;function Wo(){if(Ks)return Ks;var n,i=Ci,a=i.length,l,d="value"in ps?ps.value:ps.textContent,p=d.length;for(n=0;n<a&&i[n]===d[n];n++);var A=a-n;for(l=1;l<=A&&i[a-l]===d[p-l];l++);return Ks=d.slice(n,1<l?1-l:void 0)}function gs(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function ys(){return!0}function el(){return!1}function Pt(n){function i(a,l,d,p,A){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=p,this.target=A,this.currentTarget=null;for(var w in n)n.hasOwnProperty(w)&&(a=n[w],this[w]=a?a(p):p[w]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?ys:el,this.isPropagationStopped=el,this}return v(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ys)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ys)},persist:function(){},isPersistent:ys}),i}var Ke={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ia=Pt(Ke),Nr=v({},Ke,{view:0,detail:0}),Pc=Pt(Nr),Ca,Na,vs,xr=v({},Nr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==vs&&(vs&&n.type==="mousemove"?(Ca=n.screenX-vs.screenX,Na=n.screenY-vs.screenY):Na=Ca=0,vs=n),Ca)},movementY:function(n){return"movementY"in n?n.movementY:Na}}),Bn=Pt(xr),kc=v({},xr,{dataTransfer:0}),vd=Pt(kc),Dr=v({},Nr,{relatedTarget:0}),xa=Pt(Dr),tl=v({},Ke,{animationName:0,elapsedTime:0,pseudoElement:0}),Da=Pt(tl),Lc=v({},Ke,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Oa=Pt(Lc),_d=v({},Ke,{data:0}),nl=Pt(_d),Or={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sl(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=zc[n])?!!i[n]:!1}function Mr(){return sl}var Bc=v({},Nr,{key:function(n){if(n.key){var i=Or[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=gs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Uc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mr,charCode:function(n){return n.type==="keypress"?gs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?gs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ma=Pt(Bc),Fc=v({},xr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),il=Pt(Fc),Xs=v({},Nr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mr}),Hc=Pt(Xs),qc=v({},Ke,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gc=Pt(qc),$c=v({},xr,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ja=Pt($c),dn=v({},Ke,{newState:0,oldState:0}),Qc=Pt(dn),Yc=[9,13,27,32],_s=Jn&&"CompositionEvent"in window,u=null;Jn&&"documentMode"in document&&(u=document.documentMode);var _=Jn&&"TextEvent"in window&&!u,E=Jn&&(!_s||u&&8<u&&11>=u),C=" ",F=!1;function Q(n,i){switch(n){case"keyup":return Yc.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function de(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var He=!1;function Nt(n,i){switch(n){case"compositionend":return de(i);case"keypress":return i.which!==32?null:(F=!0,C);case"textInput":return n=i.data,n===C&&F?null:n;default:return null}}function qe(n,i){if(He)return n==="compositionend"||!_s&&Q(n,i)?(n=Wo(),Ks=Ci=ps=null,He=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return E&&i.locale!=="ko"?null:i.data;default:return null}}var kt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xt(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!kt[n.type]:i==="textarea"}function Zs(n,i,a,l){Qs?Ys?Ys.push(l):Ys=[l]:Qs=l,i=ju(i,"onChange"),0<i.length&&(a=new Ia("onChange","change",null,a,l),n.push({event:a,listeners:i}))}var $t=null,Es=null;function rl(n){Wv(n,0)}function Kc(n){var i=ds(n);if(Ko(i))return n}function Eg(n,i){if(n==="change")return i}var Tg=!1;if(Jn){var Ed;if(Jn){var Td="oninput"in document;if(!Td){var Ag=document.createElement("div");Ag.setAttribute("oninput","return;"),Td=typeof Ag.oninput=="function"}Ed=Td}else Ed=!1;Tg=Ed&&(!document.documentMode||9<document.documentMode)}function bg(){$t&&($t.detachEvent("onpropertychange",Sg),Es=$t=null)}function Sg(n){if(n.propertyName==="value"&&Kc(Es)){var i=[];Zs(i,Es,n,Un(n)),Vc(rl,i)}}function dS(n,i,a){n==="focusin"?(bg(),$t=i,Es=a,$t.attachEvent("onpropertychange",Sg)):n==="focusout"&&bg()}function fS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Kc(Es)}function mS(n,i){if(n==="click")return Kc(i)}function pS(n,i){if(n==="input"||n==="change")return Kc(i)}function gS(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var In=typeof Object.is=="function"?Object.is:gS;function al(n,i){if(In(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!Ps.call(i,d)||!In(n[d],i[d]))return!1}return!0}function wg(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Rg(n,i){var a=wg(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=i&&l>=i)return{node:a,offset:i-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=wg(a)}}function Ig(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Ig(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Cg(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=br(n.document);i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=br(n.document)}return i}function Ad(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var yS=Jn&&"documentMode"in document&&11>=document.documentMode,Va=null,bd=null,ol=null,Sd=!1;function Ng(n,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Sd||Va==null||Va!==br(l)||(l=Va,"selectionStart"in l&&Ad(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ol&&al(ol,l)||(ol=l,l=ju(bd,"onSelect"),0<l.length&&(i=new Ia("onSelect","select",null,i,a),n.push({event:i,listeners:l}),i.target=Va)))}function jr(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Pa={animationend:jr("Animation","AnimationEnd"),animationiteration:jr("Animation","AnimationIteration"),animationstart:jr("Animation","AnimationStart"),transitionrun:jr("Transition","TransitionRun"),transitionstart:jr("Transition","TransitionStart"),transitioncancel:jr("Transition","TransitionCancel"),transitionend:jr("Transition","TransitionEnd")},wd={},xg={};Jn&&(xg=document.createElement("div").style,"AnimationEvent"in window||(delete Pa.animationend.animation,delete Pa.animationiteration.animation,delete Pa.animationstart.animation),"TransitionEvent"in window||delete Pa.transitionend.transition);function Vr(n){if(wd[n])return wd[n];if(!Pa[n])return n;var i=Pa[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in xg)return wd[n]=i[a];return n}var Dg=Vr("animationend"),Og=Vr("animationiteration"),Mg=Vr("animationstart"),vS=Vr("transitionrun"),_S=Vr("transitionstart"),ES=Vr("transitioncancel"),jg=Vr("transitionend"),Vg=new Map,Rd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rd.push("scrollEnd");function Wn(n,i){Vg.set(n,i),Zn(i,[n])}var Pg=new WeakMap;function Fn(n,i){if(typeof n=="object"&&n!==null){var a=Pg.get(n);return a!==void 0?a:(i={value:n,source:i,stack:Sa(i)},Pg.set(n,i),i)}return{value:n,source:i,stack:Sa(i)}}var Hn=[],ka=0,Id=0;function Xc(){for(var n=ka,i=Id=ka=0;i<n;){var a=Hn[i];Hn[i++]=null;var l=Hn[i];Hn[i++]=null;var d=Hn[i];Hn[i++]=null;var p=Hn[i];if(Hn[i++]=null,l!==null&&d!==null){var A=l.pending;A===null?d.next=d:(d.next=A.next,A.next=d),l.pending=d}p!==0&&kg(a,d,p)}}function Zc(n,i,a,l){Hn[ka++]=n,Hn[ka++]=i,Hn[ka++]=a,Hn[ka++]=l,Id|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function Cd(n,i,a,l){return Zc(n,i,a,l),Jc(n)}function La(n,i){return Zc(n,null,null,i),Jc(n)}function kg(n,i,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var d=!1,p=n.return;p!==null;)p.childLanes|=a,l=p.alternate,l!==null&&(l.childLanes|=a),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(d=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,d&&i!==null&&(d=31-Vt(a),n=p.hiddenUpdates,l=n[d],l===null?n[d]=[i]:l.push(i),i.lane=a|536870912),p):null}function Jc(n){if(50<Ol)throw Ol=0,Vf=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Ua={};function TS(n,i,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(n,i,a,l){return new TS(n,i,a,l)}function Nd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Js(n,i){var a=n.alternate;return a===null?(a=Cn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function Lg(n,i){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Wc(n,i,a,l,d,p){var A=0;if(l=n,typeof n=="function")Nd(n)&&(A=1);else if(typeof n=="string")A=bw(n,a,ve.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case N:return n=Cn(31,a,i,d),n.elementType=N,n.lanes=p,n;case k:return Pr(a.children,d,p,i);case U:A=8,d|=24;break;case V:return n=Cn(12,a,i,d|2),n.elementType=V,n.lanes=p,n;case le:return n=Cn(13,a,i,d),n.elementType=le,n.lanes=p,n;case ye:return n=Cn(19,a,i,d),n.elementType=ye,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case re:case K:A=10;break e;case J:A=9;break e;case ae:A=11;break e;case D:A=14;break e;case R:A=16,l=null;break e}A=29,a=Error(r(130,n===null?"null":typeof n,"")),l=null}return i=Cn(A,a,i,d),i.elementType=n,i.type=l,i.lanes=p,i}function Pr(n,i,a,l){return n=Cn(7,n,l,i),n.lanes=a,n}function xd(n,i,a){return n=Cn(6,n,null,i),n.lanes=a,n}function Dd(n,i,a){return i=Cn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var za=[],Ba=0,eu=null,tu=0,qn=[],Gn=0,kr=null,Ws=1,ei="";function Lr(n,i){za[Ba++]=tu,za[Ba++]=eu,eu=n,tu=i}function Ug(n,i,a){qn[Gn++]=Ws,qn[Gn++]=ei,qn[Gn++]=kr,kr=n;var l=Ws;n=ei;var d=32-Vt(l)-1;l&=~(1<<d),a+=1;var p=32-Vt(i)+d;if(30<p){var A=d-d%5;p=(l&(1<<A)-1).toString(32),l>>=A,d-=A,Ws=1<<32-Vt(i)+d|a<<d|l,ei=p+n}else Ws=1<<p|a<<d|l,ei=n}function Od(n){n.return!==null&&(Lr(n,1),Ug(n,1,0))}function Md(n){for(;n===eu;)eu=za[--Ba],za[Ba]=null,tu=za[--Ba],za[Ba]=null;for(;n===kr;)kr=qn[--Gn],qn[Gn]=null,ei=qn[--Gn],qn[Gn]=null,Ws=qn[--Gn],qn[Gn]=null}var fn=null,ht=null,Ye=!1,Ur=null,Ts=!1,jd=Error(r(519));function zr(n){var i=Error(r(418,""));throw ul(Fn(i,n)),jd}function zg(n){var i=n.stateNode,a=n.type,l=n.memoizedProps;switch(i[Ct]=n,i[Et]=l,a){case"dialog":Le("cancel",i),Le("close",i);break;case"iframe":case"object":case"embed":Le("load",i);break;case"video":case"audio":for(a=0;a<jl.length;a++)Le(jl[a],i);break;case"source":Le("error",i);break;case"img":case"image":case"link":Le("error",i),Le("load",i);break;case"details":Le("toggle",i);break;case"input":Le("invalid",i),Sr(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),wa(i);break;case"select":Le("invalid",i);break;case"textarea":Le("invalid",i),wr(i,l.value,l.defaultValue,l.children),wa(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||s_(i.textContent,a)?(l.popover!=null&&(Le("beforetoggle",i),Le("toggle",i)),l.onScroll!=null&&Le("scroll",i),l.onScrollEnd!=null&&Le("scrollend",i),l.onClick!=null&&(i.onclick=Vu),i=!0):i=!1,i||zr(n)}function Bg(n){for(fn=n.return;fn;)switch(fn.tag){case 5:case 13:Ts=!1;return;case 27:case 3:Ts=!0;return;default:fn=fn.return}}function ll(n){if(n!==fn)return!1;if(!Ye)return Bg(n),Ye=!0,!1;var i=n.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Zf(n.type,n.memoizedProps)),a=!a),a&&ht&&zr(n),Bg(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(a=n.data,a==="/$"){if(i===0){ht=ts(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;n=n.nextSibling}ht=null}}else i===27?(i=ht,qi(n.type)?(n=tm,tm=null,ht=n):ht=i):ht=fn?ts(n.stateNode.nextSibling):null;return!0}function cl(){ht=fn=null,Ye=!1}function Fg(){var n=Ur;return n!==null&&(vn===null?vn=n:vn.push.apply(vn,n),Ur=null),n}function ul(n){Ur===null?Ur=[n]:Ur.push(n)}var Vd=te(null),Br=null,ti=null;function Ni(n,i,a){oe(Vd,i._currentValue),i._currentValue=a}function ni(n){n._currentValue=Vd.current,he(Vd)}function Pd(n,i,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),n===a)break;n=n.return}}function kd(n,i,a,l){var d=n.child;for(d!==null&&(d.return=n);d!==null;){var p=d.dependencies;if(p!==null){var A=d.child;p=p.firstContext;e:for(;p!==null;){var w=p;p=d;for(var j=0;j<i.length;j++)if(w.context===i[j]){p.lanes|=a,w=p.alternate,w!==null&&(w.lanes|=a),Pd(p.return,a,n),l||(A=null);break e}p=w.next}}else if(d.tag===18){if(A=d.return,A===null)throw Error(r(341));A.lanes|=a,p=A.alternate,p!==null&&(p.lanes|=a),Pd(A,a,n),A=null}else A=d.child;if(A!==null)A.return=d;else for(A=d;A!==null;){if(A===n){A=null;break}if(d=A.sibling,d!==null){d.return=A.return,A=d;break}A=A.return}d=A}}function hl(n,i,a,l){n=null;for(var d=i,p=!1;d!==null;){if(!p){if((d.flags&524288)!==0)p=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var A=d.alternate;if(A===null)throw Error(r(387));if(A=A.memoizedProps,A!==null){var w=d.type;In(d.pendingProps.value,A.value)||(n!==null?n.push(w):n=[w])}}else if(d===vt.current){if(A=d.alternate,A===null)throw Error(r(387));A.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(n!==null?n.push(zl):n=[zl])}d=d.return}n!==null&&kd(i,n,a,l),i.flags|=262144}function nu(n){for(n=n.firstContext;n!==null;){if(!In(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Fr(n){Br=n,ti=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function tn(n){return Hg(Br,n)}function su(n,i){return Br===null&&Fr(n),Hg(n,i)}function Hg(n,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},ti===null){if(n===null)throw Error(r(308));ti=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else ti=ti.next=i;return a}var AS=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){i.aborted=!0,n.forEach(function(a){return a()})}},bS=s.unstable_scheduleCallback,SS=s.unstable_NormalPriority,Dt={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ld(){return{controller:new AS,data:new Map,refCount:0}}function dl(n){n.refCount--,n.refCount===0&&bS(SS,function(){n.controller.abort()})}var fl=null,Ud=0,Fa=0,Ha=null;function wS(n,i){if(fl===null){var a=fl=[];Ud=0,Fa=Ff(),Ha={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Ud++,i.then(qg,qg),i}function qg(){if(--Ud===0&&fl!==null){Ha!==null&&(Ha.status="fulfilled");var n=fl;fl=null,Fa=0,Ha=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function RS(n,i){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return n.then(function(){l.status="fulfilled",l.value=i;for(var d=0;d<a.length;d++)(0,a[d])(i)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var Gg=B.S;B.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&wS(n,i),Gg!==null&&Gg(n,i)};var Hr=te(null);function zd(){var n=Hr.current;return n!==null?n:rt.pooledCache}function iu(n,i){i===null?oe(Hr,Hr.current):oe(Hr,i.pool)}function $g(){var n=zd();return n===null?null:{parent:Dt._currentValue,pool:n}}var ml=Error(r(460)),Qg=Error(r(474)),ru=Error(r(542)),Bd={then:function(){}};function Yg(n){return n=n.status,n==="fulfilled"||n==="rejected"}function au(){}function Kg(n,i,a){switch(a=n[a],a===void 0?n.push(i):a!==i&&(i.then(au,au),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Zg(n),n;default:if(typeof i.status=="string")i.then(au,au);else{if(n=rt,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(l){if(i.status==="pending"){var d=i;d.status="fulfilled",d.value=l}},function(l){if(i.status==="pending"){var d=i;d.status="rejected",d.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Zg(n),n}throw pl=i,ml}}var pl=null;function Xg(){if(pl===null)throw Error(r(459));var n=pl;return pl=null,n}function Zg(n){if(n===ml||n===ru)throw Error(r(483))}var xi=!1;function Fd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hd(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Di(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Oi(n,i,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(Ze&2)!==0){var d=l.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),l.pending=i,i=Jc(n),kg(n,null,a),i}return Zc(n,l,i,a),Jc(n)}function gl(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,qo(n,a)}}function qd(n,i){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};p===null?d=p=A:p=p.next=A,a=a.next}while(a!==null);p===null?d=p=i:p=p.next=i}else d=p=i;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}var Gd=!1;function yl(){if(Gd){var n=Ha;if(n!==null)throw n}}function vl(n,i,a,l){Gd=!1;var d=n.updateQueue;xi=!1;var p=d.firstBaseUpdate,A=d.lastBaseUpdate,w=d.shared.pending;if(w!==null){d.shared.pending=null;var j=w,q=j.next;j.next=null,A===null?p=q:A.next=q,A=j;var X=n.alternate;X!==null&&(X=X.updateQueue,w=X.lastBaseUpdate,w!==A&&(w===null?X.firstBaseUpdate=q:w.next=q,X.lastBaseUpdate=j))}if(p!==null){var ne=d.baseState;A=0,X=q=j=null,w=p;do{var G=w.lane&-536870913,$=G!==w.lane;if($?(Ge&G)===G:(l&G)===G){G!==0&&G===Fa&&(Gd=!0),X!==null&&(X=X.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Re=n,Ae=w;G=i;var st=a;switch(Ae.tag){case 1:if(Re=Ae.payload,typeof Re=="function"){ne=Re.call(st,ne,G);break e}ne=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Ae.payload,G=typeof Re=="function"?Re.call(st,ne,G):Re,G==null)break e;ne=v({},ne,G);break e;case 2:xi=!0}}G=w.callback,G!==null&&(n.flags|=64,$&&(n.flags|=8192),$=d.callbacks,$===null?d.callbacks=[G]:$.push(G))}else $={lane:G,tag:w.tag,payload:w.payload,callback:w.callback,next:null},X===null?(q=X=$,j=ne):X=X.next=$,A|=G;if(w=w.next,w===null){if(w=d.shared.pending,w===null)break;$=w,w=$.next,$.next=null,d.lastBaseUpdate=$,d.shared.pending=null}}while(!0);X===null&&(j=ne),d.baseState=j,d.firstBaseUpdate=q,d.lastBaseUpdate=X,p===null&&(d.shared.lanes=0),zi|=A,n.lanes=A,n.memoizedState=ne}}function Jg(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function Wg(n,i){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)Jg(a[n],i)}var qa=te(null),ou=te(0);function ey(n,i){n=ci,oe(ou,n),oe(qa,i),ci=n|i.baseLanes}function $d(){oe(ou,ci),oe(qa,qa.current)}function Qd(){ci=ou.current,he(qa),he(ou)}var Mi=0,je=null,tt=null,At=null,lu=!1,Ga=!1,qr=!1,cu=0,_l=0,$a=null,IS=0;function pt(){throw Error(r(321))}function Yd(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!In(n[a],i[a]))return!1;return!0}function Kd(n,i,a,l,d,p){return Mi=p,je=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,B.H=n===null||n.memoizedState===null?ky:Ly,qr=!1,p=a(l,d),qr=!1,Ga&&(p=ny(i,a,l,d)),ty(n),p}function ty(n){B.H=pu;var i=tt!==null&&tt.next!==null;if(Mi=0,At=tt=je=null,lu=!1,_l=0,$a=null,i)throw Error(r(300));n===null||Lt||(n=n.dependencies,n!==null&&nu(n)&&(Lt=!0))}function ny(n,i,a,l){je=n;var d=0;do{if(Ga&&($a=null),_l=0,Ga=!1,25<=d)throw Error(r(301));if(d+=1,At=tt=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}B.H=jS,p=i(a,l)}while(Ga);return p}function CS(){var n=B.H,i=n.useState()[0];return i=typeof i.then=="function"?El(i):i,n=n.useState()[0],(tt!==null?tt.memoizedState:null)!==n&&(je.flags|=1024),i}function Xd(){var n=cu!==0;return cu=0,n}function Zd(n,i,a){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~a}function Jd(n){if(lu){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}lu=!1}Mi=0,At=tt=je=null,Ga=!1,_l=cu=0,$a=null}function gn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?je.memoizedState=At=n:At=At.next=n,At}function bt(){if(tt===null){var n=je.alternate;n=n!==null?n.memoizedState:null}else n=tt.next;var i=At===null?je.memoizedState:At.next;if(i!==null)At=i,tt=n;else{if(n===null)throw je.alternate===null?Error(r(467)):Error(r(310));tt=n,n={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},At===null?je.memoizedState=At=n:At=At.next=n}return At}function Wd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function El(n){var i=_l;return _l+=1,$a===null&&($a=[]),n=Kg($a,n,i),i=je,(At===null?i.memoizedState:At.next)===null&&(i=i.alternate,B.H=i===null||i.memoizedState===null?ky:Ly),n}function uu(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return El(n);if(n.$$typeof===K)return tn(n)}throw Error(r(438,String(n)))}function ef(n){var i=null,a=je.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=je.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(d){return d.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Wd(),je.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(n),l=0;l<n;l++)a[l]=M;return i.index++,a}function si(n,i){return typeof i=="function"?i(n):i}function hu(n){var i=bt();return tf(i,tt,n)}function tf(n,i,a){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var d=n.baseQueue,p=l.pending;if(p!==null){if(d!==null){var A=d.next;d.next=p.next,p.next=A}i.baseQueue=d=p,l.pending=null}if(p=n.baseState,d===null)n.memoizedState=p;else{i=d.next;var w=A=null,j=null,q=i,X=!1;do{var ne=q.lane&-536870913;if(ne!==q.lane?(Ge&ne)===ne:(Mi&ne)===ne){var G=q.revertLane;if(G===0)j!==null&&(j=j.next={lane:0,revertLane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),ne===Fa&&(X=!0);else if((Mi&G)===G){q=q.next,G===Fa&&(X=!0);continue}else ne={lane:0,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},j===null?(w=j=ne,A=p):j=j.next=ne,je.lanes|=G,zi|=G;ne=q.action,qr&&a(p,ne),p=q.hasEagerState?q.eagerState:a(p,ne)}else G={lane:ne,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},j===null?(w=j=G,A=p):j=j.next=G,je.lanes|=ne,zi|=ne;q=q.next}while(q!==null&&q!==i);if(j===null?A=p:j.next=w,!In(p,n.memoizedState)&&(Lt=!0,X&&(a=Ha,a!==null)))throw a;n.memoizedState=p,n.baseState=A,n.baseQueue=j,l.lastRenderedState=p}return d===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function nf(n){var i=bt(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var l=a.dispatch,d=a.pending,p=i.memoizedState;if(d!==null){a.pending=null;var A=d=d.next;do p=n(p,A.action),A=A.next;while(A!==d);In(p,i.memoizedState)||(Lt=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),a.lastRenderedState=p}return[p,l]}function sy(n,i,a){var l=je,d=bt(),p=Ye;if(p){if(a===void 0)throw Error(r(407));a=a()}else a=i();var A=!In((tt||d).memoizedState,a);A&&(d.memoizedState=a,Lt=!0),d=d.queue;var w=ay.bind(null,l,d,n);if(Tl(2048,8,w,[n]),d.getSnapshot!==i||A||At!==null&&At.memoizedState.tag&1){if(l.flags|=2048,Qa(9,du(),ry.bind(null,l,d,a,i),null),rt===null)throw Error(r(349));p||(Mi&124)!==0||iy(l,i,a)}return a}function iy(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=je.updateQueue,i===null?(i=Wd(),je.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function ry(n,i,a,l){i.value=a,i.getSnapshot=l,oy(i)&&ly(n)}function ay(n,i,a){return a(function(){oy(i)&&ly(n)})}function oy(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!In(n,a)}catch{return!0}}function ly(n){var i=La(n,2);i!==null&&Mn(i,n,2)}function sf(n){var i=gn();if(typeof n=="function"){var a=n;if(n=a(),qr){ln(!0);try{a()}finally{ln(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:n},i}function cy(n,i,a,l){return n.baseState=a,tf(n,tt,typeof l=="function"?l:si)}function NS(n,i,a,l,d){if(mu(n))throw Error(r(485));if(n=i.action,n!==null){var p={payload:d,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){p.listeners.push(A)}};B.T!==null?a(!0):p.isTransition=!1,l(p),a=i.pending,a===null?(p.next=i.pending=p,uy(i,p)):(p.next=a.next,i.pending=a.next=p)}}function uy(n,i){var a=i.action,l=i.payload,d=n.state;if(i.isTransition){var p=B.T,A={};B.T=A;try{var w=a(d,l),j=B.S;j!==null&&j(A,w),hy(n,i,w)}catch(q){rf(n,i,q)}finally{B.T=p}}else try{p=a(d,l),hy(n,i,p)}catch(q){rf(n,i,q)}}function hy(n,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){dy(n,i,l)},function(l){return rf(n,i,l)}):dy(n,i,a)}function dy(n,i,a){i.status="fulfilled",i.value=a,fy(i),n.state=a,i=n.pending,i!==null&&(a=i.next,a===i?n.pending=null:(a=a.next,i.next=a,uy(n,a)))}function rf(n,i,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,fy(i),i=i.next;while(i!==l)}n.action=null}function fy(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function my(n,i){return i}function py(n,i){if(Ye){var a=rt.formState;if(a!==null){e:{var l=je;if(Ye){if(ht){t:{for(var d=ht,p=Ts;d.nodeType!==8;){if(!p){d=null;break t}if(d=ts(d.nextSibling),d===null){d=null;break t}}p=d.data,d=p==="F!"||p==="F"?d:null}if(d){ht=ts(d.nextSibling),l=d.data==="F!";break e}}zr(l)}l=!1}l&&(i=a[0])}}return a=gn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:my,lastRenderedState:i},a.queue=l,a=jy.bind(null,je,l),l.dispatch=a,l=sf(!1),p=uf.bind(null,je,!1,l.queue),l=gn(),d={state:i,dispatch:null,action:n,pending:null},l.queue=d,a=NS.bind(null,je,d,p,a),d.dispatch=a,l.memoizedState=n,[i,a,!1]}function gy(n){var i=bt();return yy(i,tt,n)}function yy(n,i,a){if(i=tf(n,i,my)[0],n=hu(si)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=El(i)}catch(A){throw A===ml?ru:A}else l=i;i=bt();var d=i.queue,p=d.dispatch;return a!==i.memoizedState&&(je.flags|=2048,Qa(9,du(),xS.bind(null,d,a),null)),[l,p,n]}function xS(n,i){n.action=i}function vy(n){var i=bt(),a=tt;if(a!==null)return yy(i,a,n);bt(),i=i.memoizedState,a=bt();var l=a.queue.dispatch;return a.memoizedState=n,[i,l,!1]}function Qa(n,i,a,l){return n={tag:n,create:a,deps:l,inst:i,next:null},i=je.updateQueue,i===null&&(i=Wd(),je.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,i.lastEffect=n),n}function du(){return{destroy:void 0,resource:void 0}}function _y(){return bt().memoizedState}function fu(n,i,a,l){var d=gn();l=l===void 0?null:l,je.flags|=n,d.memoizedState=Qa(1|i,du(),a,l)}function Tl(n,i,a,l){var d=bt();l=l===void 0?null:l;var p=d.memoizedState.inst;tt!==null&&l!==null&&Yd(l,tt.memoizedState.deps)?d.memoizedState=Qa(i,p,a,l):(je.flags|=n,d.memoizedState=Qa(1|i,p,a,l))}function Ey(n,i){fu(8390656,8,n,i)}function Ty(n,i){Tl(2048,8,n,i)}function Ay(n,i){return Tl(4,2,n,i)}function by(n,i){return Tl(4,4,n,i)}function Sy(n,i){if(typeof i=="function"){n=n();var a=i(n);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function wy(n,i,a){a=a!=null?a.concat([n]):null,Tl(4,4,Sy.bind(null,i,n),a)}function af(){}function Ry(n,i){var a=bt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Yd(i,l[1])?l[0]:(a.memoizedState=[n,i],n)}function Iy(n,i){var a=bt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Yd(i,l[1]))return l[0];if(l=n(),qr){ln(!0);try{n()}finally{ln(!1)}}return a.memoizedState=[l,i],l}function of(n,i,a){return a===void 0||(Mi&1073741824)!==0?n.memoizedState=i:(n.memoizedState=a,n=xv(),je.lanes|=n,zi|=n,a)}function Cy(n,i,a,l){return In(a,i)?a:qa.current!==null?(n=of(n,a,l),In(n,i)||(Lt=!0),n):(Mi&42)===0?(Lt=!0,n.memoizedState=a):(n=xv(),je.lanes|=n,zi|=n,i)}function Ny(n,i,a,l,d){var p=ee.p;ee.p=p!==0&&8>p?p:8;var A=B.T,w={};B.T=w,uf(n,!1,i,a);try{var j=d(),q=B.S;if(q!==null&&q(w,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var X=RS(j,l);Al(n,i,X,On(n))}else Al(n,i,l,On(n))}catch(ne){Al(n,i,{then:function(){},status:"rejected",reason:ne},On())}finally{ee.p=p,B.T=A}}function DS(){}function lf(n,i,a,l){if(n.tag!==5)throw Error(r(476));var d=xy(n).queue;Ny(n,d,i,fe,a===null?DS:function(){return Dy(n),a(l)})}function xy(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:fe},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:a},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function Dy(n){var i=xy(n).next.queue;Al(n,i,{},On())}function cf(){return tn(zl)}function Oy(){return bt().memoizedState}function My(){return bt().memoizedState}function OS(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var a=On();n=Di(a);var l=Oi(i,n,a);l!==null&&(Mn(l,i,a),gl(l,i,a)),i={cache:Ld()},n.payload=i;return}i=i.return}}function MS(n,i,a){var l=On();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},mu(n)?Vy(i,a):(a=Cd(n,i,a,l),a!==null&&(Mn(a,n,l),Py(a,i,l)))}function jy(n,i,a){var l=On();Al(n,i,a,l)}function Al(n,i,a,l){var d={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(mu(n))Vy(i,d);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var A=i.lastRenderedState,w=p(A,a);if(d.hasEagerState=!0,d.eagerState=w,In(w,A))return Zc(n,i,d,0),rt===null&&Xc(),!1}catch{}finally{}if(a=Cd(n,i,d,l),a!==null)return Mn(a,n,l),Py(a,i,l),!0}return!1}function uf(n,i,a,l){if(l={lane:2,revertLane:Ff(),action:l,hasEagerState:!1,eagerState:null,next:null},mu(n)){if(i)throw Error(r(479))}else i=Cd(n,a,l,2),i!==null&&Mn(i,n,2)}function mu(n){var i=n.alternate;return n===je||i!==null&&i===je}function Vy(n,i){Ga=lu=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function Py(n,i,a){if((a&4194048)!==0){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,qo(n,a)}}var pu={readContext:tn,use:uu,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useLayoutEffect:pt,useInsertionEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useSyncExternalStore:pt,useId:pt,useHostTransitionStatus:pt,useFormState:pt,useActionState:pt,useOptimistic:pt,useMemoCache:pt,useCacheRefresh:pt},ky={readContext:tn,use:uu,useCallback:function(n,i){return gn().memoizedState=[n,i===void 0?null:i],n},useContext:tn,useEffect:Ey,useImperativeHandle:function(n,i,a){a=a!=null?a.concat([n]):null,fu(4194308,4,Sy.bind(null,i,n),a)},useLayoutEffect:function(n,i){return fu(4194308,4,n,i)},useInsertionEffect:function(n,i){fu(4,2,n,i)},useMemo:function(n,i){var a=gn();i=i===void 0?null:i;var l=n();if(qr){ln(!0);try{n()}finally{ln(!1)}}return a.memoizedState=[l,i],l},useReducer:function(n,i,a){var l=gn();if(a!==void 0){var d=a(i);if(qr){ln(!0);try{a(i)}finally{ln(!1)}}}else d=i;return l.memoizedState=l.baseState=d,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:d},l.queue=n,n=n.dispatch=MS.bind(null,je,n),[l.memoizedState,n]},useRef:function(n){var i=gn();return n={current:n},i.memoizedState=n},useState:function(n){n=sf(n);var i=n.queue,a=jy.bind(null,je,i);return i.dispatch=a,[n.memoizedState,a]},useDebugValue:af,useDeferredValue:function(n,i){var a=gn();return of(a,n,i)},useTransition:function(){var n=sf(!1);return n=Ny.bind(null,je,n.queue,!0,!1),gn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,a){var l=je,d=gn();if(Ye){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),rt===null)throw Error(r(349));(Ge&124)!==0||iy(l,i,a)}d.memoizedState=a;var p={value:a,getSnapshot:i};return d.queue=p,Ey(ay.bind(null,l,p,n),[n]),l.flags|=2048,Qa(9,du(),ry.bind(null,l,p,a,i),null),a},useId:function(){var n=gn(),i=rt.identifierPrefix;if(Ye){var a=ei,l=Ws;a=(l&~(1<<32-Vt(l)-1)).toString(32)+a,i="«"+i+"R"+a,a=cu++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=IS++,i="«"+i+"r"+a.toString(32)+"»";return n.memoizedState=i},useHostTransitionStatus:cf,useFormState:py,useActionState:py,useOptimistic:function(n){var i=gn();i.memoizedState=i.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=uf.bind(null,je,!0,a),a.dispatch=i,[n,i]},useMemoCache:ef,useCacheRefresh:function(){return gn().memoizedState=OS.bind(null,je)}},Ly={readContext:tn,use:uu,useCallback:Ry,useContext:tn,useEffect:Ty,useImperativeHandle:wy,useInsertionEffect:Ay,useLayoutEffect:by,useMemo:Iy,useReducer:hu,useRef:_y,useState:function(){return hu(si)},useDebugValue:af,useDeferredValue:function(n,i){var a=bt();return Cy(a,tt.memoizedState,n,i)},useTransition:function(){var n=hu(si)[0],i=bt().memoizedState;return[typeof n=="boolean"?n:El(n),i]},useSyncExternalStore:sy,useId:Oy,useHostTransitionStatus:cf,useFormState:gy,useActionState:gy,useOptimistic:function(n,i){var a=bt();return cy(a,tt,n,i)},useMemoCache:ef,useCacheRefresh:My},jS={readContext:tn,use:uu,useCallback:Ry,useContext:tn,useEffect:Ty,useImperativeHandle:wy,useInsertionEffect:Ay,useLayoutEffect:by,useMemo:Iy,useReducer:nf,useRef:_y,useState:function(){return nf(si)},useDebugValue:af,useDeferredValue:function(n,i){var a=bt();return tt===null?of(a,n,i):Cy(a,tt.memoizedState,n,i)},useTransition:function(){var n=nf(si)[0],i=bt().memoizedState;return[typeof n=="boolean"?n:El(n),i]},useSyncExternalStore:sy,useId:Oy,useHostTransitionStatus:cf,useFormState:vy,useActionState:vy,useOptimistic:function(n,i){var a=bt();return tt!==null?cy(a,tt,n,i):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:ef,useCacheRefresh:My},Ya=null,bl=0;function gu(n){var i=bl;return bl+=1,Ya===null&&(Ya=[]),Kg(Ya,n,i)}function Sl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function yu(n,i){throw i.$$typeof===T?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Uy(n){var i=n._init;return i(n._payload)}function zy(n){function i(z,L){if(n){var H=z.deletions;H===null?(z.deletions=[L],z.flags|=16):H.push(L)}}function a(z,L){if(!n)return null;for(;L!==null;)i(z,L),L=L.sibling;return null}function l(z){for(var L=new Map;z!==null;)z.key!==null?L.set(z.key,z):L.set(z.index,z),z=z.sibling;return L}function d(z,L){return z=Js(z,L),z.index=0,z.sibling=null,z}function p(z,L,H){return z.index=H,n?(H=z.alternate,H!==null?(H=H.index,H<L?(z.flags|=67108866,L):H):(z.flags|=67108866,L)):(z.flags|=1048576,L)}function A(z){return n&&z.alternate===null&&(z.flags|=67108866),z}function w(z,L,H,Z){return L===null||L.tag!==6?(L=xd(H,z.mode,Z),L.return=z,L):(L=d(L,H),L.return=z,L)}function j(z,L,H,Z){var ge=H.type;return ge===k?X(z,L,H.props.children,Z,H.key):L!==null&&(L.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===R&&Uy(ge)===L.type)?(L=d(L,H.props),Sl(L,H),L.return=z,L):(L=Wc(H.type,H.key,H.props,null,z.mode,Z),Sl(L,H),L.return=z,L)}function q(z,L,H,Z){return L===null||L.tag!==4||L.stateNode.containerInfo!==H.containerInfo||L.stateNode.implementation!==H.implementation?(L=Dd(H,z.mode,Z),L.return=z,L):(L=d(L,H.children||[]),L.return=z,L)}function X(z,L,H,Z,ge){return L===null||L.tag!==7?(L=Pr(H,z.mode,Z,ge),L.return=z,L):(L=d(L,H),L.return=z,L)}function ne(z,L,H){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=xd(""+L,z.mode,H),L.return=z,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case b:return H=Wc(L.type,L.key,L.props,null,z.mode,H),Sl(H,L),H.return=z,H;case O:return L=Dd(L,z.mode,H),L.return=z,L;case R:var Z=L._init;return L=Z(L._payload),ne(z,L,H)}if(ue(L)||x(L))return L=Pr(L,z.mode,H,null),L.return=z,L;if(typeof L.then=="function")return ne(z,gu(L),H);if(L.$$typeof===K)return ne(z,su(z,L),H);yu(z,L)}return null}function G(z,L,H,Z){var ge=L!==null?L.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return ge!==null?null:w(z,L,""+H,Z);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case b:return H.key===ge?j(z,L,H,Z):null;case O:return H.key===ge?q(z,L,H,Z):null;case R:return ge=H._init,H=ge(H._payload),G(z,L,H,Z)}if(ue(H)||x(H))return ge!==null?null:X(z,L,H,Z,null);if(typeof H.then=="function")return G(z,L,gu(H),Z);if(H.$$typeof===K)return G(z,L,su(z,H),Z);yu(z,H)}return null}function $(z,L,H,Z,ge){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return z=z.get(H)||null,w(L,z,""+Z,ge);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case b:return z=z.get(Z.key===null?H:Z.key)||null,j(L,z,Z,ge);case O:return z=z.get(Z.key===null?H:Z.key)||null,q(L,z,Z,ge);case R:var Pe=Z._init;return Z=Pe(Z._payload),$(z,L,H,Z,ge)}if(ue(Z)||x(Z))return z=z.get(H)||null,X(L,z,Z,ge,null);if(typeof Z.then=="function")return $(z,L,H,gu(Z),ge);if(Z.$$typeof===K)return $(z,L,H,su(L,Z),ge);yu(L,Z)}return null}function Re(z,L,H,Z){for(var ge=null,Pe=null,_e=L,be=L=0,zt=null;_e!==null&&be<H.length;be++){_e.index>be?(zt=_e,_e=null):zt=_e.sibling;var Qe=G(z,_e,H[be],Z);if(Qe===null){_e===null&&(_e=zt);break}n&&_e&&Qe.alternate===null&&i(z,_e),L=p(Qe,L,be),Pe===null?ge=Qe:Pe.sibling=Qe,Pe=Qe,_e=zt}if(be===H.length)return a(z,_e),Ye&&Lr(z,be),ge;if(_e===null){for(;be<H.length;be++)_e=ne(z,H[be],Z),_e!==null&&(L=p(_e,L,be),Pe===null?ge=_e:Pe.sibling=_e,Pe=_e);return Ye&&Lr(z,be),ge}for(_e=l(_e);be<H.length;be++)zt=$(_e,z,be,H[be],Z),zt!==null&&(n&&zt.alternate!==null&&_e.delete(zt.key===null?be:zt.key),L=p(zt,L,be),Pe===null?ge=zt:Pe.sibling=zt,Pe=zt);return n&&_e.forEach(function(Ki){return i(z,Ki)}),Ye&&Lr(z,be),ge}function Ae(z,L,H,Z){if(H==null)throw Error(r(151));for(var ge=null,Pe=null,_e=L,be=L=0,zt=null,Qe=H.next();_e!==null&&!Qe.done;be++,Qe=H.next()){_e.index>be?(zt=_e,_e=null):zt=_e.sibling;var Ki=G(z,_e,Qe.value,Z);if(Ki===null){_e===null&&(_e=zt);break}n&&_e&&Ki.alternate===null&&i(z,_e),L=p(Ki,L,be),Pe===null?ge=Ki:Pe.sibling=Ki,Pe=Ki,_e=zt}if(Qe.done)return a(z,_e),Ye&&Lr(z,be),ge;if(_e===null){for(;!Qe.done;be++,Qe=H.next())Qe=ne(z,Qe.value,Z),Qe!==null&&(L=p(Qe,L,be),Pe===null?ge=Qe:Pe.sibling=Qe,Pe=Qe);return Ye&&Lr(z,be),ge}for(_e=l(_e);!Qe.done;be++,Qe=H.next())Qe=$(_e,z,be,Qe.value,Z),Qe!==null&&(n&&Qe.alternate!==null&&_e.delete(Qe.key===null?be:Qe.key),L=p(Qe,L,be),Pe===null?ge=Qe:Pe.sibling=Qe,Pe=Qe);return n&&_e.forEach(function(Vw){return i(z,Vw)}),Ye&&Lr(z,be),ge}function st(z,L,H,Z){if(typeof H=="object"&&H!==null&&H.type===k&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case b:e:{for(var ge=H.key;L!==null;){if(L.key===ge){if(ge=H.type,ge===k){if(L.tag===7){a(z,L.sibling),Z=d(L,H.props.children),Z.return=z,z=Z;break e}}else if(L.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===R&&Uy(ge)===L.type){a(z,L.sibling),Z=d(L,H.props),Sl(Z,H),Z.return=z,z=Z;break e}a(z,L);break}else i(z,L);L=L.sibling}H.type===k?(Z=Pr(H.props.children,z.mode,Z,H.key),Z.return=z,z=Z):(Z=Wc(H.type,H.key,H.props,null,z.mode,Z),Sl(Z,H),Z.return=z,z=Z)}return A(z);case O:e:{for(ge=H.key;L!==null;){if(L.key===ge)if(L.tag===4&&L.stateNode.containerInfo===H.containerInfo&&L.stateNode.implementation===H.implementation){a(z,L.sibling),Z=d(L,H.children||[]),Z.return=z,z=Z;break e}else{a(z,L);break}else i(z,L);L=L.sibling}Z=Dd(H,z.mode,Z),Z.return=z,z=Z}return A(z);case R:return ge=H._init,H=ge(H._payload),st(z,L,H,Z)}if(ue(H))return Re(z,L,H,Z);if(x(H)){if(ge=x(H),typeof ge!="function")throw Error(r(150));return H=ge.call(H),Ae(z,L,H,Z)}if(typeof H.then=="function")return st(z,L,gu(H),Z);if(H.$$typeof===K)return st(z,L,su(z,H),Z);yu(z,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,L!==null&&L.tag===6?(a(z,L.sibling),Z=d(L,H),Z.return=z,z=Z):(a(z,L),Z=xd(H,z.mode,Z),Z.return=z,z=Z),A(z)):a(z,L)}return function(z,L,H,Z){try{bl=0;var ge=st(z,L,H,Z);return Ya=null,ge}catch(_e){if(_e===ml||_e===ru)throw _e;var Pe=Cn(29,_e,null,z.mode);return Pe.lanes=Z,Pe.return=z,Pe}finally{}}}var Ka=zy(!0),By=zy(!1),$n=te(null),As=null;function ji(n){var i=n.alternate;oe(Ot,Ot.current&1),oe($n,n),As===null&&(i===null||qa.current!==null||i.memoizedState!==null)&&(As=n)}function Fy(n){if(n.tag===22){if(oe(Ot,Ot.current),oe($n,n),As===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(As=n)}}else Vi()}function Vi(){oe(Ot,Ot.current),oe($n,$n.current)}function ii(n){he($n),As===n&&(As=null),he(Ot)}var Ot=te(0);function vu(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||em(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function hf(n,i,a,l){i=n.memoizedState,a=a(l,i),a=a==null?i:v({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var df={enqueueSetState:function(n,i,a){n=n._reactInternals;var l=On(),d=Di(l);d.payload=i,a!=null&&(d.callback=a),i=Oi(n,d,l),i!==null&&(Mn(i,n,l),gl(i,n,l))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var l=On(),d=Di(l);d.tag=1,d.payload=i,a!=null&&(d.callback=a),i=Oi(n,d,l),i!==null&&(Mn(i,n,l),gl(i,n,l))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=On(),l=Di(a);l.tag=2,i!=null&&(l.callback=i),i=Oi(n,l,a),i!==null&&(Mn(i,n,a),gl(i,n,a))}};function Hy(n,i,a,l,d,p,A){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,p,A):i.prototype&&i.prototype.isPureReactComponent?!al(a,l)||!al(d,p):!0}function qy(n,i,a,l){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==n&&df.enqueueReplaceState(i,i.state,null)}function Gr(n,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(n=n.defaultProps){a===i&&(a=v({},a));for(var d in n)a[d]===void 0&&(a[d]=n[d])}return a}var _u=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Gy(n){_u(n)}function $y(n){console.error(n)}function Qy(n){_u(n)}function Eu(n,i){try{var a=n.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Yy(n,i,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function ff(n,i,a){return a=Di(a),a.tag=3,a.payload={element:null},a.callback=function(){Eu(n,i)},a}function Ky(n){return n=Di(n),n.tag=3,n}function Xy(n,i,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var p=l.value;n.payload=function(){return d(p)},n.callback=function(){Yy(i,a,l)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(n.callback=function(){Yy(i,a,l),typeof d!="function"&&(Bi===null?Bi=new Set([this]):Bi.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function VS(n,i,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&hl(i,a,d,!0),a=$n.current,a!==null){switch(a.tag){case 13:return As===null?kf():a.alternate===null&&dt===0&&(dt=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===Bd?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Uf(n,l,d)),!1;case 22:return a.flags|=65536,l===Bd?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Uf(n,l,d)),!1}throw Error(r(435,a.tag))}return Uf(n,l,d),kf(),!1}if(Ye)return i=$n.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=d,l!==jd&&(n=Error(r(422),{cause:l}),ul(Fn(n,a)))):(l!==jd&&(i=Error(r(423),{cause:l}),ul(Fn(i,a))),n=n.current.alternate,n.flags|=65536,d&=-d,n.lanes|=d,l=Fn(l,a),d=ff(n.stateNode,l,d),qd(n,d),dt!==4&&(dt=2)),!1;var p=Error(r(520),{cause:l});if(p=Fn(p,a),Dl===null?Dl=[p]:Dl.push(p),dt!==4&&(dt=2),i===null)return!0;l=Fn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,n=d&-d,a.lanes|=n,n=ff(a.stateNode,l,n),qd(a,n),!1;case 1:if(i=a.type,p=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Bi===null||!Bi.has(p))))return a.flags|=65536,d&=-d,a.lanes|=d,d=Ky(d),Xy(d,n,a,l),qd(a,d),!1}a=a.return}while(a!==null);return!1}var Zy=Error(r(461)),Lt=!1;function Qt(n,i,a,l){i.child=n===null?By(i,null,a,l):Ka(i,n.child,a,l)}function Jy(n,i,a,l,d){a=a.render;var p=i.ref;if("ref"in l){var A={};for(var w in l)w!=="ref"&&(A[w]=l[w])}else A=l;return Fr(i),l=Kd(n,i,a,A,p,d),w=Xd(),n!==null&&!Lt?(Zd(n,i,d),ri(n,i,d)):(Ye&&w&&Od(i),i.flags|=1,Qt(n,i,l,d),i.child)}function Wy(n,i,a,l,d){if(n===null){var p=a.type;return typeof p=="function"&&!Nd(p)&&p.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=p,ev(n,i,p,l,d)):(n=Wc(a.type,null,l,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(p=n.child,!Tf(n,d)){var A=p.memoizedProps;if(a=a.compare,a=a!==null?a:al,a(A,l)&&n.ref===i.ref)return ri(n,i,d)}return i.flags|=1,n=Js(p,l),n.ref=i.ref,n.return=i,i.child=n}function ev(n,i,a,l,d){if(n!==null){var p=n.memoizedProps;if(al(p,l)&&n.ref===i.ref)if(Lt=!1,i.pendingProps=l=p,Tf(n,d))(n.flags&131072)!==0&&(Lt=!0);else return i.lanes=n.lanes,ri(n,i,d)}return mf(n,i,a,l,d)}function tv(n,i,a){var l=i.pendingProps,d=l.children,p=n!==null?n.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=p!==null?p.baseLanes|a:a,n!==null){for(d=i.child=n.child,p=0;d!==null;)p=p|d.lanes|d.childLanes,d=d.sibling;i.childLanes=p&~l}else i.childLanes=0,i.child=null;return nv(n,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&iu(i,p!==null?p.cachePool:null),p!==null?ey(i,p):$d(),Fy(i);else return i.lanes=i.childLanes=536870912,nv(n,i,p!==null?p.baseLanes|a:a,a)}else p!==null?(iu(i,p.cachePool),ey(i,p),Vi(),i.memoizedState=null):(n!==null&&iu(i,null),$d(),Vi());return Qt(n,i,d,a),i.child}function nv(n,i,a,l){var d=zd();return d=d===null?null:{parent:Dt._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},n!==null&&iu(i,null),$d(),Fy(i),n!==null&&hl(n,i,l,!0),null}function Tu(n,i){var a=i.ref;if(a===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(i.flags|=4194816)}}function mf(n,i,a,l,d){return Fr(i),a=Kd(n,i,a,l,void 0,d),l=Xd(),n!==null&&!Lt?(Zd(n,i,d),ri(n,i,d)):(Ye&&l&&Od(i),i.flags|=1,Qt(n,i,a,d),i.child)}function sv(n,i,a,l,d,p){return Fr(i),i.updateQueue=null,a=ny(i,l,a,d),ty(n),l=Xd(),n!==null&&!Lt?(Zd(n,i,p),ri(n,i,p)):(Ye&&l&&Od(i),i.flags|=1,Qt(n,i,a,p),i.child)}function iv(n,i,a,l,d){if(Fr(i),i.stateNode===null){var p=Ua,A=a.contextType;typeof A=="object"&&A!==null&&(p=tn(A)),p=new a(l,p),i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=df,i.stateNode=p,p._reactInternals=i,p=i.stateNode,p.props=l,p.state=i.memoizedState,p.refs={},Fd(i),A=a.contextType,p.context=typeof A=="object"&&A!==null?tn(A):Ua,p.state=i.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(hf(i,a,A,l),p.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(A=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),A!==p.state&&df.enqueueReplaceState(p,p.state,null),vl(i,l,p,d),yl(),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(n===null){p=i.stateNode;var w=i.memoizedProps,j=Gr(a,w);p.props=j;var q=p.context,X=a.contextType;A=Ua,typeof X=="object"&&X!==null&&(A=tn(X));var ne=a.getDerivedStateFromProps;X=typeof ne=="function"||typeof p.getSnapshotBeforeUpdate=="function",w=i.pendingProps!==w,X||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w||q!==A)&&qy(i,p,l,A),xi=!1;var G=i.memoizedState;p.state=G,vl(i,l,p,d),yl(),q=i.memoizedState,w||G!==q||xi?(typeof ne=="function"&&(hf(i,a,ne,l),q=i.memoizedState),(j=xi||Hy(i,a,j,l,G,q,A))?(X||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(i.flags|=4194308)):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=q),p.props=l,p.state=q,p.context=A,l=j):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{p=i.stateNode,Hd(n,i),A=i.memoizedProps,X=Gr(a,A),p.props=X,ne=i.pendingProps,G=p.context,q=a.contextType,j=Ua,typeof q=="object"&&q!==null&&(j=tn(q)),w=a.getDerivedStateFromProps,(q=typeof w=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(A!==ne||G!==j)&&qy(i,p,l,j),xi=!1,G=i.memoizedState,p.state=G,vl(i,l,p,d),yl();var $=i.memoizedState;A!==ne||G!==$||xi||n!==null&&n.dependencies!==null&&nu(n.dependencies)?(typeof w=="function"&&(hf(i,a,w,l),$=i.memoizedState),(X=xi||Hy(i,a,X,l,G,$,j)||n!==null&&n.dependencies!==null&&nu(n.dependencies))?(q||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(l,$,j),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(l,$,j)),typeof p.componentDidUpdate=="function"&&(i.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof p.componentDidUpdate!="function"||A===n.memoizedProps&&G===n.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&G===n.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=$),p.props=l,p.state=$,p.context=j,l=X):(typeof p.componentDidUpdate!="function"||A===n.memoizedProps&&G===n.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&G===n.memoizedState||(i.flags|=1024),l=!1)}return p=l,Tu(n,i),l=(i.flags&128)!==0,p||l?(p=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:p.render(),i.flags|=1,n!==null&&l?(i.child=Ka(i,n.child,null,d),i.child=Ka(i,null,a,d)):Qt(n,i,a,d),i.memoizedState=p.state,n=i.child):n=ri(n,i,d),n}function rv(n,i,a,l){return cl(),i.flags|=256,Qt(n,i,a,l),i.child}var pf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gf(n){return{baseLanes:n,cachePool:$g()}}function yf(n,i,a){return n=n!==null?n.childLanes&~a:0,i&&(n|=Qn),n}function av(n,i,a){var l=i.pendingProps,d=!1,p=(i.flags&128)!==0,A;if((A=p)||(A=n!==null&&n.memoizedState===null?!1:(Ot.current&2)!==0),A&&(d=!0,i.flags&=-129),A=(i.flags&32)!==0,i.flags&=-33,n===null){if(Ye){if(d?ji(i):Vi(),Ye){var w=ht,j;if(j=w){e:{for(j=w,w=Ts;j.nodeType!==8;){if(!w){w=null;break e}if(j=ts(j.nextSibling),j===null){w=null;break e}}w=j}w!==null?(i.memoizedState={dehydrated:w,treeContext:kr!==null?{id:Ws,overflow:ei}:null,retryLane:536870912,hydrationErrors:null},j=Cn(18,null,null,0),j.stateNode=w,j.return=i,i.child=j,fn=i,ht=null,j=!0):j=!1}j||zr(i)}if(w=i.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return em(w)?i.lanes=32:i.lanes=536870912,null;ii(i)}return w=l.children,l=l.fallback,d?(Vi(),d=i.mode,w=Au({mode:"hidden",children:w},d),l=Pr(l,d,a,null),w.return=i,l.return=i,w.sibling=l,i.child=w,d=i.child,d.memoizedState=gf(a),d.childLanes=yf(n,A,a),i.memoizedState=pf,l):(ji(i),vf(i,w))}if(j=n.memoizedState,j!==null&&(w=j.dehydrated,w!==null)){if(p)i.flags&256?(ji(i),i.flags&=-257,i=_f(n,i,a)):i.memoizedState!==null?(Vi(),i.child=n.child,i.flags|=128,i=null):(Vi(),d=l.fallback,w=i.mode,l=Au({mode:"visible",children:l.children},w),d=Pr(d,w,a,null),d.flags|=2,l.return=i,d.return=i,l.sibling=d,i.child=l,Ka(i,n.child,null,a),l=i.child,l.memoizedState=gf(a),l.childLanes=yf(n,A,a),i.memoizedState=pf,i=d);else if(ji(i),em(w)){if(A=w.nextSibling&&w.nextSibling.dataset,A)var q=A.dgst;A=q,l=Error(r(419)),l.stack="",l.digest=A,ul({value:l,source:null,stack:null}),i=_f(n,i,a)}else if(Lt||hl(n,i,a,!1),A=(a&n.childLanes)!==0,Lt||A){if(A=rt,A!==null&&(l=a&-a,l=(l&42)!==0?1:Ai(l),l=(l&(A.suspendedLanes|a))!==0?0:l,l!==0&&l!==j.retryLane))throw j.retryLane=l,La(n,l),Mn(A,n,l),Zy;w.data==="$?"||kf(),i=_f(n,i,a)}else w.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=j.treeContext,ht=ts(w.nextSibling),fn=i,Ye=!0,Ur=null,Ts=!1,n!==null&&(qn[Gn++]=Ws,qn[Gn++]=ei,qn[Gn++]=kr,Ws=n.id,ei=n.overflow,kr=i),i=vf(i,l.children),i.flags|=4096);return i}return d?(Vi(),d=l.fallback,w=i.mode,j=n.child,q=j.sibling,l=Js(j,{mode:"hidden",children:l.children}),l.subtreeFlags=j.subtreeFlags&65011712,q!==null?d=Js(q,d):(d=Pr(d,w,a,null),d.flags|=2),d.return=i,l.return=i,l.sibling=d,i.child=l,l=d,d=i.child,w=n.child.memoizedState,w===null?w=gf(a):(j=w.cachePool,j!==null?(q=Dt._currentValue,j=j.parent!==q?{parent:q,pool:q}:j):j=$g(),w={baseLanes:w.baseLanes|a,cachePool:j}),d.memoizedState=w,d.childLanes=yf(n,A,a),i.memoizedState=pf,l):(ji(i),a=n.child,n=a.sibling,a=Js(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,n!==null&&(A=i.deletions,A===null?(i.deletions=[n],i.flags|=16):A.push(n)),i.child=a,i.memoizedState=null,a)}function vf(n,i){return i=Au({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Au(n,i){return n=Cn(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function _f(n,i,a){return Ka(i,n.child,null,a),n=vf(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function ov(n,i,a){n.lanes|=i;var l=n.alternate;l!==null&&(l.lanes|=i),Pd(n.return,i,a)}function Ef(n,i,a,l,d){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=l,p.tail=a,p.tailMode=d)}function lv(n,i,a){var l=i.pendingProps,d=l.revealOrder,p=l.tail;if(Qt(n,i,l.children,a),l=Ot.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ov(n,a,i);else if(n.tag===19)ov(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}l&=1}switch(oe(Ot,l),d){case"forwards":for(a=i.child,d=null;a!==null;)n=a.alternate,n!==null&&vu(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),Ef(i,!1,d,a,p);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&vu(n)===null){i.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Ef(i,!0,a,null,p);break;case"together":Ef(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ri(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),zi|=i.lanes,(a&i.childLanes)===0)if(n!==null){if(hl(n,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,a=Js(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=Js(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function Tf(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&nu(n)))}function PS(n,i,a){switch(i.tag){case 3:We(i,i.stateNode.containerInfo),Ni(i,Dt,n.memoizedState.cache),cl();break;case 27:case 5:cs(i);break;case 4:We(i,i.stateNode.containerInfo);break;case 10:Ni(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(ji(i),i.flags|=128,null):(a&i.child.childLanes)!==0?av(n,i,a):(ji(i),n=ri(n,i,a),n!==null?n.sibling:null);ji(i);break;case 19:var d=(n.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(hl(n,i,a,!1),l=(a&i.childLanes)!==0),d){if(l)return lv(n,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),oe(Ot,Ot.current),l)break;return null;case 22:case 23:return i.lanes=0,tv(n,i,a);case 24:Ni(i,Dt,n.memoizedState.cache)}return ri(n,i,a)}function cv(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps)Lt=!0;else{if(!Tf(n,a)&&(i.flags&128)===0)return Lt=!1,PS(n,i,a);Lt=(n.flags&131072)!==0}else Lt=!1,Ye&&(i.flags&1048576)!==0&&Ug(i,tu,i.index);switch(i.lanes=0,i.tag){case 16:e:{n=i.pendingProps;var l=i.elementType,d=l._init;if(l=d(l._payload),i.type=l,typeof l=="function")Nd(l)?(n=Gr(l,n),i.tag=1,i=iv(null,i,l,n,a)):(i.tag=0,i=mf(null,i,l,n,a));else{if(l!=null){if(d=l.$$typeof,d===ae){i.tag=11,i=Jy(null,i,l,n,a);break e}else if(d===D){i.tag=14,i=Wy(null,i,l,n,a);break e}}throw i=W(l)||l,Error(r(306,i,""))}}return i;case 0:return mf(n,i,i.type,i.pendingProps,a);case 1:return l=i.type,d=Gr(l,i.pendingProps),iv(n,i,l,d,a);case 3:e:{if(We(i,i.stateNode.containerInfo),n===null)throw Error(r(387));l=i.pendingProps;var p=i.memoizedState;d=p.element,Hd(n,i),vl(i,l,null,a);var A=i.memoizedState;if(l=A.cache,Ni(i,Dt,l),l!==p.cache&&kd(i,[Dt],a,!0),yl(),l=A.element,p.isDehydrated)if(p={element:l,isDehydrated:!1,cache:A.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=rv(n,i,l,a);break e}else if(l!==d){d=Fn(Error(r(424)),i),ul(d),i=rv(n,i,l,a);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(ht=ts(n.firstChild),fn=i,Ye=!0,Ur=null,Ts=!0,a=By(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(cl(),l===d){i=ri(n,i,a);break e}Qt(n,i,l,a)}i=i.child}return i;case 26:return Tu(n,i),n===null?(a=f_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ye||(a=i.type,n=i.pendingProps,l=Pu(we.current).createElement(a),l[Ct]=i,l[Et]=n,Kt(l,a,n),mt(l),i.stateNode=l):i.memoizedState=f_(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return cs(i),n===null&&Ye&&(l=i.stateNode=u_(i.type,i.pendingProps,we.current),fn=i,Ts=!0,d=ht,qi(i.type)?(tm=d,ht=ts(l.firstChild)):ht=d),Qt(n,i,i.pendingProps.children,a),Tu(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Ye&&((d=l=ht)&&(l=uw(l,i.type,i.pendingProps,Ts),l!==null?(i.stateNode=l,fn=i,ht=ts(l.firstChild),Ts=!1,d=!0):d=!1),d||zr(i)),cs(i),d=i.type,p=i.pendingProps,A=n!==null?n.memoizedProps:null,l=p.children,Zf(d,p)?l=null:A!==null&&Zf(d,A)&&(i.flags|=32),i.memoizedState!==null&&(d=Kd(n,i,CS,null,null,a),zl._currentValue=d),Tu(n,i),Qt(n,i,l,a),i.child;case 6:return n===null&&Ye&&((n=a=ht)&&(a=hw(a,i.pendingProps,Ts),a!==null?(i.stateNode=a,fn=i,ht=null,n=!0):n=!1),n||zr(i)),null;case 13:return av(n,i,a);case 4:return We(i,i.stateNode.containerInfo),l=i.pendingProps,n===null?i.child=Ka(i,null,l,a):Qt(n,i,l,a),i.child;case 11:return Jy(n,i,i.type,i.pendingProps,a);case 7:return Qt(n,i,i.pendingProps,a),i.child;case 8:return Qt(n,i,i.pendingProps.children,a),i.child;case 12:return Qt(n,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Ni(i,i.type,l.value),Qt(n,i,l.children,a),i.child;case 9:return d=i.type._context,l=i.pendingProps.children,Fr(i),d=tn(d),l=l(d),i.flags|=1,Qt(n,i,l,a),i.child;case 14:return Wy(n,i,i.type,i.pendingProps,a);case 15:return ev(n,i,i.type,i.pendingProps,a);case 19:return lv(n,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},n===null?(a=Au(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Js(n.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return tv(n,i,a);case 24:return Fr(i),l=tn(Dt),n===null?(d=zd(),d===null&&(d=rt,p=Ld(),d.pooledCache=p,p.refCount++,p!==null&&(d.pooledCacheLanes|=a),d=p),i.memoizedState={parent:l,cache:d},Fd(i),Ni(i,Dt,d)):((n.lanes&a)!==0&&(Hd(n,i),vl(i,null,null,a),yl()),d=n.memoizedState,p=i.memoizedState,d.parent!==l?(d={parent:l,cache:l},i.memoizedState=d,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=d),Ni(i,Dt,l)):(l=p.cache,Ni(i,Dt,l),l!==d.cache&&kd(i,[Dt],a,!0))),Qt(n,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function ai(n){n.flags|=4}function uv(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!v_(i)){if(i=$n.current,i!==null&&((Ge&4194048)===Ge?As!==null:(Ge&62914560)!==Ge&&(Ge&536870912)===0||i!==As))throw pl=Bd,Qg;n.flags|=8192}}function bu(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Fo():536870912,n.lanes|=i,Wa|=i)}function wl(n,i){if(!Ye)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function ct(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(i)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=l,n.childLanes=a,i}function kS(n,i,a){var l=i.pendingProps;switch(Md(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(i),null;case 1:return ct(i),null;case 3:return a=i.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),ni(Dt),Pn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(ll(i)?ai(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Fg())),ct(i),null;case 26:return a=i.memoizedState,n===null?(ai(i),a!==null?(ct(i),uv(i,a)):(ct(i),i.flags&=-16777217)):a?a!==n.memoizedState?(ai(i),ct(i),uv(i,a)):(ct(i),i.flags&=-16777217):(n.memoizedProps!==l&&ai(i),ct(i),i.flags&=-16777217),null;case 27:wn(i),a=we.current;var d=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==l&&ai(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return ct(i),null}n=ve.current,ll(i)?zg(i):(n=u_(d,l,a),i.stateNode=n,ai(i))}return ct(i),null;case 5:if(wn(i),a=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&ai(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return ct(i),null}if(n=ve.current,ll(i))zg(i);else{switch(d=Pu(we.current),n){case 1:n=d.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:n=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":n=d.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":n=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":n=d.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof l.is=="string"?d.createElement("select",{is:l.is}):d.createElement("select"),l.multiple?n.multiple=!0:l.size&&(n.size=l.size);break;default:n=typeof l.is=="string"?d.createElement(a,{is:l.is}):d.createElement(a)}}n[Ct]=i,n[Et]=l;e:for(d=i.child;d!==null;){if(d.tag===5||d.tag===6)n.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===i)break e;for(;d.sibling===null;){if(d.return===null||d.return===i)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}i.stateNode=n;e:switch(Kt(n,a,l),a){case"button":case"input":case"select":case"textarea":n=!!l.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&ai(i)}}return ct(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==l&&ai(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(n=we.current,ll(i)){if(n=i.stateNode,a=i.memoizedProps,l=null,d=fn,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}n[Ct]=i,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||s_(n.nodeValue,a)),n||zr(i)}else n=Pu(n).createTextNode(l),n[Ct]=i,i.stateNode=n}return ct(i),null;case 13:if(l=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(d=ll(i),l!==null&&l.dehydrated!==null){if(n===null){if(!d)throw Error(r(318));if(d=i.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[Ct]=i}else cl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ct(i),d=!1}else d=Fg(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),d=!0;if(!d)return i.flags&256?(ii(i),i):(ii(i),null)}if(ii(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,n=n!==null&&n.memoizedState!==null,a){l=i.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool);var p=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==d&&(l.flags|=2048)}return a!==n&&a&&(i.child.flags|=8192),bu(i,i.updateQueue),ct(i),null;case 4:return Pn(),n===null&&$f(i.stateNode.containerInfo),ct(i),null;case 10:return ni(i.type),ct(i),null;case 19:if(he(Ot),d=i.memoizedState,d===null)return ct(i),null;if(l=(i.flags&128)!==0,p=d.rendering,p===null)if(l)wl(d,!1);else{if(dt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(p=vu(n),p!==null){for(i.flags|=128,wl(d,!1),n=p.updateQueue,i.updateQueue=n,bu(i,n),i.subtreeFlags=0,n=a,a=i.child;a!==null;)Lg(a,n),a=a.sibling;return oe(Ot,Ot.current&1|2),i.child}n=n.sibling}d.tail!==null&&mn()>Ru&&(i.flags|=128,l=!0,wl(d,!1),i.lanes=4194304)}else{if(!l)if(n=vu(p),n!==null){if(i.flags|=128,l=!0,n=n.updateQueue,i.updateQueue=n,bu(i,n),wl(d,!0),d.tail===null&&d.tailMode==="hidden"&&!p.alternate&&!Ye)return ct(i),null}else 2*mn()-d.renderingStartTime>Ru&&a!==536870912&&(i.flags|=128,l=!0,wl(d,!1),i.lanes=4194304);d.isBackwards?(p.sibling=i.child,i.child=p):(n=d.last,n!==null?n.sibling=p:i.child=p,d.last=p)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=mn(),i.sibling=null,n=Ot.current,oe(Ot,l?n&1|2:n&1),i):(ct(i),null);case 22:case 23:return ii(i),Qd(),l=i.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(ct(i),i.subtreeFlags&6&&(i.flags|=8192)):ct(i),a=i.updateQueue,a!==null&&bu(i,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),n!==null&&he(Hr),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ni(Dt),ct(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function LS(n,i){switch(Md(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return ni(Dt),Pn(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return wn(i),null;case 13:if(ii(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));cl()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return he(Ot),null;case 4:return Pn(),null;case 10:return ni(i.type),null;case 22:case 23:return ii(i),Qd(),n!==null&&he(Hr),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return ni(Dt),null;case 25:return null;default:return null}}function hv(n,i){switch(Md(i),i.tag){case 3:ni(Dt),Pn();break;case 26:case 27:case 5:wn(i);break;case 4:Pn();break;case 13:ii(i);break;case 19:he(Ot);break;case 10:ni(i.type);break;case 22:case 23:ii(i),Qd(),n!==null&&he(Hr);break;case 24:ni(Dt)}}function Rl(n,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&n)===n){l=void 0;var p=a.create,A=a.inst;l=p(),A.destroy=l}a=a.next}while(a!==d)}}catch(w){it(i,i.return,w)}}function Pi(n,i,a){try{var l=i.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var p=d.next;l=p;do{if((l.tag&n)===n){var A=l.inst,w=A.destroy;if(w!==void 0){A.destroy=void 0,d=i;var j=a,q=w;try{q()}catch(X){it(d,j,X)}}}l=l.next}while(l!==p)}}catch(X){it(i,i.return,X)}}function dv(n){var i=n.updateQueue;if(i!==null){var a=n.stateNode;try{Wg(i,a)}catch(l){it(n,n.return,l)}}}function fv(n,i,a){a.props=Gr(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){it(n,i,l)}}function Il(n,i){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(d){it(n,i,d)}}function bs(n,i){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){it(n,i,d)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){it(n,i,d)}else a.current=null}function mv(n){var i=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){it(n,n.return,d)}}function Af(n,i,a){try{var l=n.stateNode;rw(l,n.type,a,i),l[Et]=i}catch(d){it(n,n.return,d)}}function pv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&qi(n.type)||n.tag===4}function bf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||pv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&qi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Sf(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(n),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Vu));else if(l!==4&&(l===27&&qi(n.type)&&(a=n.stateNode,i=null),n=n.child,n!==null))for(Sf(n,i,a),n=n.sibling;n!==null;)Sf(n,i,a),n=n.sibling}function Su(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(l!==4&&(l===27&&qi(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(Su(n,i,a),n=n.sibling;n!==null;)Su(n,i,a),n=n.sibling}function gv(n){var i=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,d=i.attributes;d.length;)i.removeAttributeNode(d[0]);Kt(i,l,a),i[Ct]=n,i[Et]=a}catch(p){it(n,n.return,p)}}var oi=!1,gt=!1,wf=!1,yv=typeof WeakSet=="function"?WeakSet:Set,Ut=null;function US(n,i){if(n=n.containerInfo,Kf=Fu,n=Cg(n),Ad(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,p=l.focusNode;l=l.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var A=0,w=-1,j=-1,q=0,X=0,ne=n,G=null;t:for(;;){for(var $;ne!==a||d!==0&&ne.nodeType!==3||(w=A+d),ne!==p||l!==0&&ne.nodeType!==3||(j=A+l),ne.nodeType===3&&(A+=ne.nodeValue.length),($=ne.firstChild)!==null;)G=ne,ne=$;for(;;){if(ne===n)break t;if(G===a&&++q===d&&(w=A),G===p&&++X===l&&(j=A),($=ne.nextSibling)!==null)break;ne=G,G=ne.parentNode}ne=$}a=w===-1||j===-1?null:{start:w,end:j}}else a=null}a=a||{start:0,end:0}}else a=null;for(Xf={focusedElem:n,selectionRange:a},Fu=!1,Ut=i;Ut!==null;)if(i=Ut,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,Ut=n;else for(;Ut!==null;){switch(i=Ut,p=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,a=i,d=p.memoizedProps,p=p.memoizedState,l=a.stateNode;try{var Re=Gr(a.type,d,a.elementType===a.type);n=l.getSnapshotBeforeUpdate(Re,p),l.__reactInternalSnapshotBeforeUpdate=n}catch(Ae){it(a,a.return,Ae)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,a=n.nodeType,a===9)Wf(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Wf(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,Ut=n;break}Ut=i.return}}function vv(n,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:ki(n,a),l&4&&Rl(5,a);break;case 1:if(ki(n,a),l&4)if(n=a.stateNode,i===null)try{n.componentDidMount()}catch(A){it(a,a.return,A)}else{var d=Gr(a.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(d,i,n.__reactInternalSnapshotBeforeUpdate)}catch(A){it(a,a.return,A)}}l&64&&dv(a),l&512&&Il(a,a.return);break;case 3:if(ki(n,a),l&64&&(n=a.updateQueue,n!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Wg(n,i)}catch(A){it(a,a.return,A)}}break;case 27:i===null&&l&4&&gv(a);case 26:case 5:ki(n,a),i===null&&l&4&&mv(a),l&512&&Il(a,a.return);break;case 12:ki(n,a);break;case 13:ki(n,a),l&4&&Tv(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=YS.bind(null,a),dw(n,a))));break;case 22:if(l=a.memoizedState!==null||oi,!l){i=i!==null&&i.memoizedState!==null||gt,d=oi;var p=gt;oi=l,(gt=i)&&!p?Li(n,a,(a.subtreeFlags&8772)!==0):ki(n,a),oi=d,gt=p}break;case 30:break;default:ki(n,a)}}function _v(n){var i=n.alternate;i!==null&&(n.alternate=null,_v(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&wi(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var lt=null,yn=!1;function li(n,i,a){for(a=a.child;a!==null;)Ev(n,i,a),a=a.sibling}function Ev(n,i,a){if(Ne&&typeof Ne.onCommitFiberUnmount=="function")try{Ne.onCommitFiberUnmount(Fe,a)}catch{}switch(a.tag){case 26:gt||bs(a,i),li(n,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:gt||bs(a,i);var l=lt,d=yn;qi(a.type)&&(lt=a.stateNode,yn=!1),li(n,i,a),Pl(a.stateNode),lt=l,yn=d;break;case 5:gt||bs(a,i);case 6:if(l=lt,d=yn,lt=null,li(n,i,a),lt=l,yn=d,lt!==null)if(yn)try{(lt.nodeType===9?lt.body:lt.nodeName==="HTML"?lt.ownerDocument.body:lt).removeChild(a.stateNode)}catch(p){it(a,i,p)}else try{lt.removeChild(a.stateNode)}catch(p){it(a,i,p)}break;case 18:lt!==null&&(yn?(n=lt,l_(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),ql(n)):l_(lt,a.stateNode));break;case 4:l=lt,d=yn,lt=a.stateNode.containerInfo,yn=!0,li(n,i,a),lt=l,yn=d;break;case 0:case 11:case 14:case 15:gt||Pi(2,a,i),gt||Pi(4,a,i),li(n,i,a);break;case 1:gt||(bs(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&fv(a,i,l)),li(n,i,a);break;case 21:li(n,i,a);break;case 22:gt=(l=gt)||a.memoizedState!==null,li(n,i,a),gt=l;break;default:li(n,i,a)}}function Tv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{ql(n)}catch(a){it(i,i.return,a)}}function zS(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new yv),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new yv),i;default:throw Error(r(435,n.tag))}}function Rf(n,i){var a=zS(n);i.forEach(function(l){var d=KS.bind(null,n,l);a.has(l)||(a.add(l),l.then(d,d))})}function Nn(n,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],p=n,A=i,w=A;e:for(;w!==null;){switch(w.tag){case 27:if(qi(w.type)){lt=w.stateNode,yn=!1;break e}break;case 5:lt=w.stateNode,yn=!1;break e;case 3:case 4:lt=w.stateNode.containerInfo,yn=!0;break e}w=w.return}if(lt===null)throw Error(r(160));Ev(p,A,d),lt=null,yn=!1,p=d.alternate,p!==null&&(p.return=null),d.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Av(i,n),i=i.sibling}var es=null;function Av(n,i){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Nn(i,n),xn(n),l&4&&(Pi(3,n,n.return),Rl(3,n),Pi(5,n,n.return));break;case 1:Nn(i,n),xn(n),l&512&&(gt||a===null||bs(a,a.return)),l&64&&oi&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=es;if(Nn(i,n),xn(n),l&512&&(gt||a===null||bs(a,a.return)),l&4){var p=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":p=d.getElementsByTagName("title")[0],(!p||p[Er]||p[Ct]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=d.createElement(l),d.head.insertBefore(p,d.querySelector("head > title"))),Kt(p,l,a),p[Ct]=n,mt(p),l=p;break e;case"link":var A=g_("link","href",d).get(l+(a.href||""));if(A){for(var w=0;w<A.length;w++)if(p=A[w],p.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&p.getAttribute("rel")===(a.rel==null?null:a.rel)&&p.getAttribute("title")===(a.title==null?null:a.title)&&p.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(w,1);break t}}p=d.createElement(l),Kt(p,l,a),d.head.appendChild(p);break;case"meta":if(A=g_("meta","content",d).get(l+(a.content||""))){for(w=0;w<A.length;w++)if(p=A[w],p.getAttribute("content")===(a.content==null?null:""+a.content)&&p.getAttribute("name")===(a.name==null?null:a.name)&&p.getAttribute("property")===(a.property==null?null:a.property)&&p.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&p.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(w,1);break t}}p=d.createElement(l),Kt(p,l,a),d.head.appendChild(p);break;default:throw Error(r(468,l))}p[Ct]=n,mt(p),l=p}n.stateNode=l}else y_(d,n.type,n.stateNode);else n.stateNode=p_(d,l,n.memoizedProps);else p!==l?(p===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):p.count--,l===null?y_(d,n.type,n.stateNode):p_(d,l,n.memoizedProps)):l===null&&n.stateNode!==null&&Af(n,n.memoizedProps,a.memoizedProps)}break;case 27:Nn(i,n),xn(n),l&512&&(gt||a===null||bs(a,a.return)),a!==null&&l&4&&Af(n,n.memoizedProps,a.memoizedProps);break;case 5:if(Nn(i,n),xn(n),l&512&&(gt||a===null||bs(a,a.return)),n.flags&32){d=n.stateNode;try{Ln(d,"")}catch($){it(n,n.return,$)}}l&4&&n.stateNode!=null&&(d=n.memoizedProps,Af(n,d,a!==null?a.memoizedProps:d)),l&1024&&(wf=!0);break;case 6:if(Nn(i,n),xn(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch($){it(n,n.return,$)}}break;case 3:if(Uu=null,d=es,es=ku(i.containerInfo),Nn(i,n),es=d,xn(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{ql(i.containerInfo)}catch($){it(n,n.return,$)}wf&&(wf=!1,bv(n));break;case 4:l=es,es=ku(n.stateNode.containerInfo),Nn(i,n),xn(n),es=l;break;case 12:Nn(i,n),xn(n);break;case 13:Nn(i,n),xn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Of=mn()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Rf(n,l)));break;case 22:d=n.memoizedState!==null;var j=a!==null&&a.memoizedState!==null,q=oi,X=gt;if(oi=q||d,gt=X||j,Nn(i,n),gt=X,oi=q,xn(n),l&8192)e:for(i=n.stateNode,i._visibility=d?i._visibility&-2:i._visibility|1,d&&(a===null||j||oi||gt||$r(n)),a=null,i=n;;){if(i.tag===5||i.tag===26){if(a===null){j=a=i;try{if(p=j.stateNode,d)A=p.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{w=j.stateNode;var ne=j.memoizedProps.style,G=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;w.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch($){it(j,j.return,$)}}}else if(i.tag===6){if(a===null){j=i;try{j.stateNode.nodeValue=d?"":j.memoizedProps}catch($){it(j,j.return,$)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Rf(n,a))));break;case 19:Nn(i,n),xn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Rf(n,l)));break;case 30:break;case 21:break;default:Nn(i,n),xn(n)}}function xn(n){var i=n.flags;if(i&2){try{for(var a,l=n.return;l!==null;){if(pv(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var d=a.stateNode,p=bf(n);Su(n,p,d);break;case 5:var A=a.stateNode;a.flags&32&&(Ln(A,""),a.flags&=-33);var w=bf(n);Su(n,w,A);break;case 3:case 4:var j=a.stateNode.containerInfo,q=bf(n);Sf(n,q,j);break;default:throw Error(r(161))}}catch(X){it(n,n.return,X)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function bv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;bv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function ki(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)vv(n,i.alternate,i),i=i.sibling}function $r(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Pi(4,i,i.return),$r(i);break;case 1:bs(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&fv(i,i.return,a),$r(i);break;case 27:Pl(i.stateNode);case 26:case 5:bs(i,i.return),$r(i);break;case 22:i.memoizedState===null&&$r(i);break;case 30:$r(i);break;default:$r(i)}n=n.sibling}}function Li(n,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,d=n,p=i,A=p.flags;switch(p.tag){case 0:case 11:case 15:Li(d,p,a),Rl(4,p);break;case 1:if(Li(d,p,a),l=p,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(q){it(l,l.return,q)}if(l=p,d=l.updateQueue,d!==null){var w=l.stateNode;try{var j=d.shared.hiddenCallbacks;if(j!==null)for(d.shared.hiddenCallbacks=null,d=0;d<j.length;d++)Jg(j[d],w)}catch(q){it(l,l.return,q)}}a&&A&64&&dv(p),Il(p,p.return);break;case 27:gv(p);case 26:case 5:Li(d,p,a),a&&l===null&&A&4&&mv(p),Il(p,p.return);break;case 12:Li(d,p,a);break;case 13:Li(d,p,a),a&&A&4&&Tv(d,p);break;case 22:p.memoizedState===null&&Li(d,p,a),Il(p,p.return);break;case 30:break;default:Li(d,p,a)}i=i.sibling}}function If(n,i){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&dl(a))}function Cf(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&dl(n))}function Ss(n,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Sv(n,i,a,l),i=i.sibling}function Sv(n,i,a,l){var d=i.flags;switch(i.tag){case 0:case 11:case 15:Ss(n,i,a,l),d&2048&&Rl(9,i);break;case 1:Ss(n,i,a,l);break;case 3:Ss(n,i,a,l),d&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&dl(n)));break;case 12:if(d&2048){Ss(n,i,a,l),n=i.stateNode;try{var p=i.memoizedProps,A=p.id,w=p.onPostCommit;typeof w=="function"&&w(A,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(j){it(i,i.return,j)}}else Ss(n,i,a,l);break;case 13:Ss(n,i,a,l);break;case 23:break;case 22:p=i.stateNode,A=i.alternate,i.memoizedState!==null?p._visibility&2?Ss(n,i,a,l):Cl(n,i):p._visibility&2?Ss(n,i,a,l):(p._visibility|=2,Xa(n,i,a,l,(i.subtreeFlags&10256)!==0)),d&2048&&If(A,i);break;case 24:Ss(n,i,a,l),d&2048&&Cf(i.alternate,i);break;default:Ss(n,i,a,l)}}function Xa(n,i,a,l,d){for(d=d&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var p=n,A=i,w=a,j=l,q=A.flags;switch(A.tag){case 0:case 11:case 15:Xa(p,A,w,j,d),Rl(8,A);break;case 23:break;case 22:var X=A.stateNode;A.memoizedState!==null?X._visibility&2?Xa(p,A,w,j,d):Cl(p,A):(X._visibility|=2,Xa(p,A,w,j,d)),d&&q&2048&&If(A.alternate,A);break;case 24:Xa(p,A,w,j,d),d&&q&2048&&Cf(A.alternate,A);break;default:Xa(p,A,w,j,d)}i=i.sibling}}function Cl(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=n,l=i,d=l.flags;switch(l.tag){case 22:Cl(a,l),d&2048&&If(l.alternate,l);break;case 24:Cl(a,l),d&2048&&Cf(l.alternate,l);break;default:Cl(a,l)}i=i.sibling}}var Nl=8192;function Za(n){if(n.subtreeFlags&Nl)for(n=n.child;n!==null;)wv(n),n=n.sibling}function wv(n){switch(n.tag){case 26:Za(n),n.flags&Nl&&n.memoizedState!==null&&ww(es,n.memoizedState,n.memoizedProps);break;case 5:Za(n);break;case 3:case 4:var i=es;es=ku(n.stateNode.containerInfo),Za(n),es=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=Nl,Nl=16777216,Za(n),Nl=i):Za(n));break;default:Za(n)}}function Rv(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function xl(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ut=l,Cv(l,n)}Rv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Iv(n),n=n.sibling}function Iv(n){switch(n.tag){case 0:case 11:case 15:xl(n),n.flags&2048&&Pi(9,n,n.return);break;case 3:xl(n);break;case 12:xl(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,wu(n)):xl(n);break;default:xl(n)}}function wu(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ut=l,Cv(l,n)}Rv(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Pi(8,i,i.return),wu(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,wu(i));break;default:wu(i)}n=n.sibling}}function Cv(n,i){for(;Ut!==null;){var a=Ut;switch(a.tag){case 0:case 11:case 15:Pi(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:dl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ut=l;else e:for(a=n;Ut!==null;){l=Ut;var d=l.sibling,p=l.return;if(_v(l),l===a){Ut=null;break e}if(d!==null){d.return=p,Ut=d;break e}Ut=p}}}var BS={getCacheForType:function(n){var i=tn(Dt),a=i.data.get(n);return a===void 0&&(a=n(),i.data.set(n,a)),a}},FS=typeof WeakMap=="function"?WeakMap:Map,Ze=0,rt=null,ke=null,Ge=0,Je=0,Dn=null,Ui=!1,Ja=!1,Nf=!1,ci=0,dt=0,zi=0,Qr=0,xf=0,Qn=0,Wa=0,Dl=null,vn=null,Df=!1,Of=0,Ru=1/0,Iu=null,Bi=null,Yt=0,Fi=null,eo=null,to=0,Mf=0,jf=null,Nv=null,Ol=0,Vf=null;function On(){if((Ze&2)!==0&&Ge!==0)return Ge&-Ge;if(B.T!==null){var n=Fa;return n!==0?n:Ff()}return bi()}function xv(){Qn===0&&(Qn=(Ge&536870912)===0||Ye?Bo():536870912);var n=$n.current;return n!==null&&(n.flags|=32),Qn}function Mn(n,i,a){(n===rt&&(Je===2||Je===9)||n.cancelPendingCommit!==null)&&(no(n,0),Hi(n,Ge,Qn,!1)),Bs(n,a),((Ze&2)===0||n!==rt)&&(n===rt&&((Ze&2)===0&&(Qr|=a),dt===4&&Hi(n,Ge,Qn,!1)),ws(n))}function Dv(n,i,a){if((Ze&6)!==0)throw Error(r(327));var l=!a&&(i&124)===0&&(i&n.expiredLanes)===0||_r(n,i),d=l?GS(n,i):Lf(n,i,!0),p=l;do{if(d===0){Ja&&!l&&Hi(n,i,0,!1);break}else{if(a=n.current.alternate,p&&!HS(a)){d=Lf(n,i,!1),p=!1;continue}if(d===2){if(p=i,n.errorRecoveryDisabledLanes&p)var A=0;else A=n.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){i=A;e:{var w=n;d=Dl;var j=w.current.memoizedState.isDehydrated;if(j&&(no(w,A).flags|=256),A=Lf(w,A,!1),A!==2){if(Nf&&!j){w.errorRecoveryDisabledLanes|=p,Qr|=p,d=4;break e}p=vn,vn=d,p!==null&&(vn===null?vn=p:vn.push.apply(vn,p))}d=A}if(p=!1,d!==2)continue}}if(d===1){no(n,0),Hi(n,i,0,!0);break}e:{switch(l=n,p=d,p){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Hi(l,i,Qn,!Ui);break e;case 2:vn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(d=Of+300-mn(),10<d)){if(Hi(l,i,Qn,!Ui),_a(l,0,!0)!==0)break e;l.timeoutHandle=a_(Ov.bind(null,l,a,vn,Iu,Df,i,Qn,Qr,Wa,Ui,p,2,-0,0),d);break e}Ov(l,a,vn,Iu,Df,i,Qn,Qr,Wa,Ui,p,0,-0,0)}}break}while(!0);ws(n)}function Ov(n,i,a,l,d,p,A,w,j,q,X,ne,G,$){if(n.timeoutHandle=-1,ne=i.subtreeFlags,(ne&8192||(ne&16785408)===16785408)&&(Ul={stylesheets:null,count:0,unsuspend:Sw},wv(i),ne=Rw(),ne!==null)){n.cancelPendingCommit=ne(Uv.bind(null,n,i,p,a,l,d,A,w,j,X,1,G,$)),Hi(n,p,A,!q);return}Uv(n,i,p,a,l,d,A,w,j)}function HS(n){for(var i=n;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],p=d.getSnapshot;d=d.value;try{if(!In(p(),d))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Hi(n,i,a,l){i&=~xf,i&=~Qr,n.suspendedLanes|=i,n.pingedLanes&=~i,l&&(n.warmLanes|=i),l=n.expirationTimes;for(var d=i;0<d;){var p=31-Vt(d),A=1<<p;l[p]=-1,d&=~A}a!==0&&us(n,a,i)}function Cu(){return(Ze&6)===0?(Ml(0),!1):!0}function Pf(){if(ke!==null){if(Je===0)var n=ke.return;else n=ke,ti=Br=null,Jd(n),Ya=null,bl=0,n=ke;for(;n!==null;)hv(n.alternate,n),n=n.return;ke=null}}function no(n,i){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,ow(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Pf(),rt=n,ke=a=Js(n.current,null),Ge=i,Je=0,Dn=null,Ui=!1,Ja=_r(n,i),Nf=!1,Wa=Qn=xf=Qr=zi=dt=0,vn=Dl=null,Df=!1,(i&8)!==0&&(i|=i&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=i;0<l;){var d=31-Vt(l),p=1<<d;i|=n[d],l&=~p}return ci=i,Xc(),a}function Mv(n,i){je=null,B.H=pu,i===ml||i===ru?(i=Xg(),Je=3):i===Qg?(i=Xg(),Je=4):Je=i===Zy?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Dn=i,ke===null&&(dt=1,Eu(n,Fn(i,n.current)))}function jv(){var n=B.H;return B.H=pu,n===null?pu:n}function Vv(){var n=B.A;return B.A=BS,n}function kf(){dt=4,Ui||(Ge&4194048)!==Ge&&$n.current!==null||(Ja=!0),(zi&134217727)===0&&(Qr&134217727)===0||rt===null||Hi(rt,Ge,Qn,!1)}function Lf(n,i,a){var l=Ze;Ze|=2;var d=jv(),p=Vv();(rt!==n||Ge!==i)&&(Iu=null,no(n,i)),i=!1;var A=dt;e:do try{if(Je!==0&&ke!==null){var w=ke,j=Dn;switch(Je){case 8:Pf(),A=6;break e;case 3:case 2:case 9:case 6:$n.current===null&&(i=!0);var q=Je;if(Je=0,Dn=null,so(n,w,j,q),a&&Ja){A=0;break e}break;default:q=Je,Je=0,Dn=null,so(n,w,j,q)}}qS(),A=dt;break}catch(X){Mv(n,X)}while(!0);return i&&n.shellSuspendCounter++,ti=Br=null,Ze=l,B.H=d,B.A=p,ke===null&&(rt=null,Ge=0,Xc()),A}function qS(){for(;ke!==null;)Pv(ke)}function GS(n,i){var a=Ze;Ze|=2;var l=jv(),d=Vv();rt!==n||Ge!==i?(Iu=null,Ru=mn()+500,no(n,i)):Ja=_r(n,i);e:do try{if(Je!==0&&ke!==null){i=ke;var p=Dn;t:switch(Je){case 1:Je=0,Dn=null,so(n,i,p,1);break;case 2:case 9:if(Yg(p)){Je=0,Dn=null,kv(i);break}i=function(){Je!==2&&Je!==9||rt!==n||(Je=7),ws(n)},p.then(i,i);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:Yg(p)?(Je=0,Dn=null,kv(i)):(Je=0,Dn=null,so(n,i,p,7));break;case 5:var A=null;switch(ke.tag){case 26:A=ke.memoizedState;case 5:case 27:var w=ke;if(!A||v_(A)){Je=0,Dn=null;var j=w.sibling;if(j!==null)ke=j;else{var q=w.return;q!==null?(ke=q,Nu(q)):ke=null}break t}}Je=0,Dn=null,so(n,i,p,5);break;case 6:Je=0,Dn=null,so(n,i,p,6);break;case 8:Pf(),dt=6;break e;default:throw Error(r(462))}}$S();break}catch(X){Mv(n,X)}while(!0);return ti=Br=null,B.H=l,B.A=d,Ze=a,ke!==null?0:(rt=null,Ge=0,Xc(),dt)}function $S(){for(;ke!==null&&!yr();)Pv(ke)}function Pv(n){var i=cv(n.alternate,n,ci);n.memoizedProps=n.pendingProps,i===null?Nu(n):ke=i}function kv(n){var i=n,a=i.alternate;switch(i.tag){case 15:case 0:i=sv(a,i,i.pendingProps,i.type,void 0,Ge);break;case 11:i=sv(a,i,i.pendingProps,i.type.render,i.ref,Ge);break;case 5:Jd(i);default:hv(a,i),i=ke=Lg(i,ci),i=cv(a,i,ci)}n.memoizedProps=n.pendingProps,i===null?Nu(n):ke=i}function so(n,i,a,l){ti=Br=null,Jd(i),Ya=null,bl=0;var d=i.return;try{if(VS(n,d,i,a,Ge)){dt=1,Eu(n,Fn(a,n.current)),ke=null;return}}catch(p){if(d!==null)throw ke=d,p;dt=1,Eu(n,Fn(a,n.current)),ke=null;return}i.flags&32768?(Ye||l===1?n=!0:Ja||(Ge&536870912)!==0?n=!1:(Ui=n=!0,(l===2||l===9||l===3||l===6)&&(l=$n.current,l!==null&&l.tag===13&&(l.flags|=16384))),Lv(i,n)):Nu(i)}function Nu(n){var i=n;do{if((i.flags&32768)!==0){Lv(i,Ui);return}n=i.return;var a=kS(i.alternate,i,ci);if(a!==null){ke=a;return}if(i=i.sibling,i!==null){ke=i;return}ke=i=n}while(i!==null);dt===0&&(dt=5)}function Lv(n,i){do{var a=LS(n.alternate,n);if(a!==null){a.flags&=32767,ke=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(n=n.sibling,n!==null)){ke=n;return}ke=n=a}while(n!==null);dt=6,ke=null}function Uv(n,i,a,l,d,p,A,w,j){n.cancelPendingCommit=null;do xu();while(Yt!==0);if((Ze&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(p=i.lanes|i.childLanes,p|=Id,Ho(n,a,p,A,w,j),n===rt&&(ke=rt=null,Ge=0),eo=i,Fi=n,to=a,Mf=p,jf=d,Nv=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,XS(Us,function(){return qv(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=B.T,B.T=null,d=ee.p,ee.p=2,A=Ze,Ze|=4;try{US(n,i,a)}finally{Ze=A,ee.p=d,B.T=l}}Yt=1,zv(),Bv(),Fv()}}function zv(){if(Yt===1){Yt=0;var n=Fi,i=eo,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=B.T,B.T=null;var l=ee.p;ee.p=2;var d=Ze;Ze|=4;try{Av(i,n);var p=Xf,A=Cg(n.containerInfo),w=p.focusedElem,j=p.selectionRange;if(A!==w&&w&&w.ownerDocument&&Ig(w.ownerDocument.documentElement,w)){if(j!==null&&Ad(w)){var q=j.start,X=j.end;if(X===void 0&&(X=q),"selectionStart"in w)w.selectionStart=q,w.selectionEnd=Math.min(X,w.value.length);else{var ne=w.ownerDocument||document,G=ne&&ne.defaultView||window;if(G.getSelection){var $=G.getSelection(),Re=w.textContent.length,Ae=Math.min(j.start,Re),st=j.end===void 0?Ae:Math.min(j.end,Re);!$.extend&&Ae>st&&(A=st,st=Ae,Ae=A);var z=Rg(w,Ae),L=Rg(w,st);if(z&&L&&($.rangeCount!==1||$.anchorNode!==z.node||$.anchorOffset!==z.offset||$.focusNode!==L.node||$.focusOffset!==L.offset)){var H=ne.createRange();H.setStart(z.node,z.offset),$.removeAllRanges(),Ae>st?($.addRange(H),$.extend(L.node,L.offset)):(H.setEnd(L.node,L.offset),$.addRange(H))}}}}for(ne=[],$=w;$=$.parentNode;)$.nodeType===1&&ne.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ne.length;w++){var Z=ne[w];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Fu=!!Kf,Xf=Kf=null}finally{Ze=d,ee.p=l,B.T=a}}n.current=i,Yt=2}}function Bv(){if(Yt===2){Yt=0;var n=Fi,i=eo,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=B.T,B.T=null;var l=ee.p;ee.p=2;var d=Ze;Ze|=4;try{vv(n,i.alternate,i)}finally{Ze=d,ee.p=l,B.T=a}}Yt=3}}function Fv(){if(Yt===4||Yt===3){Yt=0,ya();var n=Fi,i=eo,a=to,l=Nv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Yt=5:(Yt=0,eo=Fi=null,Hv(n,n.pendingLanes));var d=n.pendingLanes;if(d===0&&(Bi=null),Ea(a),i=i.stateNode,Ne&&typeof Ne.onCommitFiberRoot=="function")try{Ne.onCommitFiberRoot(Fe,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=B.T,d=ee.p,ee.p=2,B.T=null;try{for(var p=n.onRecoverableError,A=0;A<l.length;A++){var w=l[A];p(w.value,{componentStack:w.stack})}}finally{B.T=i,ee.p=d}}(to&3)!==0&&xu(),ws(n),d=n.pendingLanes,(a&4194090)!==0&&(d&42)!==0?n===Vf?Ol++:(Ol=0,Vf=n):Ol=0,Ml(0)}}function Hv(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,dl(i)))}function xu(n){return zv(),Bv(),Fv(),qv()}function qv(){if(Yt!==5)return!1;var n=Fi,i=Mf;Mf=0;var a=Ea(to),l=B.T,d=ee.p;try{ee.p=32>a?32:a,B.T=null,a=jf,jf=null;var p=Fi,A=to;if(Yt=0,eo=Fi=null,to=0,(Ze&6)!==0)throw Error(r(331));var w=Ze;if(Ze|=4,Iv(p.current),Sv(p,p.current,A,a),Ze=w,Ml(0,!1),Ne&&typeof Ne.onPostCommitFiberRoot=="function")try{Ne.onPostCommitFiberRoot(Fe,p)}catch{}return!0}finally{ee.p=d,B.T=l,Hv(n,i)}}function Gv(n,i,a){i=Fn(a,i),i=ff(n.stateNode,i,2),n=Oi(n,i,2),n!==null&&(Bs(n,2),ws(n))}function it(n,i,a){if(n.tag===3)Gv(n,n,a);else for(;i!==null;){if(i.tag===3){Gv(i,n,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Bi===null||!Bi.has(l))){n=Fn(a,n),a=Ky(2),l=Oi(i,a,2),l!==null&&(Xy(a,l,i,n),Bs(l,2),ws(l));break}}i=i.return}}function Uf(n,i,a){var l=n.pingCache;if(l===null){l=n.pingCache=new FS;var d=new Set;l.set(i,d)}else d=l.get(i),d===void 0&&(d=new Set,l.set(i,d));d.has(a)||(Nf=!0,d.add(a),n=QS.bind(null,n,i,a),i.then(n,n))}function QS(n,i,a){var l=n.pingCache;l!==null&&l.delete(i),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,rt===n&&(Ge&a)===a&&(dt===4||dt===3&&(Ge&62914560)===Ge&&300>mn()-Of?(Ze&2)===0&&no(n,0):xf|=a,Wa===Ge&&(Wa=0)),ws(n)}function $v(n,i){i===0&&(i=Fo()),n=La(n,i),n!==null&&(Bs(n,i),ws(n))}function YS(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),$v(n,a)}function KS(n,i){var a=0;switch(n.tag){case 13:var l=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),$v(n,a)}function XS(n,i){return ks(n,i)}var Du=null,io=null,zf=!1,Ou=!1,Bf=!1,Yr=0;function ws(n){n!==io&&n.next===null&&(io===null?Du=io=n:io=io.next=n),Ou=!0,zf||(zf=!0,JS())}function Ml(n,i){if(!Bf&&Ou){Bf=!0;do for(var a=!1,l=Du;l!==null;){if(n!==0){var d=l.pendingLanes;if(d===0)var p=0;else{var A=l.suspendedLanes,w=l.pingedLanes;p=(1<<31-Vt(42|n)+1)-1,p&=d&~(A&~w),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(a=!0,Xv(l,p))}else p=Ge,p=_a(l,l===rt?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(p&3)===0||_r(l,p)||(a=!0,Xv(l,p));l=l.next}while(a);Bf=!1}}function ZS(){Qv()}function Qv(){Ou=zf=!1;var n=0;Yr!==0&&(aw()&&(n=Yr),Yr=0);for(var i=mn(),a=null,l=Du;l!==null;){var d=l.next,p=Yv(l,i);p===0?(l.next=null,a===null?Du=d:a.next=d,d===null&&(io=a)):(a=l,(n!==0||(p&3)!==0)&&(Ou=!0)),l=d}Ml(n)}function Yv(n,i){for(var a=n.suspendedLanes,l=n.pingedLanes,d=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var A=31-Vt(p),w=1<<A,j=d[A];j===-1?((w&a)===0||(w&l)!==0)&&(d[A]=zo(w,i)):j<=i&&(n.expiredLanes|=w),p&=~w}if(i=rt,a=Ge,a=_a(n,n===i?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===i&&(Je===2||Je===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Ls(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||_r(n,a)){if(i=a&-a,i===n.callbackPriority)return i;switch(l!==null&&Ls(l),Ea(a)){case 2:case 8:a=Ei;break;case 32:a=Us;break;case 268435456:a=Ti;break;default:a=Us}return l=Kv.bind(null,n),a=ks(a,l),n.callbackPriority=i,n.callbackNode=a,i}return l!==null&&l!==null&&Ls(l),n.callbackPriority=2,n.callbackNode=null,2}function Kv(n,i){if(Yt!==0&&Yt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(xu()&&n.callbackNode!==a)return null;var l=Ge;return l=_a(n,n===rt?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(Dv(n,l,i),Yv(n,mn()),n.callbackNode!=null&&n.callbackNode===a?Kv.bind(null,n):null)}function Xv(n,i){if(xu())return null;Dv(n,i,!0)}function JS(){lw(function(){(Ze&6)!==0?ks(vr,ZS):Qv()})}function Ff(){return Yr===0&&(Yr=Bo()),Yr}function Zv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ra(""+n)}function Jv(n,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,n.id&&a.setAttribute("form",n.id),i.parentNode.insertBefore(a,i),n=new FormData(n),a.parentNode.removeChild(a),n}function WS(n,i,a,l,d){if(i==="submit"&&a&&a.stateNode===d){var p=Zv((d[Et]||null).action),A=l.submitter;A&&(i=(i=A[Et]||null)?Zv(i.formAction):A.getAttribute("formAction"),i!==null&&(p=i,A=null));var w=new Ia("action","action",null,l,d);n.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Yr!==0){var j=A?Jv(d,A):new FormData(d);lf(a,{pending:!0,data:j,method:d.method,action:p},null,j)}}else typeof p=="function"&&(w.preventDefault(),j=A?Jv(d,A):new FormData(d),lf(a,{pending:!0,data:j,method:d.method,action:p},p,j))},currentTarget:d}]})}}for(var Hf=0;Hf<Rd.length;Hf++){var qf=Rd[Hf],ew=qf.toLowerCase(),tw=qf[0].toUpperCase()+qf.slice(1);Wn(ew,"on"+tw)}Wn(Dg,"onAnimationEnd"),Wn(Og,"onAnimationIteration"),Wn(Mg,"onAnimationStart"),Wn("dblclick","onDoubleClick"),Wn("focusin","onFocus"),Wn("focusout","onBlur"),Wn(vS,"onTransitionRun"),Wn(_S,"onTransitionStart"),Wn(ES,"onTransitionCancel"),Wn(jg,"onTransitionEnd"),Hs("onMouseEnter",["mouseout","mouseover"]),Hs("onMouseLeave",["mouseout","mouseover"]),Hs("onPointerEnter",["pointerout","pointerover"]),Hs("onPointerLeave",["pointerout","pointerover"]),Zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(jl));function Wv(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],d=l.event;l=l.listeners;e:{var p=void 0;if(i)for(var A=l.length-1;0<=A;A--){var w=l[A],j=w.instance,q=w.currentTarget;if(w=w.listener,j!==p&&d.isPropagationStopped())break e;p=w,d.currentTarget=q;try{p(d)}catch(X){_u(X)}d.currentTarget=null,p=j}else for(A=0;A<l.length;A++){if(w=l[A],j=w.instance,q=w.currentTarget,w=w.listener,j!==p&&d.isPropagationStopped())break e;p=w,d.currentTarget=q;try{p(d)}catch(X){_u(X)}d.currentTarget=null,p=j}}}}function Le(n,i){var a=i[Go];a===void 0&&(a=i[Go]=new Set);var l=n+"__bubble";a.has(l)||(e_(i,n,2,!1),a.add(l))}function Gf(n,i,a){var l=0;i&&(l|=4),e_(a,n,l,i)}var Mu="_reactListening"+Math.random().toString(36).slice(2);function $f(n){if(!n[Mu]){n[Mu]=!0,$o.forEach(function(a){a!=="selectionchange"&&(nw.has(a)||Gf(a,!1,n),Gf(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Mu]||(i[Mu]=!0,Gf("selectionchange",!1,i))}}function e_(n,i,a,l){switch(S_(i)){case 2:var d=Nw;break;case 8:d=xw;break;default:d=am}a=d.bind(null,i,a,n),d=void 0,!zn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),l?d!==void 0?n.addEventListener(i,a,{capture:!0,passive:d}):n.addEventListener(i,a,!0):d!==void 0?n.addEventListener(i,a,{passive:d}):n.addEventListener(i,a,!1)}function Qf(n,i,a,l,d){var p=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var A=l.tag;if(A===3||A===4){var w=l.stateNode.containerInfo;if(w===d)break;if(A===4)for(A=l.return;A!==null;){var j=A.tag;if((j===3||j===4)&&A.stateNode.containerInfo===d)return;A=A.return}for(;w!==null;){if(A=Fs(w),A===null)return;if(j=A.tag,j===5||j===6||j===26||j===27){l=p=A;continue e}w=w.parentNode}}l=l.return}Vc(function(){var q=p,X=Un(a),ne=[];e:{var G=Vg.get(n);if(G!==void 0){var $=Ia,Re=n;switch(n){case"keypress":if(gs(a)===0)break e;case"keydown":case"keyup":$=Ma;break;case"focusin":Re="focus",$=xa;break;case"focusout":Re="blur",$=xa;break;case"beforeblur":case"afterblur":$=xa;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=Bn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=vd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=Hc;break;case Dg:case Og:case Mg:$=Da;break;case jg:$=Gc;break;case"scroll":case"scrollend":$=Pc;break;case"wheel":$=ja;break;case"copy":case"cut":case"paste":$=Oa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=il;break;case"toggle":case"beforetoggle":$=Qc}var Ae=(i&4)!==0,st=!Ae&&(n==="scroll"||n==="scrollend"),z=Ae?G!==null?G+"Capture":null:G;Ae=[];for(var L=q,H;L!==null;){var Z=L;if(H=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||H===null||z===null||(Z=Ir(L,z),Z!=null&&Ae.push(Vl(L,Z,H))),st)break;L=L.return}0<Ae.length&&(G=new $(G,Re,null,a,X),ne.push({event:G,listeners:Ae}))}}if((i&7)===0){e:{if(G=n==="mouseover"||n==="pointerover",$=n==="mouseout"||n==="pointerout",G&&a!==$s&&(Re=a.relatedTarget||a.fromElement)&&(Fs(Re)||Re[kn]))break e;if(($||G)&&(G=X.window===X?X:(G=X.ownerDocument)?G.defaultView||G.parentWindow:window,$?(Re=a.relatedTarget||a.toElement,$=q,Re=Re?Fs(Re):null,Re!==null&&(st=c(Re),Ae=Re.tag,Re!==st||Ae!==5&&Ae!==27&&Ae!==6)&&(Re=null)):($=null,Re=q),$!==Re)){if(Ae=Bn,Z="onMouseLeave",z="onMouseEnter",L="mouse",(n==="pointerout"||n==="pointerover")&&(Ae=il,Z="onPointerLeave",z="onPointerEnter",L="pointer"),st=$==null?G:ds($),H=Re==null?G:ds(Re),G=new Ae(Z,L+"leave",$,a,X),G.target=st,G.relatedTarget=H,Z=null,Fs(X)===q&&(Ae=new Ae(z,L+"enter",Re,a,X),Ae.target=H,Ae.relatedTarget=st,Z=Ae),st=Z,$&&Re)t:{for(Ae=$,z=Re,L=0,H=Ae;H;H=ro(H))L++;for(H=0,Z=z;Z;Z=ro(Z))H++;for(;0<L-H;)Ae=ro(Ae),L--;for(;0<H-L;)z=ro(z),H--;for(;L--;){if(Ae===z||z!==null&&Ae===z.alternate)break t;Ae=ro(Ae),z=ro(z)}Ae=null}else Ae=null;$!==null&&t_(ne,G,$,Ae,!1),Re!==null&&st!==null&&t_(ne,st,Re,Ae,!0)}}e:{if(G=q?ds(q):window,$=G.nodeName&&G.nodeName.toLowerCase(),$==="select"||$==="input"&&G.type==="file")var ge=Eg;else if(xt(G))if(Tg)ge=pS;else{ge=fS;var Pe=dS}else $=G.nodeName,!$||$.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?q&&Zo(q.elementType)&&(ge=Eg):ge=mS;if(ge&&(ge=ge(n,q))){Zs(ne,ge,a,X);break e}Pe&&Pe(n,G,q),n==="focusout"&&q&&G.type==="number"&&q.memoizedProps.value!=null&&Ii(G,"number",G.value)}switch(Pe=q?ds(q):window,n){case"focusin":(xt(Pe)||Pe.contentEditable==="true")&&(Va=Pe,bd=q,ol=null);break;case"focusout":ol=bd=Va=null;break;case"mousedown":Sd=!0;break;case"contextmenu":case"mouseup":case"dragend":Sd=!1,Ng(ne,a,X);break;case"selectionchange":if(yS)break;case"keydown":case"keyup":Ng(ne,a,X)}var _e;if(_s)e:{switch(n){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else He?Q(n,a)&&(be="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(be="onCompositionStart");be&&(E&&a.locale!=="ko"&&(He||be!=="onCompositionStart"?be==="onCompositionEnd"&&He&&(_e=Wo()):(ps=X,Ci="value"in ps?ps.value:ps.textContent,He=!0)),Pe=ju(q,be),0<Pe.length&&(be=new nl(be,n,null,a,X),ne.push({event:be,listeners:Pe}),_e?be.data=_e:(_e=de(a),_e!==null&&(be.data=_e)))),(_e=_?Nt(n,a):qe(n,a))&&(be=ju(q,"onBeforeInput"),0<be.length&&(Pe=new nl("onBeforeInput","beforeinput",null,a,X),ne.push({event:Pe,listeners:be}),Pe.data=_e)),WS(ne,n,q,a,X)}Wv(ne,i)})}function Vl(n,i,a){return{instance:n,listener:i,currentTarget:a}}function ju(n,i){for(var a=i+"Capture",l=[];n!==null;){var d=n,p=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||p===null||(d=Ir(n,a),d!=null&&l.unshift(Vl(n,d,p)),d=Ir(n,i),d!=null&&l.push(Vl(n,d,p))),n.tag===3)return l;n=n.return}return[]}function ro(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function t_(n,i,a,l,d){for(var p=i._reactName,A=[];a!==null&&a!==l;){var w=a,j=w.alternate,q=w.stateNode;if(w=w.tag,j!==null&&j===l)break;w!==5&&w!==26&&w!==27||q===null||(j=q,d?(q=Ir(a,p),q!=null&&A.unshift(Vl(a,q,j))):d||(q=Ir(a,p),q!=null&&A.push(Vl(a,q,j)))),a=a.return}A.length!==0&&n.push({event:i,listeners:A})}var sw=/\r\n?/g,iw=/\u0000|\uFFFD/g;function n_(n){return(typeof n=="string"?n:""+n).replace(sw,`
`).replace(iw,"")}function s_(n,i){return i=n_(i),n_(n)===i}function Vu(){}function nt(n,i,a,l,d,p){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Ln(n,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Ln(n,""+l);break;case"className":fs(n,"class",l);break;case"tabIndex":fs(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":fs(n,a,l);break;case"style":Xo(n,l,p);break;case"data":if(i!=="object"){fs(n,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ra(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(a==="formAction"?(i!=="input"&&nt(n,i,"name",d.name,d,null),nt(n,i,"formEncType",d.formEncType,d,null),nt(n,i,"formMethod",d.formMethod,d,null),nt(n,i,"formTarget",d.formTarget,d,null)):(nt(n,i,"encType",d.encType,d,null),nt(n,i,"method",d.method,d,null),nt(n,i,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ra(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Vu);break;case"onScroll":l!=null&&Le("scroll",n);break;case"onScrollEnd":l!=null&&Le("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=Ra(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Le("beforetoggle",n),Le("toggle",n),Ri(n,"popover",l);break;case"xlinkActuate":Gt(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Gt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Gt(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Gt(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Gt(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Gt(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Gt(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Gt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Gt(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ri(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=gd.get(a)||a,Ri(n,a,l))}}function Yf(n,i,a,l,d,p){switch(a){case"style":Xo(n,l,p);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof l=="string"?Ln(n,l):(typeof l=="number"||typeof l=="bigint")&&Ln(n,""+l);break;case"onScroll":l!=null&&Le("scroll",n);break;case"onScrollEnd":l!=null&&Le("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Vu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ta.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),i=a.slice(2,d?a.length-7:void 0),p=n[Et]||null,p=p!=null?p[a]:null,typeof p=="function"&&n.removeEventListener(i,p,d),typeof l=="function")){typeof p!="function"&&p!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(i,l,d);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):Ri(n,a,l)}}}function Kt(n,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",n),Le("load",n);var l=!1,d=!1,p;for(p in a)if(a.hasOwnProperty(p)){var A=a[p];if(A!=null)switch(p){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:nt(n,i,p,A,a,null)}}d&&nt(n,i,"srcSet",a.srcSet,a,null),l&&nt(n,i,"src",a.src,a,null);return;case"input":Le("invalid",n);var w=p=A=d=null,j=null,q=null;for(l in a)if(a.hasOwnProperty(l)){var X=a[l];if(X!=null)switch(l){case"name":d=X;break;case"type":A=X;break;case"checked":j=X;break;case"defaultChecked":q=X;break;case"value":p=X;break;case"defaultValue":w=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,i));break;default:nt(n,i,l,X,a,null)}}Sr(n,p,w,j,q,A,d,!1),wa(n);return;case"select":Le("invalid",n),l=A=p=null;for(d in a)if(a.hasOwnProperty(d)&&(w=a[d],w!=null))switch(d){case"value":p=w;break;case"defaultValue":A=w;break;case"multiple":l=w;default:nt(n,i,d,w,a,null)}i=p,a=A,n.multiple=!!l,i!=null?Gs(n,!!l,i,!1):a!=null&&Gs(n,!!l,a,!0);return;case"textarea":Le("invalid",n),p=d=l=null;for(A in a)if(a.hasOwnProperty(A)&&(w=a[A],w!=null))switch(A){case"value":l=w;break;case"defaultValue":d=w;break;case"children":p=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(91));break;default:nt(n,i,A,w,a,null)}wr(n,l,d,p),wa(n);return;case"option":for(j in a)if(a.hasOwnProperty(j)&&(l=a[j],l!=null))switch(j){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:nt(n,i,j,l,a,null)}return;case"dialog":Le("beforetoggle",n),Le("toggle",n),Le("cancel",n),Le("close",n);break;case"iframe":case"object":Le("load",n);break;case"video":case"audio":for(l=0;l<jl.length;l++)Le(jl[l],n);break;case"image":Le("error",n),Le("load",n);break;case"details":Le("toggle",n);break;case"embed":case"source":case"link":Le("error",n),Le("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in a)if(a.hasOwnProperty(q)&&(l=a[q],l!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:nt(n,i,q,l,a,null)}return;default:if(Zo(i)){for(X in a)a.hasOwnProperty(X)&&(l=a[X],l!==void 0&&Yf(n,i,X,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&nt(n,i,w,l,a,null))}function rw(n,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,p=null,A=null,w=null,j=null,q=null,X=null;for($ in a){var ne=a[$];if(a.hasOwnProperty($)&&ne!=null)switch($){case"checked":break;case"value":break;case"defaultValue":j=ne;default:l.hasOwnProperty($)||nt(n,i,$,null,l,ne)}}for(var G in l){var $=l[G];if(ne=a[G],l.hasOwnProperty(G)&&($!=null||ne!=null))switch(G){case"type":p=$;break;case"name":d=$;break;case"checked":q=$;break;case"defaultChecked":X=$;break;case"value":A=$;break;case"defaultValue":w=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,i));break;default:$!==ne&&nt(n,i,G,$,l,ne)}}Rn(n,A,w,j,q,X,p,d);return;case"select":$=A=w=G=null;for(p in a)if(j=a[p],a.hasOwnProperty(p)&&j!=null)switch(p){case"value":break;case"multiple":$=j;default:l.hasOwnProperty(p)||nt(n,i,p,null,l,j)}for(d in l)if(p=l[d],j=a[d],l.hasOwnProperty(d)&&(p!=null||j!=null))switch(d){case"value":G=p;break;case"defaultValue":w=p;break;case"multiple":A=p;default:p!==j&&nt(n,i,d,p,l,j)}i=w,a=A,l=$,G!=null?Gs(n,!!a,G,!1):!!l!=!!a&&(i!=null?Gs(n,!!a,i,!0):Gs(n,!!a,a?[]:"",!1));return;case"textarea":$=G=null;for(w in a)if(d=a[w],a.hasOwnProperty(w)&&d!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:nt(n,i,w,null,l,d)}for(A in l)if(d=l[A],p=a[A],l.hasOwnProperty(A)&&(d!=null||p!=null))switch(A){case"value":G=d;break;case"defaultValue":$=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==p&&nt(n,i,A,d,l,p)}et(n,G,$);return;case"option":for(var Re in a)if(G=a[Re],a.hasOwnProperty(Re)&&G!=null&&!l.hasOwnProperty(Re))switch(Re){case"selected":n.selected=!1;break;default:nt(n,i,Re,null,l,G)}for(j in l)if(G=l[j],$=a[j],l.hasOwnProperty(j)&&G!==$&&(G!=null||$!=null))switch(j){case"selected":n.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:nt(n,i,j,G,l,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in a)G=a[Ae],a.hasOwnProperty(Ae)&&G!=null&&!l.hasOwnProperty(Ae)&&nt(n,i,Ae,null,l,G);for(q in l)if(G=l[q],$=a[q],l.hasOwnProperty(q)&&G!==$&&(G!=null||$!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,i));break;default:nt(n,i,q,G,l,$)}return;default:if(Zo(i)){for(var st in a)G=a[st],a.hasOwnProperty(st)&&G!==void 0&&!l.hasOwnProperty(st)&&Yf(n,i,st,void 0,l,G);for(X in l)G=l[X],$=a[X],!l.hasOwnProperty(X)||G===$||G===void 0&&$===void 0||Yf(n,i,X,G,l,$);return}}for(var z in a)G=a[z],a.hasOwnProperty(z)&&G!=null&&!l.hasOwnProperty(z)&&nt(n,i,z,null,l,G);for(ne in l)G=l[ne],$=a[ne],!l.hasOwnProperty(ne)||G===$||G==null&&$==null||nt(n,i,ne,G,l,$)}var Kf=null,Xf=null;function Pu(n){return n.nodeType===9?n:n.ownerDocument}function i_(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function r_(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Zf(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Jf=null;function aw(){var n=window.event;return n&&n.type==="popstate"?n===Jf?!1:(Jf=n,!0):(Jf=null,!1)}var a_=typeof setTimeout=="function"?setTimeout:void 0,ow=typeof clearTimeout=="function"?clearTimeout:void 0,o_=typeof Promise=="function"?Promise:void 0,lw=typeof queueMicrotask=="function"?queueMicrotask:typeof o_<"u"?function(n){return o_.resolve(null).then(n).catch(cw)}:a_;function cw(n){setTimeout(function(){throw n})}function qi(n){return n==="head"}function l_(n,i){var a=i,l=0,d=0;do{var p=a.nextSibling;if(n.removeChild(a),p&&p.nodeType===8)if(a=p.data,a==="/$"){if(0<l&&8>l){a=l;var A=n.ownerDocument;if(a&1&&Pl(A.documentElement),a&2&&Pl(A.body),a&4)for(a=A.head,Pl(a),A=a.firstChild;A;){var w=A.nextSibling,j=A.nodeName;A[Er]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&A.rel.toLowerCase()==="stylesheet"||a.removeChild(A),A=w}}if(d===0){n.removeChild(p),ql(i);return}d--}else a==="$"||a==="$?"||a==="$!"?d++:l=a.charCodeAt(0)-48;else l=0;a=p}while(a);ql(i)}function Wf(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Wf(a),wi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function uw(n,i,a,l){for(;n.nodeType===1;){var d=a;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[Er])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==d.rel||n.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||n.getAttribute("title")!==(d.title==null?null:d.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(d.src==null?null:d.src)||n.getAttribute("type")!==(d.type==null?null:d.type)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var p=d.name==null?null:""+d.name;if(d.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=ts(n.nextSibling),n===null)break}return null}function hw(n,i,a){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=ts(n.nextSibling),n===null))return null;return n}function em(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function dw(n,i){var a=n.ownerDocument;if(n.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function ts(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var tm=null;function c_(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}function u_(n,i,a){switch(i=Pu(a),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function Pl(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);wi(n)}var Yn=new Map,h_=new Set;function ku(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ui=ee.d;ee.d={f:fw,r:mw,D:pw,C:gw,L:yw,m:vw,X:Ew,S:_w,M:Tw};function fw(){var n=ui.f(),i=Cu();return n||i}function mw(n){var i=hs(n);i!==null&&i.tag===5&&i.type==="form"?Dy(i):ui.r(n)}var ao=typeof document>"u"?null:document;function d_(n,i,a){var l=ao;if(l&&typeof i=="string"&&i){var d=Tt(i);d='link[rel="'+n+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),h_.has(d)||(h_.add(d),n={rel:n,crossOrigin:a,href:i},l.querySelector(d)===null&&(i=l.createElement("link"),Kt(i,"link",n),mt(i),l.head.appendChild(i)))}}function pw(n){ui.D(n),d_("dns-prefetch",n,null)}function gw(n,i){ui.C(n,i),d_("preconnect",n,i)}function yw(n,i,a){ui.L(n,i,a);var l=ao;if(l&&n&&i){var d='link[rel="preload"][as="'+Tt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+Tt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+Tt(a.imageSizes)+'"]')):d+='[href="'+Tt(n)+'"]';var p=d;switch(i){case"style":p=oo(n);break;case"script":p=lo(n)}Yn.has(p)||(n=v({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:n,as:i},a),Yn.set(p,n),l.querySelector(d)!==null||i==="style"&&l.querySelector(kl(p))||i==="script"&&l.querySelector(Ll(p))||(i=l.createElement("link"),Kt(i,"link",n),mt(i),l.head.appendChild(i)))}}function vw(n,i){ui.m(n,i);var a=ao;if(a&&n){var l=i&&typeof i.as=="string"?i.as:"script",d='link[rel="modulepreload"][as="'+Tt(l)+'"][href="'+Tt(n)+'"]',p=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=lo(n)}if(!Yn.has(p)&&(n=v({rel:"modulepreload",href:n},i),Yn.set(p,n),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ll(p)))return}l=a.createElement("link"),Kt(l,"link",n),mt(l),a.head.appendChild(l)}}}function _w(n,i,a){ui.S(n,i,a);var l=ao;if(l&&n){var d=un(l).hoistableStyles,p=oo(n);i=i||"default";var A=d.get(p);if(!A){var w={loading:0,preload:null};if(A=l.querySelector(kl(p)))w.loading=5;else{n=v({rel:"stylesheet",href:n,"data-precedence":i},a),(a=Yn.get(p))&&nm(n,a);var j=A=l.createElement("link");mt(j),Kt(j,"link",n),j._p=new Promise(function(q,X){j.onload=q,j.onerror=X}),j.addEventListener("load",function(){w.loading|=1}),j.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Lu(A,i,l)}A={type:"stylesheet",instance:A,count:1,state:w},d.set(p,A)}}}function Ew(n,i){ui.X(n,i);var a=ao;if(a&&n){var l=un(a).hoistableScripts,d=lo(n),p=l.get(d);p||(p=a.querySelector(Ll(d)),p||(n=v({src:n,async:!0},i),(i=Yn.get(d))&&sm(n,i),p=a.createElement("script"),mt(p),Kt(p,"link",n),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(d,p))}}function Tw(n,i){ui.M(n,i);var a=ao;if(a&&n){var l=un(a).hoistableScripts,d=lo(n),p=l.get(d);p||(p=a.querySelector(Ll(d)),p||(n=v({src:n,async:!0,type:"module"},i),(i=Yn.get(d))&&sm(n,i),p=a.createElement("script"),mt(p),Kt(p,"link",n),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(d,p))}}function f_(n,i,a,l){var d=(d=we.current)?ku(d):null;if(!d)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=oo(a.href),a=un(d).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=oo(a.href);var p=un(d).hoistableStyles,A=p.get(n);if(A||(d=d.ownerDocument||d,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,A),(p=d.querySelector(kl(n)))&&!p._p&&(A.instance=p,A.state.loading=5),Yn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Yn.set(n,a),p||Aw(d,n,a,A.state))),i&&l===null)throw Error(r(528,""));return A}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=lo(a),a=un(d).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function oo(n){return'href="'+Tt(n)+'"'}function kl(n){return'link[rel="stylesheet"]['+n+"]"}function m_(n){return v({},n,{"data-precedence":n.precedence,precedence:null})}function Aw(n,i,a,l){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=n.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Kt(i,"link",a),mt(i),n.head.appendChild(i))}function lo(n){return'[src="'+Tt(n)+'"]'}function Ll(n){return"script[async]"+n}function p_(n,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=n.querySelector('style[data-href~="'+Tt(a.href)+'"]');if(l)return i.instance=l,mt(l),l;var d=v({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),mt(l),Kt(l,"style",d),Lu(l,a.precedence,n),i.instance=l;case"stylesheet":d=oo(a.href);var p=n.querySelector(kl(d));if(p)return i.state.loading|=4,i.instance=p,mt(p),p;l=m_(a),(d=Yn.get(d))&&nm(l,d),p=(n.ownerDocument||n).createElement("link"),mt(p);var A=p;return A._p=new Promise(function(w,j){A.onload=w,A.onerror=j}),Kt(p,"link",l),i.state.loading|=4,Lu(p,a.precedence,n),i.instance=p;case"script":return p=lo(a.src),(d=n.querySelector(Ll(p)))?(i.instance=d,mt(d),d):(l=a,(d=Yn.get(p))&&(l=v({},a),sm(l,d)),n=n.ownerDocument||n,d=n.createElement("script"),mt(d),Kt(d,"link",l),n.head.appendChild(d),i.instance=d);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Lu(l,a.precedence,n));return i.instance}function Lu(n,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,p=d,A=0;A<l.length;A++){var w=l[A];if(w.dataset.precedence===i)p=w;else if(p!==d)break}p?p.parentNode.insertBefore(n,p.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(n,i.firstChild))}function nm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function sm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Uu=null;function g_(n,i,a){if(Uu===null){var l=new Map,d=Uu=new Map;d.set(a,l)}else d=Uu,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),d=0;d<a.length;d++){var p=a[d];if(!(p[Er]||p[Ct]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var A=p.getAttribute(i)||"";A=n+A;var w=l.get(A);w?w.push(p):l.set(A,[p])}}return l}function y_(n,i,a){n=n.ownerDocument||n,n.head.insertBefore(a,i==="title"?n.querySelector("head > title"):null)}function bw(n,i,a){if(a===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function v_(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Ul=null;function Sw(){}function ww(n,i,a){if(Ul===null)throw Error(r(475));var l=Ul;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var d=oo(a.href),p=n.querySelector(kl(d));if(p){n=p._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(l.count++,l=zu.bind(l),n.then(l,l)),i.state.loading|=4,i.instance=p,mt(p);return}p=n.ownerDocument||n,a=m_(a),(d=Yn.get(d))&&nm(a,d),p=p.createElement("link"),mt(p);var A=p;A._p=new Promise(function(w,j){A.onload=w,A.onerror=j}),Kt(p,"link",a),i.instance=p}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=zu.bind(l),n.addEventListener("load",i),n.addEventListener("error",i))}}function Rw(){if(Ul===null)throw Error(r(475));var n=Ul;return n.stylesheets&&n.count===0&&im(n,n.stylesheets),0<n.count?function(i){var a=setTimeout(function(){if(n.stylesheets&&im(n,n.stylesheets),n.unsuspend){var l=n.unsuspend;n.unsuspend=null,l()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(a)}}:null}function zu(){if(this.count--,this.count===0){if(this.stylesheets)im(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Bu=null;function im(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Bu=new Map,i.forEach(Iw,n),Bu=null,zu.call(n))}function Iw(n,i){if(!(i.state.loading&4)){var a=Bu.get(n);if(a)var l=a.get(null);else{a=new Map,Bu.set(n,a);for(var d=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<d.length;p++){var A=d[p];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),l=A)}l&&a.set(null,l)}d=i.instance,A=d.getAttribute("data-precedence"),p=a.get(A)||l,p===l&&a.set(null,d),a.set(A,d),this.count++,l=zu.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),p?p.parentNode.insertBefore(d,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(d,n.firstChild)),i.state.loading|=4}}var zl={$$typeof:K,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function Cw(n,i,a,l,d,p,A,w){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zs(0),this.hiddenUpdates=zs(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=p,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function __(n,i,a,l,d,p,A,w,j,q,X,ne){return n=new Cw(n,i,a,A,w,j,q,ne),i=1,p===!0&&(i|=24),p=Cn(3,null,null,i),n.current=p,p.stateNode=n,i=Ld(),i.refCount++,n.pooledCache=i,i.refCount++,p.memoizedState={element:l,isDehydrated:a,cache:i},Fd(p),n}function E_(n){return n?(n=Ua,n):Ua}function T_(n,i,a,l,d,p){d=E_(d),l.context===null?l.context=d:l.pendingContext=d,l=Di(i),l.payload={element:a},p=p===void 0?null:p,p!==null&&(l.callback=p),a=Oi(n,l,i),a!==null&&(Mn(a,n,i),gl(a,n,i))}function A_(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function rm(n,i){A_(n,i),(n=n.alternate)&&A_(n,i)}function b_(n){if(n.tag===13){var i=La(n,67108864);i!==null&&Mn(i,n,67108864),rm(n,67108864)}}var Fu=!0;function Nw(n,i,a,l){var d=B.T;B.T=null;var p=ee.p;try{ee.p=2,am(n,i,a,l)}finally{ee.p=p,B.T=d}}function xw(n,i,a,l){var d=B.T;B.T=null;var p=ee.p;try{ee.p=8,am(n,i,a,l)}finally{ee.p=p,B.T=d}}function am(n,i,a,l){if(Fu){var d=om(l);if(d===null)Qf(n,i,l,Hu,a),w_(n,l);else if(Ow(d,n,i,a,l))l.stopPropagation();else if(w_(n,l),i&4&&-1<Dw.indexOf(n)){for(;d!==null;){var p=hs(d);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var A=qt(p.pendingLanes);if(A!==0){var w=p;for(w.pendingLanes|=2,w.entangledLanes|=2;A;){var j=1<<31-Vt(A);w.entanglements[1]|=j,A&=~j}ws(p),(Ze&6)===0&&(Ru=mn()+500,Ml(0))}}break;case 13:w=La(p,2),w!==null&&Mn(w,p,2),Cu(),rm(p,2)}if(p=om(l),p===null&&Qf(n,i,l,Hu,a),p===d)break;d=p}d!==null&&l.stopPropagation()}else Qf(n,i,l,null,a)}}function om(n){return n=Un(n),lm(n)}var Hu=null;function lm(n){if(Hu=null,n=Fs(n),n!==null){var i=c(n);if(i===null)n=null;else{var a=i.tag;if(a===13){if(n=h(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Hu=n,null}function S_(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Lo()){case vr:return 2;case Ei:return 8;case Us:case Uo:return 32;case Ti:return 268435456;default:return 32}default:return 32}}var cm=!1,Gi=null,$i=null,Qi=null,Bl=new Map,Fl=new Map,Yi=[],Dw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function w_(n,i){switch(n){case"focusin":case"focusout":Gi=null;break;case"dragenter":case"dragleave":$i=null;break;case"mouseover":case"mouseout":Qi=null;break;case"pointerover":case"pointerout":Bl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fl.delete(i.pointerId)}}function Hl(n,i,a,l,d,p){return n===null||n.nativeEvent!==p?(n={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:p,targetContainers:[d]},i!==null&&(i=hs(i),i!==null&&b_(i)),n):(n.eventSystemFlags|=l,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function Ow(n,i,a,l,d){switch(i){case"focusin":return Gi=Hl(Gi,n,i,a,l,d),!0;case"dragenter":return $i=Hl($i,n,i,a,l,d),!0;case"mouseover":return Qi=Hl(Qi,n,i,a,l,d),!0;case"pointerover":var p=d.pointerId;return Bl.set(p,Hl(Bl.get(p)||null,n,i,a,l,d)),!0;case"gotpointercapture":return p=d.pointerId,Fl.set(p,Hl(Fl.get(p)||null,n,i,a,l,d)),!0}return!1}function R_(n){var i=Fs(n.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=h(a),i!==null){n.blockedOn=i,Cc(n.priority,function(){if(a.tag===13){var l=On();l=Ai(l);var d=La(a,l);d!==null&&Mn(d,a,l),rm(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function qu(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=om(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);$s=l,a.target.dispatchEvent(l),$s=null}else return i=hs(a),i!==null&&b_(i),n.blockedOn=a,!1;i.shift()}return!0}function I_(n,i,a){qu(n)&&a.delete(i)}function Mw(){cm=!1,Gi!==null&&qu(Gi)&&(Gi=null),$i!==null&&qu($i)&&($i=null),Qi!==null&&qu(Qi)&&(Qi=null),Bl.forEach(I_),Fl.forEach(I_)}function Gu(n,i){n.blockedOn===i&&(n.blockedOn=null,cm||(cm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Mw)))}var $u=null;function C_(n){$u!==n&&($u=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){$u===n&&($u=null);for(var i=0;i<n.length;i+=3){var a=n[i],l=n[i+1],d=n[i+2];if(typeof l!="function"){if(lm(l||a)===null)continue;break}var p=hs(a);p!==null&&(n.splice(i,3),i-=3,lf(p,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function ql(n){function i(j){return Gu(j,n)}Gi!==null&&Gu(Gi,n),$i!==null&&Gu($i,n),Qi!==null&&Gu(Qi,n),Bl.forEach(i),Fl.forEach(i);for(var a=0;a<Yi.length;a++){var l=Yi[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<Yi.length&&(a=Yi[0],a.blockedOn===null);)R_(a),a.blockedOn===null&&Yi.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],p=a[l+1],A=d[Et]||null;if(typeof p=="function")A||C_(a);else if(A){var w=null;if(p&&p.hasAttribute("formAction")){if(d=p,A=p[Et]||null)w=A.formAction;else if(lm(d)!==null)continue}else w=A.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),C_(a)}}}function um(n){this._internalRoot=n}Qu.prototype.render=um.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=On();T_(a,l,n,i,null,null)},Qu.prototype.unmount=um.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;T_(n.current,2,null,n,null,null),Cu(),i[kn]=null}};function Qu(n){this._internalRoot=n}Qu.prototype.unstable_scheduleHydration=function(n){if(n){var i=bi();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Yi.length&&i!==0&&i<Yi[a].priority;a++);Yi.splice(a,0,n),a===0&&R_(n)}};var N_=e.version;if(N_!=="19.1.0")throw Error(r(527,N_,"19.1.0"));ee.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=f(i),n=n!==null?m(n):null,n=n===null?null:n.stateNode,n};var jw={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yu.isDisabled&&Yu.supportsFiber)try{Fe=Yu.inject(jw),Ne=Yu}catch{}}return $l.createRoot=function(n,i){if(!o(n))throw Error(r(299));var a=!1,l="",d=Gy,p=$y,A=Qy,w=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(d=i.onUncaughtError),i.onCaughtError!==void 0&&(p=i.onCaughtError),i.onRecoverableError!==void 0&&(A=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(w=i.unstable_transitionCallbacks)),i=__(n,1,!1,null,null,a,l,d,p,A,w,null),n[kn]=i.current,$f(n),new um(i)},$l.hydrateRoot=function(n,i,a){if(!o(n))throw Error(r(299));var l=!1,d="",p=Gy,A=$y,w=Qy,j=null,q=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(j=a.unstable_transitionCallbacks),a.formState!==void 0&&(q=a.formState)),i=__(n,1,!0,i,a??null,l,d,p,A,w,j,q),i.context=E_(null),a=i.current,l=On(),l=Ai(l),d=Di(l),d.callback=null,Oi(a,d,l),a=l,i.current.lanes=a,Bs(i,a),ws(i),n[kn]=i.current,$f(n),new Qu(i)},$l.version="19.1.0",$l}var U_;function $w(){if(U_)return fm.exports;U_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),fm.exports=Gw(),fm.exports}var Qw=$w();UE();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ac(){return ac=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},ac.apply(this,arguments)}var tr;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(tr||(tr={}));const z_="popstate";function Yw(s){s===void 0&&(s={});function e(o,c){let{pathname:h="/",search:g="",hash:f=""}=la(o.location.hash.substr(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),Vm("",{pathname:h,search:g,hash:f},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function t(o,c){let h=o.document.querySelector("base"),g="";if(h&&h.getAttribute("href")){let f=o.location.href,m=f.indexOf("#");g=m===-1?f:f.slice(0,m)}return g+"#"+(typeof c=="string"?c:zE(c))}function r(o,c){gp(o.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(c)+")")}return Xw(e,t,r,s)}function It(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function gp(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Kw(){return Math.random().toString(36).substr(2,8)}function B_(s,e){return{usr:s.state,key:s.key,idx:e}}function Vm(s,e,t,r){return t===void 0&&(t=null),ac({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof e=="string"?la(e):e,{state:t,key:e&&e.key||r||Kw()})}function zE(s){let{pathname:e="/",search:t="",hash:r=""}=s;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function la(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substr(t),s=s.substr(0,t));let r=s.indexOf("?");r>=0&&(e.search=s.substr(r),s=s.substr(0,r)),s&&(e.pathname=s)}return e}function Xw(s,e,t,r){r===void 0&&(r={});let{window:o=document.defaultView,v5Compat:c=!1}=r,h=o.history,g=tr.Pop,f=null,m=v();m==null&&(m=0,h.replaceState(ac({},h.state,{idx:m}),""));function v(){return(h.state||{idx:null}).idx}function T(){g=tr.Pop;let V=v(),re=V==null?null:V-m;m=V,f&&f({action:g,location:U.location,delta:re})}function b(V,re){g=tr.Push;let J=Vm(U.location,V,re);t&&t(J,V),m=v()+1;let K=B_(J,m),ae=U.createHref(J);try{h.pushState(K,"",ae)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;o.location.assign(ae)}c&&f&&f({action:g,location:U.location,delta:1})}function O(V,re){g=tr.Replace;let J=Vm(U.location,V,re);t&&t(J,V),m=v();let K=B_(J,m),ae=U.createHref(J);h.replaceState(K,"",ae),c&&f&&f({action:g,location:U.location,delta:0})}function k(V){let re=o.location.origin!=="null"?o.location.origin:o.location.href,J=typeof V=="string"?V:zE(V);return J=J.replace(/ $/,"%20"),It(re,"No window.location.(origin|href) available to create URL for href: "+J),new URL(J,re)}let U={get action(){return g},get location(){return s(o,h)},listen(V){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(z_,T),f=V,()=>{o.removeEventListener(z_,T),f=null}},createHref(V){return e(o,V)},createURL:k,encodeLocation(V){let re=k(V);return{pathname:re.pathname,search:re.search,hash:re.hash}},push:b,replace:O,go(V){return h.go(V)}};return U}var F_;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(F_||(F_={}));function Zw(s,e,t){return t===void 0&&(t="/"),Jw(s,e,t)}function Jw(s,e,t,r){let o=typeof e=="string"?la(e):e,c=HE(o.pathname||"/",t);if(c==null)return null;let h=BE(s);Ww(h);let g=null;for(let f=0;g==null&&f<h.length;++f){let m=h1(c);g=l1(h[f],m)}return g}function BE(s,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let o=(c,h,g)=>{let f={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};f.relativePath.startsWith("/")&&(It(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let m=ea([r,f.relativePath]),v=t.concat(f);c.children&&c.children.length>0&&(It(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),BE(c.children,e,v,m)),!(c.path==null&&!c.index)&&e.push({path:m,score:a1(m,c.index),routesMeta:v})};return s.forEach((c,h)=>{var g;if(c.path===""||!((g=c.path)!=null&&g.includes("?")))o(c,h);else for(let f of FE(c.path))o(c,h,f)}),e}function FE(s){let e=s.split("/");if(e.length===0)return[];let[t,...r]=e,o=t.endsWith("?"),c=t.replace(/\?$/,"");if(r.length===0)return o?[c,""]:[c];let h=FE(r.join("/")),g=[];return g.push(...h.map(f=>f===""?c:[c,f].join("/"))),o&&g.push(...h),g.map(f=>s.startsWith("/")&&f===""?"/":f)}function Ww(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:o1(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const e1=/^:[\w-]+$/,t1=3,n1=2,s1=1,i1=10,r1=-2,H_=s=>s==="*";function a1(s,e){let t=s.split("/"),r=t.length;return t.some(H_)&&(r+=r1),e&&(r+=n1),t.filter(o=>!H_(o)).reduce((o,c)=>o+(e1.test(c)?t1:c===""?s1:i1),r)}function o1(s,e){return s.length===e.length&&s.slice(0,-1).every((r,o)=>r===e[o])?s[s.length-1]-e[e.length-1]:0}function l1(s,e,t){let{routesMeta:r}=s,o={},c="/",h=[];for(let g=0;g<r.length;++g){let f=r[g],m=g===r.length-1,v=c==="/"?e:e.slice(c.length)||"/",T=c1({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},v),b=f.route;if(!T)return null;Object.assign(o,T.params),h.push({params:o,pathname:ea([c,T.pathname]),pathnameBase:p1(ea([c,T.pathnameBase])),route:b}),T.pathnameBase!=="/"&&(c=ea([c,T.pathnameBase]))}return h}function c1(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,r]=u1(s.path,s.caseSensitive,s.end),o=e.match(t);if(!o)return null;let c=o[0],h=c.replace(/(.)\/+$/,"$1"),g=o.slice(1);return{params:r.reduce((m,v,T)=>{let{paramName:b,isOptional:O}=v;if(b==="*"){let U=g[T]||"";h=c.slice(0,c.length-U.length).replace(/(.)\/+$/,"$1")}const k=g[T];return O&&!k?m[b]=void 0:m[b]=(k||"").replace(/%2F/g,"/"),m},{}),pathname:c,pathnameBase:h,pattern:s}}function u1(s,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),gp(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let r=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,g,f)=>(r.push({paramName:g,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(r.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function h1(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return gp(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),s}}function HE(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=s.charAt(t);return r&&r!=="/"?null:s.slice(t)||"/"}function d1(s,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:o=""}=typeof s=="string"?la(s):s;return{pathname:t?t.startsWith("/")?t:f1(t,e):e,search:g1(r),hash:y1(o)}}function f1(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function ym(s,e,t,r){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function m1(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function qE(s,e){let t=m1(s);return e?t.map((r,o)=>o===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function GE(s,e,t,r){r===void 0&&(r=!1);let o;typeof s=="string"?o=la(s):(o=ac({},s),It(!o.pathname||!o.pathname.includes("?"),ym("?","pathname","search",o)),It(!o.pathname||!o.pathname.includes("#"),ym("#","pathname","hash",o)),It(!o.search||!o.search.includes("#"),ym("#","search","hash",o)));let c=s===""||o.pathname==="",h=c?"/":o.pathname,g;if(h==null)g=t;else{let T=e.length-1;if(!r&&h.startsWith("..")){let b=h.split("/");for(;b[0]==="..";)b.shift(),T-=1;o.pathname=b.join("/")}g=T>=0?e[T]:"/"}let f=d1(o,g),m=h&&h!=="/"&&h.endsWith("/"),v=(c||h===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||v)&&(f.pathname+="/"),f}const ea=s=>s.join("/").replace(/\/\/+/g,"/"),p1=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),g1=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,y1=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function v1(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const $E=["post","put","patch","delete"];new Set($E);const _1=["get",...$E];new Set(_1);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function oc(){return oc=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},oc.apply(this,arguments)}const yp=Y.createContext(null),E1=Y.createContext(null),yc=Y.createContext(null),zh=Y.createContext(null),ca=Y.createContext({outlet:null,matches:[],isDataRoute:!1}),QE=Y.createContext(null);function vc(){return Y.useContext(zh)!=null}function Bh(){return vc()||It(!1),Y.useContext(zh).location}function YE(s){Y.useContext(yc).static||Y.useLayoutEffect(s)}function ua(){let{isDataRoute:s}=Y.useContext(ca);return s?M1():T1()}function T1(){vc()||It(!1);let s=Y.useContext(yp),{basename:e,future:t,navigator:r}=Y.useContext(yc),{matches:o}=Y.useContext(ca),{pathname:c}=Bh(),h=JSON.stringify(qE(o,t.v7_relativeSplatPath)),g=Y.useRef(!1);return YE(()=>{g.current=!0}),Y.useCallback(function(m,v){if(v===void 0&&(v={}),!g.current)return;if(typeof m=="number"){r.go(m);return}let T=GE(m,JSON.parse(h),c,v.relative==="path");s==null&&e!=="/"&&(T.pathname=T.pathname==="/"?e:ea([e,T.pathname])),(v.replace?r.replace:r.push)(T,v.state,v)},[e,r,h,c,s])}function A1(s,e){return b1(s,e)}function b1(s,e,t,r){vc()||It(!1);let{navigator:o}=Y.useContext(yc),{matches:c}=Y.useContext(ca),h=c[c.length-1],g=h?h.params:{};h&&h.pathname;let f=h?h.pathnameBase:"/";h&&h.route;let m=Bh(),v;if(e){var T;let V=typeof e=="string"?la(e):e;f==="/"||(T=V.pathname)!=null&&T.startsWith(f)||It(!1),v=V}else v=m;let b=v.pathname||"/",O=b;if(f!=="/"){let V=f.replace(/^\//,"").split("/");O="/"+b.replace(/^\//,"").split("/").slice(V.length).join("/")}let k=Zw(s,{pathname:O}),U=C1(k&&k.map(V=>Object.assign({},V,{params:Object.assign({},g,V.params),pathname:ea([f,o.encodeLocation?o.encodeLocation(V.pathname).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?f:ea([f,o.encodeLocation?o.encodeLocation(V.pathnameBase).pathname:V.pathnameBase])})),c,t,r);return e&&U?Y.createElement(zh.Provider,{value:{location:oc({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:tr.Pop}},U):U}function S1(){let s=O1(),e=v1(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Y.createElement(Y.Fragment,null,Y.createElement("h2",null,"Unexpected Application Error!"),Y.createElement("h3",{style:{fontStyle:"italic"}},e),t?Y.createElement("pre",{style:o},t):null,null)}const w1=Y.createElement(S1,null);class R1 extends Y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?Y.createElement(ca.Provider,{value:this.props.routeContext},Y.createElement(QE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function I1(s){let{routeContext:e,match:t,children:r}=s,o=Y.useContext(yp);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),Y.createElement(ca.Provider,{value:e},r)}function C1(s,e,t,r){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),s==null){var c;if(!t)return null;if(t.errors)s=t.matches;else if((c=r)!=null&&c.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let h=s,g=(o=t)==null?void 0:o.errors;if(g!=null){let v=h.findIndex(T=>T.route.id&&g?.[T.route.id]!==void 0);v>=0||It(!1),h=h.slice(0,Math.min(h.length,v+1))}let f=!1,m=-1;if(t&&r&&r.v7_partialHydration)for(let v=0;v<h.length;v++){let T=h[v];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(m=v),T.route.id){let{loaderData:b,errors:O}=t,k=T.route.loader&&b[T.route.id]===void 0&&(!O||O[T.route.id]===void 0);if(T.route.lazy||k){f=!0,m>=0?h=h.slice(0,m+1):h=[h[0]];break}}}return h.reduceRight((v,T,b)=>{let O,k=!1,U=null,V=null;t&&(O=g&&T.route.id?g[T.route.id]:void 0,U=T.route.errorElement||w1,f&&(m<0&&b===0?(j1("route-fallback"),k=!0,V=null):m===b&&(k=!0,V=T.route.hydrateFallbackElement||null)));let re=e.concat(h.slice(0,b+1)),J=()=>{let K;return O?K=U:k?K=V:T.route.Component?K=Y.createElement(T.route.Component,null):T.route.element?K=T.route.element:K=v,Y.createElement(I1,{match:T,routeContext:{outlet:v,matches:re,isDataRoute:t!=null},children:K})};return t&&(T.route.ErrorBoundary||T.route.errorElement||b===0)?Y.createElement(R1,{location:t.location,revalidation:t.revalidation,component:U,error:O,children:J(),routeContext:{outlet:null,matches:re,isDataRoute:!0}}):J()},null)}var KE=function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s}(KE||{}),XE=function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s}(XE||{});function N1(s){let e=Y.useContext(yp);return e||It(!1),e}function x1(s){let e=Y.useContext(E1);return e||It(!1),e}function D1(s){let e=Y.useContext(ca);return e||It(!1),e}function ZE(s){let e=D1(),t=e.matches[e.matches.length-1];return t.route.id||It(!1),t.route.id}function O1(){var s;let e=Y.useContext(QE),t=x1(),r=ZE();return e!==void 0?e:(s=t.errors)==null?void 0:s[r]}function M1(){let{router:s}=N1(KE.UseNavigateStable),e=ZE(XE.UseNavigateStable),t=Y.useRef(!1);return YE(()=>{t.current=!0}),Y.useCallback(function(o,c){c===void 0&&(c={}),t.current&&(typeof o=="number"?s.navigate(o):s.navigate(o,oc({fromRouteId:e},c)))},[s,e])}const q_={};function j1(s,e,t){q_[s]||(q_[s]=!0)}function V1(s,e){s?.v7_startTransition,s?.v7_relativeSplatPath}function P1(s){let{to:e,replace:t,state:r,relative:o}=s;vc()||It(!1);let{future:c,static:h}=Y.useContext(yc),{matches:g}=Y.useContext(ca),{pathname:f}=Bh(),m=ua(),v=GE(e,qE(g,c.v7_relativeSplatPath),f,o==="path"),T=JSON.stringify(v);return Y.useEffect(()=>m(JSON.parse(T),{replace:t,state:r,relative:o}),[m,T,o,t,r]),null}function Yl(s){It(!1)}function k1(s){let{basename:e="/",children:t=null,location:r,navigationType:o=tr.Pop,navigator:c,static:h=!1,future:g}=s;vc()&&It(!1);let f=e.replace(/^\/*/,"/"),m=Y.useMemo(()=>({basename:f,navigator:c,static:h,future:oc({v7_relativeSplatPath:!1},g)}),[f,g,c,h]);typeof r=="string"&&(r=la(r));let{pathname:v="/",search:T="",hash:b="",state:O=null,key:k="default"}=r,U=Y.useMemo(()=>{let V=HE(v,f);return V==null?null:{location:{pathname:V,search:T,hash:b,state:O,key:k},navigationType:o}},[f,v,T,b,O,k,o]);return U==null?null:Y.createElement(yc.Provider,{value:m},Y.createElement(zh.Provider,{children:t,value:U}))}function L1(s){let{children:e,location:t}=s;return A1(Pm(e),t)}new Promise(()=>{});function Pm(s,e){e===void 0&&(e=[]);let t=[];return Y.Children.forEach(s,(r,o)=>{if(!Y.isValidElement(r))return;let c=[...e,o];if(r.type===Y.Fragment){t.push.apply(t,Pm(r.props.children,c));return}r.type!==Yl&&It(!1),!r.props.index||!r.props.children||It(!1);let h={id:r.props.id||c.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(h.children=Pm(r.props.children,c)),t.push(h)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function km(s){return s===void 0&&(s=""),new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((e,t)=>{let r=s[t];return e.concat(Array.isArray(r)?r.map(o=>[t,o]):[[t,r]])},[]))}function U1(s,e){let t=km(s);return e&&e.forEach((r,o)=>{t.has(o)||e.getAll(o).forEach(c=>{t.append(o,c)})}),t}const z1="6";try{window.__reactRouterVersion=z1}catch{}const B1="startTransition",G_=Bw[B1];function F1(s){let{basename:e,children:t,future:r,window:o}=s,c=Y.useRef();c.current==null&&(c.current=Yw({window:o,v5Compat:!0}));let h=c.current,[g,f]=Y.useState({action:h.action,location:h.location}),{v7_startTransition:m}=r||{},v=Y.useCallback(T=>{m&&G_?G_(()=>f(T)):f(T)},[f,m]);return Y.useLayoutEffect(()=>h.listen(v),[h,v]),Y.useEffect(()=>V1(r),[r]),Y.createElement(k1,{basename:e,children:t,location:g.location,navigationType:g.action,navigator:h,future:r})}var $_;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})($_||($_={}));var Q_;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(Q_||(Q_={}));function H1(s){let e=Y.useRef(km(s)),t=Y.useRef(!1),r=Bh(),o=Y.useMemo(()=>U1(r.search,t.current?null:e.current),[r.search]),c=ua(),h=Y.useCallback((g,f)=>{const m=km(typeof g=="function"?g(o):g);t.current=!0,c("?"+m,f)},[c,o]);return[o,h]}const q1=()=>{};var Y_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE=function(s){const e=[];let t=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},G1=function(s){const e=[];let t=0,r=0;for(;t<s.length;){const o=s[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const c=s[t++];e[r++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=s[t++],h=s[t++],g=s[t++],f=((o&7)<<18|(c&63)<<12|(h&63)<<6|g&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const c=s[t++],h=s[t++];e[r++]=String.fromCharCode((o&15)<<12|(c&63)<<6|h&63)}}return e.join("")},WE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const c=s[o],h=o+1<s.length,g=h?s[o+1]:0,f=o+2<s.length,m=f?s[o+2]:0,v=c>>2,T=(c&3)<<4|g>>4;let b=(g&15)<<2|m>>6,O=m&63;f||(O=64,h||(b=64)),r.push(t[v],t[T],t[b],t[O])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(JE(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):G1(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const c=t[s.charAt(o++)],g=o<s.length?t[s.charAt(o)]:0;++o;const m=o<s.length?t[s.charAt(o)]:64;++o;const T=o<s.length?t[s.charAt(o)]:64;if(++o,c==null||g==null||m==null||T==null)throw new $1;const b=c<<2|g>>4;if(r.push(b),m!==64){const O=g<<4&240|m>>2;if(r.push(O),T!==64){const k=m<<6&192|T;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class $1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Q1=function(s){const e=JE(s);return WE.encodeByteArray(e,!0)},gh=function(s){return Q1(s).replace(/\./g,"")},eT=function(s){try{return WE.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1=()=>Y1().__FIREBASE_DEFAULTS__,X1=()=>{if(typeof process>"u"||typeof Y_>"u")return;const s=Y_.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},Z1=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&eT(s[1]);return e&&JSON.parse(e)},Fh=()=>{try{return q1()||K1()||X1()||Z1()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},tT=s=>{var e,t;return(t=(e=Fh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[s]},nT=s=>{const e=tT(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},sT=()=>{var s;return(s=Fh())===null||s===void 0?void 0:s.config},iT=s=>{var e;return(e=Fh())===null||e===void 0?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(s){return s.endsWith(".cloudworkstations.dev")}async function vp(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},s);return[gh(JSON.stringify(t)),gh(JSON.stringify(h)),""].join(".")}const Wl={};function W1(){const s={prod:[],emulator:[]};for(const e of Object.keys(Wl))Wl[e]?s.emulator.push(e):s.prod.push(e);return s}function eR(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let K_=!1;function _p(s,e){if(typeof window>"u"||typeof document>"u"||!ha(window.location.host)||Wl[s]===e||Wl[s]||K_)return;Wl[s]=e;function t(b){return`__firebase__banner__${b}`}const r="__firebase__banner",c=W1().prod.length>0;function h(){const b=document.getElementById(r);b&&b.remove()}function g(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function f(b,O){b.setAttribute("width","24"),b.setAttribute("id",O),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function m(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{K_=!0,h()},b}function v(b,O){b.setAttribute("id",O),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function T(){const b=eR(r),O=t("text"),k=document.getElementById(O)||document.createElement("span"),U=t("learnmore"),V=document.getElementById(U)||document.createElement("a"),re=t("preprendIcon"),J=document.getElementById(re)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const K=b.element;g(K),v(V,U);const ae=m();f(J,re),K.append(J,k,V,ae),document.body.appendChild(K)}c?(k.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())}function nR(){var s;const e=(s=Fh())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aT(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function iR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rR(){const s=on();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function aR(){return!nR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function oT(){try{return typeof indexedDB=="object"}catch{return!1}}function lT(){return new Promise((s,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var c;e(((c=o.error)===null||c===void 0?void 0:c.message)||"")}}catch(t){e(t)}})}function oR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR="FirebaseError";class Xn extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=lR,Object.setPrototypeOf(this,Xn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,da.prototype.create)}}class da{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,c=this.errors[e],h=c?cR(c,r):"Error",g=`${this.serviceName}: ${h} (${o}).`;return new Xn(o,g,r)}}function cR(s,e){return s.replace(uR,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const uR=/\{\$([^}]+)}/g;function hR(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function or(s,e){if(s===e)return!0;const t=Object.keys(s),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const c=s[o],h=e[o];if(X_(c)&&X_(h)){if(!or(c,h))return!1}else if(c!==h)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function X_(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(s){const e=[];for(const[t,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function dR(s,e){const t=new fR(s,e);return t.subscribe.bind(t)}class fR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");mR(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=vm),o.error===void 0&&(o.error=vm),o.complete===void 0&&(o.complete=vm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mR(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function vm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR=1e3,gR=2,yR=4*60*60*1e3,vR=.5;function Z_(s,e=pR,t=gR){const r=e*Math.pow(t,s),o=Math.round(vR*r*(Math.random()-.5)*2);return Math.min(yR,r+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(s){return s&&s._delegate?s._delegate:s}class Kn{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new J1;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(c){if(o)return null;throw c}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TR(e))try{this.getOrInitializeService({instanceIdentifier:Xr})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:o});r.resolve(c)}catch{}}}}clearInstance(e=Xr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xr){return this.instances.has(e)}getOptions(e=Xr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[c,h]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);r===g&&h.resolve(o)}return o}onInit(e,t){var r;const o=this.normalizeInstanceIdentifier(t),c=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;c.add(e),this.onInitCallbacks.set(o,c);const h=this.instances.get(o);return h&&e(h,o),()=>{c.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ER(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xr){return this.component?this.component.multipleInstances?e:Xr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ER(s){return s===Xr?void 0:s}function TR(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new _R(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(ze||(ze={}));const bR={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},SR=ze.INFO,wR={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},RR=(s,e,...t)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),o=wR[e];if(o)console[o](`[${r}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hh{constructor(e){this.name=e,this._logLevel=SR,this._logHandler=RR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const IR=(s,e)=>e.some(t=>s instanceof t);let J_,W_;function CR(){return J_||(J_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NR(){return W_||(W_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cT=new WeakMap,Lm=new WeakMap,uT=new WeakMap,_m=new WeakMap,Ep=new WeakMap;function xR(s){const e=new Promise((t,r)=>{const o=()=>{s.removeEventListener("success",c),s.removeEventListener("error",h)},c=()=>{t(sr(s.result)),o()},h=()=>{r(s.error),o()};s.addEventListener("success",c),s.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&cT.set(t,s)}).catch(()=>{}),Ep.set(e,s),e}function DR(s){if(Lm.has(s))return;const e=new Promise((t,r)=>{const o=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",h),s.removeEventListener("abort",h)},c=()=>{t(),o()},h=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",c),s.addEventListener("error",h),s.addEventListener("abort",h)});Lm.set(s,e)}let Um={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return Lm.get(s);if(e==="objectStoreNames")return s.objectStoreNames||uT.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return sr(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function OR(s){Um=s(Um)}function MR(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=s.call(Em(this),e,...t);return uT.set(r,e.sort?e.sort():[e]),sr(r)}:NR().includes(s)?function(...e){return s.apply(Em(this),e),sr(cT.get(this))}:function(...e){return sr(s.apply(Em(this),e))}}function jR(s){return typeof s=="function"?MR(s):(s instanceof IDBTransaction&&DR(s),IR(s,CR())?new Proxy(s,Um):s)}function sr(s){if(s instanceof IDBRequest)return xR(s);if(_m.has(s))return _m.get(s);const e=jR(s);return e!==s&&(_m.set(s,e),Ep.set(e,s)),e}const Em=s=>Ep.get(s);function hT(s,e,{blocked:t,upgrade:r,blocking:o,terminated:c}={}){const h=indexedDB.open(s,e),g=sr(h);return r&&h.addEventListener("upgradeneeded",f=>{r(sr(h.result),f.oldVersion,f.newVersion,sr(h.transaction),f)}),t&&h.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),g.then(f=>{c&&f.addEventListener("close",()=>c()),o&&f.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),g}const VR=["get","getKey","getAll","getAllKeys","count"],PR=["put","add","delete","clear"],Tm=new Map;function e0(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Tm.get(e))return Tm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=PR.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||VR.includes(t)))return;const c=async function(h,...g){const f=this.transaction(h,o?"readwrite":"readonly");let m=f.store;return r&&(m=m.index(g.shift())),(await Promise.all([m[t](...g),o&&f.done]))[0]};return Tm.set(e,c),c}OR(s=>({...s,get:(e,t,r)=>e0(e,t)||s.get(e,t,r),has:(e,t)=>!!e0(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(LR(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function LR(s){const e=s.getComponent();return e?.type==="VERSION"}const zm="@firebase/app",t0="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi=new Hh("@firebase/app"),UR="@firebase/app-compat",zR="@firebase/analytics-compat",BR="@firebase/analytics",FR="@firebase/app-check-compat",HR="@firebase/app-check",qR="@firebase/auth",GR="@firebase/auth-compat",$R="@firebase/database",QR="@firebase/data-connect",YR="@firebase/database-compat",KR="@firebase/functions",XR="@firebase/functions-compat",ZR="@firebase/installations",JR="@firebase/installations-compat",WR="@firebase/messaging",eI="@firebase/messaging-compat",tI="@firebase/performance",nI="@firebase/performance-compat",sI="@firebase/remote-config",iI="@firebase/remote-config-compat",rI="@firebase/storage",aI="@firebase/storage-compat",oI="@firebase/firestore",lI="@firebase/ai",cI="@firebase/firestore-compat",uI="firebase",hI="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="[DEFAULT]",dI={[zm]:"fire-core",[UR]:"fire-core-compat",[BR]:"fire-analytics",[zR]:"fire-analytics-compat",[HR]:"fire-app-check",[FR]:"fire-app-check-compat",[qR]:"fire-auth",[GR]:"fire-auth-compat",[$R]:"fire-rtdb",[QR]:"fire-data-connect",[YR]:"fire-rtdb-compat",[KR]:"fire-fn",[XR]:"fire-fn-compat",[ZR]:"fire-iid",[JR]:"fire-iid-compat",[WR]:"fire-fcm",[eI]:"fire-fcm-compat",[tI]:"fire-perf",[nI]:"fire-perf-compat",[sI]:"fire-rc",[iI]:"fire-rc-compat",[rI]:"fire-gcs",[aI]:"fire-gcs-compat",[oI]:"fire-fst",[cI]:"fire-fst-compat",[lI]:"fire-vertex","fire-js":"fire-js",[uI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh=new Map,fI=new Map,Fm=new Map;function n0(s,e){try{s.container.addComponent(e)}catch(t){mi.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function os(s){const e=s.name;if(Fm.has(e))return mi.debug(`There were multiple attempts to register component ${e}.`),!1;Fm.set(e,s);for(const t of yh.values())n0(t,s);for(const t of fI.values())n0(t,s);return!0}function mr(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function ns(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ir=new da("app","Firebase",mI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Kn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ir.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=hI;function dT(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Bm,automaticDataCollectionEnabled:!0},e),o=r.name;if(typeof o!="string"||!o)throw ir.create("bad-app-name",{appName:String(o)});if(t||(t=sT()),!t)throw ir.create("no-options");const c=yh.get(o);if(c){if(or(t,c.options)&&or(r,c.config))return c;throw ir.create("duplicate-app",{appName:o})}const h=new AR(o);for(const f of Fm.values())h.addComponent(f);const g=new pI(t,r,h);return yh.set(o,g),g}function qh(s=Bm){const e=yh.get(s);if(!e&&s===Bm&&sT())return dT();if(!e)throw ir.create("no-app",{appName:s});return e}function An(s,e,t){var r;let o=(r=dI[s])!==null&&r!==void 0?r:s;t&&(o+=`-${t}`);const c=o.match(/\s|\//),h=e.match(/\s|\//);if(c||h){const g=[`Unable to register library "${o}" with version "${e}":`];c&&g.push(`library name "${o}" contains illegal characters (whitespace or "/")`),c&&h&&g.push("and"),h&&g.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mi.warn(g.join(" "));return}os(new Kn(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI="firebase-heartbeat-database",yI=1,lc="firebase-heartbeat-store";let Am=null;function fT(){return Am||(Am=hT(gI,yI,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(lc)}catch(t){console.warn(t)}}}}).catch(s=>{throw ir.create("idb-open",{originalErrorMessage:s.message})})),Am}async function vI(s){try{const t=(await fT()).transaction(lc),r=await t.objectStore(lc).get(mT(s));return await t.done,r}catch(e){if(e instanceof Xn)mi.warn(e.message);else{const t=ir.create("idb-get",{originalErrorMessage:e?.message});mi.warn(t.message)}}}async function s0(s,e){try{const r=(await fT()).transaction(lc,"readwrite");await r.objectStore(lc).put(e,mT(s)),await r.done}catch(t){if(t instanceof Xn)mi.warn(t.message);else{const r=ir.create("idb-set",{originalErrorMessage:t?.message});mi.warn(r.message)}}}function mT(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=1024,EI=30;class TI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new bI(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=i0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(h=>h.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>EI){const h=SI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){mi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=i0(),{heartbeatsToSend:r,unsentEntries:o}=AI(this._heartbeatsCache.heartbeats),c=gh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return mi.warn(t),""}}}function i0(){return new Date().toISOString().substring(0,10)}function AI(s,e=_I){const t=[];let r=s.slice();for(const o of s){const c=t.find(h=>h.agent===o.agent);if(c){if(c.dates.push(o.date),r0(t)>e){c.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),r0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class bI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oT()?lT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await vI(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return s0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return s0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function r0(s){return gh(JSON.stringify({version:2,heartbeats:s})).length}function SI(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let r=1;r<s.length;r++)s[r].date<t&&(t=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(s){os(new Kn("platform-logger",e=>new kR(e),"PRIVATE")),os(new Kn("heartbeat",e=>new TI(e),"PRIVATE")),An(zm,t0,s),An(zm,t0,"esm2017"),An("fire-js","")}wI("");var RI="firebase",II="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */An(RI,II,"app");const pT="@firebase/installations",Tp="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT=1e4,yT=`w:${Tp}`,vT="FIS_v2",CI="https://firebaseinstallations.googleapis.com/v1",NI=60*60*1e3,xI="installations",DI="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},na=new da(xI,DI,OI);function _T(s){return s instanceof Xn&&s.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET({projectId:s}){return`${CI}/projects/${s}/installations`}function TT(s){return{token:s.token,requestStatus:2,expiresIn:jI(s.expiresIn),creationTime:Date.now()}}async function AT(s,e){const r=(await e.json()).error;return na.create("request-failed",{requestName:s,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function bT({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function MI(s,{refreshToken:e}){const t=bT(s);return t.append("Authorization",VI(e)),t}async function ST(s){const e=await s();return e.status>=500&&e.status<600?s():e}function jI(s){return Number(s.replace("s","000"))}function VI(s){return`${vT} ${s}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PI({appConfig:s,heartbeatServiceProvider:e},{fid:t}){const r=ET(s),o=bT(s),c=e.getImmediate({optional:!0});if(c){const m=await c.getHeartbeatsHeader();m&&o.append("x-firebase-client",m)}const h={fid:t,authVersion:vT,appId:s.appId,sdkVersion:yT},g={method:"POST",headers:o,body:JSON.stringify(h)},f=await ST(()=>fetch(r,g));if(f.ok){const m=await f.json();return{fid:m.fid||t,registrationStatus:2,refreshToken:m.refreshToken,authToken:TT(m.authToken)}}else throw await AT("Create Installation",f)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(s){return new Promise(e=>{setTimeout(e,s)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI=/^[cdef][\w-]{21}$/,Hm="";function UI(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const t=zI(s);return LI.test(t)?t:Hm}catch{return Hm}}function zI(s){return kI(s).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(s){return`${s.appName}!${s.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=new Map;function IT(s,e){const t=Gh(s);CT(t,e),BI(t,e)}function CT(s,e){const t=RT.get(s);if(t)for(const r of t)r(e)}function BI(s,e){const t=FI();t&&t.postMessage({key:s,fid:e}),HI()}let Jr=null;function FI(){return!Jr&&"BroadcastChannel"in self&&(Jr=new BroadcastChannel("[Firebase] FID Change"),Jr.onmessage=s=>{CT(s.data.key,s.data.fid)}),Jr}function HI(){RT.size===0&&Jr&&(Jr.close(),Jr=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI="firebase-installations-database",GI=1,sa="firebase-installations-store";let bm=null;function Ap(){return bm||(bm=hT(qI,GI,{upgrade:(s,e)=>{switch(e){case 0:s.createObjectStore(sa)}}})),bm}async function vh(s,e){const t=Gh(s),o=(await Ap()).transaction(sa,"readwrite"),c=o.objectStore(sa),h=await c.get(t);return await c.put(e,t),await o.done,(!h||h.fid!==e.fid)&&IT(s,e.fid),e}async function NT(s){const e=Gh(s),r=(await Ap()).transaction(sa,"readwrite");await r.objectStore(sa).delete(e),await r.done}async function $h(s,e){const t=Gh(s),o=(await Ap()).transaction(sa,"readwrite"),c=o.objectStore(sa),h=await c.get(t),g=e(h);return g===void 0?await c.delete(t):await c.put(g,t),await o.done,g&&(!h||h.fid!==g.fid)&&IT(s,g.fid),g}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bp(s){let e;const t=await $h(s.appConfig,r=>{const o=$I(r),c=QI(s,o);return e=c.registrationPromise,c.installationEntry});return t.fid===Hm?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function $I(s){const e=s||{fid:UI(),registrationStatus:0};return xT(e)}function QI(s,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(na.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=YI(s,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:KI(s)}:{installationEntry:e}}async function YI(s,e){try{const t=await PI(s,e);return vh(s.appConfig,t)}catch(t){throw _T(t)&&t.customData.serverCode===409?await NT(s.appConfig):await vh(s.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function KI(s){let e=await a0(s.appConfig);for(;e.registrationStatus===1;)await wT(100),e=await a0(s.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await bp(s);return r||t}return e}function a0(s){return $h(s,e=>{if(!e)throw na.create("installation-not-found");return xT(e)})}function xT(s){return XI(s)?{fid:s.fid,registrationStatus:0}:s}function XI(s){return s.registrationStatus===1&&s.registrationTime+gT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZI({appConfig:s,heartbeatServiceProvider:e},t){const r=JI(s,t),o=MI(s,t),c=e.getImmediate({optional:!0});if(c){const m=await c.getHeartbeatsHeader();m&&o.append("x-firebase-client",m)}const h={installation:{sdkVersion:yT,appId:s.appId}},g={method:"POST",headers:o,body:JSON.stringify(h)},f=await ST(()=>fetch(r,g));if(f.ok){const m=await f.json();return TT(m)}else throw await AT("Generate Auth Token",f)}function JI(s,{fid:e}){return`${ET(s)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sp(s,e=!1){let t;const r=await $h(s.appConfig,c=>{if(!DT(c))throw na.create("not-registered");const h=c.authToken;if(!e&&tC(h))return c;if(h.requestStatus===1)return t=WI(s,e),c;{if(!navigator.onLine)throw na.create("app-offline");const g=sC(c);return t=eC(s,g),g}});return t?await t:r.authToken}async function WI(s,e){let t=await o0(s.appConfig);for(;t.authToken.requestStatus===1;)await wT(100),t=await o0(s.appConfig);const r=t.authToken;return r.requestStatus===0?Sp(s,e):r}function o0(s){return $h(s,e=>{if(!DT(e))throw na.create("not-registered");const t=e.authToken;return iC(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function eC(s,e){try{const t=await ZI(s,e),r=Object.assign(Object.assign({},e),{authToken:t});return await vh(s.appConfig,r),t}catch(t){if(_T(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await NT(s.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await vh(s.appConfig,r)}throw t}}function DT(s){return s!==void 0&&s.registrationStatus===2}function tC(s){return s.requestStatus===2&&!nC(s)}function nC(s){const e=Date.now();return e<s.creationTime||s.creationTime+s.expiresIn<e+NI}function sC(s){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},s),{authToken:e})}function iC(s){return s.requestStatus===1&&s.requestTime+gT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rC(s){const e=s,{installationEntry:t,registrationPromise:r}=await bp(e);return r?r.catch(console.error):Sp(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aC(s,e=!1){const t=s;return await oC(t),(await Sp(t,e)).token}async function oC(s){const{registrationPromise:e}=await bp(s);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(s){if(!s||!s.options)throw Sm("App Configuration");if(!s.name)throw Sm("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!s.options[t])throw Sm(t);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function Sm(s){return na.create("missing-app-config-values",{valueName:s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT="installations",cC="installations-internal",uC=s=>{const e=s.getProvider("app").getImmediate(),t=lC(e),r=mr(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},hC=s=>{const e=s.getProvider("app").getImmediate(),t=mr(e,OT).getImmediate();return{getId:()=>rC(t),getToken:o=>aC(t,o)}};function dC(){os(new Kn(OT,uC,"PUBLIC")),os(new Kn(cC,hC,"PRIVATE"))}dC();An(pT,Tp);An(pT,Tp,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h="analytics",fC="firebase_id",mC="origin",pC=60*1e3,gC="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",wp="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bn=new Hh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Vn=new da("analytics","Analytics",yC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(s){if(!s.startsWith(wp)){const e=Vn.create("invalid-gtag-resource",{gtagURL:s});return bn.warn(e.message),""}return s}function MT(s){return Promise.all(s.map(e=>e.catch(t=>t)))}function _C(s,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(s,e)),t}function EC(s,e){const t=_C("firebase-js-sdk-policy",{createScriptURL:vC}),r=document.createElement("script"),o=`${wp}?l=${s}&id=${e}`;r.src=t?t?.createScriptURL(o):o,r.async=!0,document.head.appendChild(r)}function TC(s){let e=[];return Array.isArray(window[s])?e=window[s]:window[s]=e,e}async function AC(s,e,t,r,o,c){const h=r[o];try{if(h)await e[h];else{const f=(await MT(t)).find(m=>m.measurementId===o);f&&await e[f.appId]}}catch(g){bn.error(g)}s("config",o,c)}async function bC(s,e,t,r,o){try{let c=[];if(o&&o.send_to){let h=o.send_to;Array.isArray(h)||(h=[h]);const g=await MT(t);for(const f of h){const m=g.find(T=>T.measurementId===f),v=m&&e[m.appId];if(v)c.push(v);else{c=[];break}}}c.length===0&&(c=Object.values(e)),await Promise.all(c),s("event",r,o||{})}catch(c){bn.error(c)}}function SC(s,e,t,r){async function o(c,...h){try{if(c==="event"){const[g,f]=h;await bC(s,e,t,g,f)}else if(c==="config"){const[g,f]=h;await AC(s,e,t,r,g,f)}else if(c==="consent"){const[g,f]=h;s("consent",g,f)}else if(c==="get"){const[g,f,m]=h;s("get",g,f,m)}else if(c==="set"){const[g]=h;s("set",g)}else s(c,...h)}catch(g){bn.error(g)}}return o}function wC(s,e,t,r,o){let c=function(...h){window[r].push(arguments)};return window[o]&&typeof window[o]=="function"&&(c=window[o]),window[o]=SC(c,s,e,t),{gtagCore:c,wrappedGtag:window[o]}}function RC(s){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(wp)&&t.src.includes(s))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=30,CC=1e3;class NC{constructor(e={},t=CC){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const jT=new NC;function xC(s){return new Headers({Accept:"application/json","x-goog-api-key":s})}async function DC(s){var e;const{appId:t,apiKey:r}=s,o={method:"GET",headers:xC(r)},c=gC.replace("{app-id}",t),h=await fetch(c,o);if(h.status!==200&&h.status!==304){let g="";try{const f=await h.json();!((e=f.error)===null||e===void 0)&&e.message&&(g=f.error.message)}catch{}throw Vn.create("config-fetch-failed",{httpStatus:h.status,responseMessage:g})}return h.json()}async function OC(s,e=jT,t){const{appId:r,apiKey:o,measurementId:c}=s.options;if(!r)throw Vn.create("no-app-id");if(!o){if(c)return{measurementId:c,appId:r};throw Vn.create("no-api-key")}const h=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},g=new VC;return setTimeout(async()=>{g.abort()},pC),VT({appId:r,apiKey:o,measurementId:c},h,g,e)}async function VT(s,{throttleEndTimeMillis:e,backoffCount:t},r,o=jT){var c;const{appId:h,measurementId:g}=s;try{await MC(r,e)}catch(f){if(g)return bn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${g} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:h,measurementId:g};throw f}try{const f=await DC(s);return o.deleteThrottleMetadata(h),f}catch(f){const m=f;if(!jC(m)){if(o.deleteThrottleMetadata(h),g)return bn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${g} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:h,measurementId:g};throw f}const v=Number((c=m?.customData)===null||c===void 0?void 0:c.httpStatus)===503?Z_(t,o.intervalMillis,IC):Z_(t,o.intervalMillis),T={throttleEndTimeMillis:Date.now()+v,backoffCount:t+1};return o.setThrottleMetadata(h,T),bn.debug(`Calling attemptFetch again in ${v} millis`),VT(s,T,r,o)}}function MC(s,e){return new Promise((t,r)=>{const o=Math.max(e-Date.now(),0),c=setTimeout(t,o);s.addEventListener(()=>{clearTimeout(c),r(Vn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function jC(s){if(!(s instanceof Xn)||!s.customData)return!1;const e=Number(s.customData.httpStatus);return e===429||e===500||e===503||e===504}class VC{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function PC(s,e,t,r,o){if(o&&o.global){s("event",t,r);return}else{const c=await e,h=Object.assign(Object.assign({},r),{send_to:c});s("event",t,h)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kC(){if(oT())try{await lT()}catch(s){return bn.warn(Vn.create("indexeddb-unavailable",{errorInfo:s?.toString()}).message),!1}else return bn.warn(Vn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function LC(s,e,t,r,o,c,h){var g;const f=OC(s);f.then(O=>{t[O.measurementId]=O.appId,s.options.measurementId&&O.measurementId!==s.options.measurementId&&bn.warn(`The measurement ID in the local Firebase config (${s.options.measurementId}) does not match the measurement ID fetched from the server (${O.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(O=>bn.error(O)),e.push(f);const m=kC().then(O=>{if(O)return r.getId()}),[v,T]=await Promise.all([f,m]);RC(c)||EC(c,v.measurementId),o("js",new Date);const b=(g=h?.config)!==null&&g!==void 0?g:{};return b[mC]="firebase",b.update=!0,T!=null&&(b[fC]=T),o("config",v.measurementId,b),v.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e){this.app=e}_delete(){return delete ec[this.app.options.appId],Promise.resolve()}}let ec={},l0=[];const c0={};let wm="dataLayer",zC="gtag",u0,PT,h0=!1;function BC(){const s=[];if(aT()&&s.push("This is a browser extension environment."),oR()||s.push("Cookies are not available."),s.length>0){const e=s.map((r,o)=>`(${o+1}) ${r}`).join(" "),t=Vn.create("invalid-analytics-context",{errorInfo:e});bn.warn(t.message)}}function FC(s,e,t){BC();const r=s.options.appId;if(!r)throw Vn.create("no-app-id");if(!s.options.apiKey)if(s.options.measurementId)bn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${s.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Vn.create("no-api-key");if(ec[r]!=null)throw Vn.create("already-exists",{id:r});if(!h0){TC(wm);const{wrappedGtag:c,gtagCore:h}=wC(ec,l0,c0,wm,zC);PT=c,u0=h,h0=!0}return ec[r]=LC(s,l0,c0,e,u0,wm,t),new UC(s)}function HC(s=qh()){s=Ft(s);const e=mr(s,_h);return e.isInitialized()?e.getImmediate():qC(s)}function qC(s,e={}){const t=mr(s,_h);if(t.isInitialized()){const o=t.getImmediate();if(or(e,t.getOptions()))return o;throw Vn.create("already-initialized")}return t.initialize({options:e})}function GC(s,e,t,r){s=Ft(s),PC(PT,ec[s.app.options.appId],e,t,r).catch(o=>bn.error(o))}const d0="@firebase/analytics",f0="0.10.16";function $C(){os(new Kn(_h,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return FC(r,o,t)},"PUBLIC")),os(new Kn("analytics-internal",s,"PRIVATE")),An(d0,f0),An(d0,f0,"esm2017");function s(e){try{const t=e.getProvider(_h).getImmediate();return{logEvent:(r,o,c)=>GC(t,r,o,c)}}catch(t){throw Vn.create("interop-component-reg-failed",{reason:t})}}}$C();var m0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rr,kT;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,R){function N(){}N.prototype=R.prototype,D.D=R.prototype,D.prototype=new N,D.prototype.constructor=D,D.C=function(M,I,x){for(var S=Array(arguments.length-2),W=2;W<arguments.length;W++)S[W-2]=arguments[W];return R.prototype[I].apply(M,S)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,R,N){N||(N=0);var M=Array(16);if(typeof R=="string")for(var I=0;16>I;++I)M[I]=R.charCodeAt(N++)|R.charCodeAt(N++)<<8|R.charCodeAt(N++)<<16|R.charCodeAt(N++)<<24;else for(I=0;16>I;++I)M[I]=R[N++]|R[N++]<<8|R[N++]<<16|R[N++]<<24;R=D.g[0],N=D.g[1],I=D.g[2];var x=D.g[3],S=R+(x^N&(I^x))+M[0]+3614090360&4294967295;R=N+(S<<7&4294967295|S>>>25),S=x+(I^R&(N^I))+M[1]+3905402710&4294967295,x=R+(S<<12&4294967295|S>>>20),S=I+(N^x&(R^N))+M[2]+606105819&4294967295,I=x+(S<<17&4294967295|S>>>15),S=N+(R^I&(x^R))+M[3]+3250441966&4294967295,N=I+(S<<22&4294967295|S>>>10),S=R+(x^N&(I^x))+M[4]+4118548399&4294967295,R=N+(S<<7&4294967295|S>>>25),S=x+(I^R&(N^I))+M[5]+1200080426&4294967295,x=R+(S<<12&4294967295|S>>>20),S=I+(N^x&(R^N))+M[6]+2821735955&4294967295,I=x+(S<<17&4294967295|S>>>15),S=N+(R^I&(x^R))+M[7]+4249261313&4294967295,N=I+(S<<22&4294967295|S>>>10),S=R+(x^N&(I^x))+M[8]+1770035416&4294967295,R=N+(S<<7&4294967295|S>>>25),S=x+(I^R&(N^I))+M[9]+2336552879&4294967295,x=R+(S<<12&4294967295|S>>>20),S=I+(N^x&(R^N))+M[10]+4294925233&4294967295,I=x+(S<<17&4294967295|S>>>15),S=N+(R^I&(x^R))+M[11]+2304563134&4294967295,N=I+(S<<22&4294967295|S>>>10),S=R+(x^N&(I^x))+M[12]+1804603682&4294967295,R=N+(S<<7&4294967295|S>>>25),S=x+(I^R&(N^I))+M[13]+4254626195&4294967295,x=R+(S<<12&4294967295|S>>>20),S=I+(N^x&(R^N))+M[14]+2792965006&4294967295,I=x+(S<<17&4294967295|S>>>15),S=N+(R^I&(x^R))+M[15]+1236535329&4294967295,N=I+(S<<22&4294967295|S>>>10),S=R+(I^x&(N^I))+M[1]+4129170786&4294967295,R=N+(S<<5&4294967295|S>>>27),S=x+(N^I&(R^N))+M[6]+3225465664&4294967295,x=R+(S<<9&4294967295|S>>>23),S=I+(R^N&(x^R))+M[11]+643717713&4294967295,I=x+(S<<14&4294967295|S>>>18),S=N+(x^R&(I^x))+M[0]+3921069994&4294967295,N=I+(S<<20&4294967295|S>>>12),S=R+(I^x&(N^I))+M[5]+3593408605&4294967295,R=N+(S<<5&4294967295|S>>>27),S=x+(N^I&(R^N))+M[10]+38016083&4294967295,x=R+(S<<9&4294967295|S>>>23),S=I+(R^N&(x^R))+M[15]+3634488961&4294967295,I=x+(S<<14&4294967295|S>>>18),S=N+(x^R&(I^x))+M[4]+3889429448&4294967295,N=I+(S<<20&4294967295|S>>>12),S=R+(I^x&(N^I))+M[9]+568446438&4294967295,R=N+(S<<5&4294967295|S>>>27),S=x+(N^I&(R^N))+M[14]+3275163606&4294967295,x=R+(S<<9&4294967295|S>>>23),S=I+(R^N&(x^R))+M[3]+4107603335&4294967295,I=x+(S<<14&4294967295|S>>>18),S=N+(x^R&(I^x))+M[8]+1163531501&4294967295,N=I+(S<<20&4294967295|S>>>12),S=R+(I^x&(N^I))+M[13]+2850285829&4294967295,R=N+(S<<5&4294967295|S>>>27),S=x+(N^I&(R^N))+M[2]+4243563512&4294967295,x=R+(S<<9&4294967295|S>>>23),S=I+(R^N&(x^R))+M[7]+1735328473&4294967295,I=x+(S<<14&4294967295|S>>>18),S=N+(x^R&(I^x))+M[12]+2368359562&4294967295,N=I+(S<<20&4294967295|S>>>12),S=R+(N^I^x)+M[5]+4294588738&4294967295,R=N+(S<<4&4294967295|S>>>28),S=x+(R^N^I)+M[8]+2272392833&4294967295,x=R+(S<<11&4294967295|S>>>21),S=I+(x^R^N)+M[11]+1839030562&4294967295,I=x+(S<<16&4294967295|S>>>16),S=N+(I^x^R)+M[14]+4259657740&4294967295,N=I+(S<<23&4294967295|S>>>9),S=R+(N^I^x)+M[1]+2763975236&4294967295,R=N+(S<<4&4294967295|S>>>28),S=x+(R^N^I)+M[4]+1272893353&4294967295,x=R+(S<<11&4294967295|S>>>21),S=I+(x^R^N)+M[7]+4139469664&4294967295,I=x+(S<<16&4294967295|S>>>16),S=N+(I^x^R)+M[10]+3200236656&4294967295,N=I+(S<<23&4294967295|S>>>9),S=R+(N^I^x)+M[13]+681279174&4294967295,R=N+(S<<4&4294967295|S>>>28),S=x+(R^N^I)+M[0]+3936430074&4294967295,x=R+(S<<11&4294967295|S>>>21),S=I+(x^R^N)+M[3]+3572445317&4294967295,I=x+(S<<16&4294967295|S>>>16),S=N+(I^x^R)+M[6]+76029189&4294967295,N=I+(S<<23&4294967295|S>>>9),S=R+(N^I^x)+M[9]+3654602809&4294967295,R=N+(S<<4&4294967295|S>>>28),S=x+(R^N^I)+M[12]+3873151461&4294967295,x=R+(S<<11&4294967295|S>>>21),S=I+(x^R^N)+M[15]+530742520&4294967295,I=x+(S<<16&4294967295|S>>>16),S=N+(I^x^R)+M[2]+3299628645&4294967295,N=I+(S<<23&4294967295|S>>>9),S=R+(I^(N|~x))+M[0]+4096336452&4294967295,R=N+(S<<6&4294967295|S>>>26),S=x+(N^(R|~I))+M[7]+1126891415&4294967295,x=R+(S<<10&4294967295|S>>>22),S=I+(R^(x|~N))+M[14]+2878612391&4294967295,I=x+(S<<15&4294967295|S>>>17),S=N+(x^(I|~R))+M[5]+4237533241&4294967295,N=I+(S<<21&4294967295|S>>>11),S=R+(I^(N|~x))+M[12]+1700485571&4294967295,R=N+(S<<6&4294967295|S>>>26),S=x+(N^(R|~I))+M[3]+2399980690&4294967295,x=R+(S<<10&4294967295|S>>>22),S=I+(R^(x|~N))+M[10]+4293915773&4294967295,I=x+(S<<15&4294967295|S>>>17),S=N+(x^(I|~R))+M[1]+2240044497&4294967295,N=I+(S<<21&4294967295|S>>>11),S=R+(I^(N|~x))+M[8]+1873313359&4294967295,R=N+(S<<6&4294967295|S>>>26),S=x+(N^(R|~I))+M[15]+4264355552&4294967295,x=R+(S<<10&4294967295|S>>>22),S=I+(R^(x|~N))+M[6]+2734768916&4294967295,I=x+(S<<15&4294967295|S>>>17),S=N+(x^(I|~R))+M[13]+1309151649&4294967295,N=I+(S<<21&4294967295|S>>>11),S=R+(I^(N|~x))+M[4]+4149444226&4294967295,R=N+(S<<6&4294967295|S>>>26),S=x+(N^(R|~I))+M[11]+3174756917&4294967295,x=R+(S<<10&4294967295|S>>>22),S=I+(R^(x|~N))+M[2]+718787259&4294967295,I=x+(S<<15&4294967295|S>>>17),S=N+(x^(I|~R))+M[9]+3951481745&4294967295,D.g[0]=D.g[0]+R&4294967295,D.g[1]=D.g[1]+(I+(S<<21&4294967295|S>>>11))&4294967295,D.g[2]=D.g[2]+I&4294967295,D.g[3]=D.g[3]+x&4294967295}r.prototype.u=function(D,R){R===void 0&&(R=D.length);for(var N=R-this.blockSize,M=this.B,I=this.h,x=0;x<R;){if(I==0)for(;x<=N;)o(this,D,x),x+=this.blockSize;if(typeof D=="string"){for(;x<R;)if(M[I++]=D.charCodeAt(x++),I==this.blockSize){o(this,M),I=0;break}}else for(;x<R;)if(M[I++]=D[x++],I==this.blockSize){o(this,M),I=0;break}}this.h=I,this.o+=R},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var R=1;R<D.length-8;++R)D[R]=0;var N=8*this.o;for(R=D.length-8;R<D.length;++R)D[R]=N&255,N/=256;for(this.u(D),D=Array(16),R=N=0;4>R;++R)for(var M=0;32>M;M+=8)D[N++]=this.g[R]>>>M&255;return D};function c(D,R){var N=g;return Object.prototype.hasOwnProperty.call(N,D)?N[D]:N[D]=R(D)}function h(D,R){this.h=R;for(var N=[],M=!0,I=D.length-1;0<=I;I--){var x=D[I]|0;M&&x==R||(N[I]=x,M=!1)}this.g=N}var g={};function f(D){return-128<=D&&128>D?c(D,function(R){return new h([R|0],0>R?-1:0)}):new h([D|0],0>D?-1:0)}function m(D){if(isNaN(D)||!isFinite(D))return T;if(0>D)return V(m(-D));for(var R=[],N=1,M=0;D>=N;M++)R[M]=D/N|0,N*=4294967296;return new h(R,0)}function v(D,R){if(D.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(D.charAt(0)=="-")return V(v(D.substring(1),R));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=m(Math.pow(R,8)),M=T,I=0;I<D.length;I+=8){var x=Math.min(8,D.length-I),S=parseInt(D.substring(I,I+x),R);8>x?(x=m(Math.pow(R,x)),M=M.j(x).add(m(S))):(M=M.j(N),M=M.add(m(S)))}return M}var T=f(0),b=f(1),O=f(16777216);s=h.prototype,s.m=function(){if(U(this))return-V(this).m();for(var D=0,R=1,N=0;N<this.g.length;N++){var M=this.i(N);D+=(0<=M?M:4294967296+M)*R,R*=4294967296}return D},s.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(k(this))return"0";if(U(this))return"-"+V(this).toString(D);for(var R=m(Math.pow(D,6)),N=this,M="";;){var I=ae(N,R).g;N=re(N,I.j(R));var x=((0<N.g.length?N.g[0]:N.h)>>>0).toString(D);if(N=I,k(N))return x+M;for(;6>x.length;)x="0"+x;M=x+M}},s.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function k(D){if(D.h!=0)return!1;for(var R=0;R<D.g.length;R++)if(D.g[R]!=0)return!1;return!0}function U(D){return D.h==-1}s.l=function(D){return D=re(this,D),U(D)?-1:k(D)?0:1};function V(D){for(var R=D.g.length,N=[],M=0;M<R;M++)N[M]=~D.g[M];return new h(N,~D.h).add(b)}s.abs=function(){return U(this)?V(this):this},s.add=function(D){for(var R=Math.max(this.g.length,D.g.length),N=[],M=0,I=0;I<=R;I++){var x=M+(this.i(I)&65535)+(D.i(I)&65535),S=(x>>>16)+(this.i(I)>>>16)+(D.i(I)>>>16);M=S>>>16,x&=65535,S&=65535,N[I]=S<<16|x}return new h(N,N[N.length-1]&-2147483648?-1:0)};function re(D,R){return D.add(V(R))}s.j=function(D){if(k(this)||k(D))return T;if(U(this))return U(D)?V(this).j(V(D)):V(V(this).j(D));if(U(D))return V(this.j(V(D)));if(0>this.l(O)&&0>D.l(O))return m(this.m()*D.m());for(var R=this.g.length+D.g.length,N=[],M=0;M<2*R;M++)N[M]=0;for(M=0;M<this.g.length;M++)for(var I=0;I<D.g.length;I++){var x=this.i(M)>>>16,S=this.i(M)&65535,W=D.i(I)>>>16,ue=D.i(I)&65535;N[2*M+2*I]+=S*ue,J(N,2*M+2*I),N[2*M+2*I+1]+=x*ue,J(N,2*M+2*I+1),N[2*M+2*I+1]+=S*W,J(N,2*M+2*I+1),N[2*M+2*I+2]+=x*W,J(N,2*M+2*I+2)}for(M=0;M<R;M++)N[M]=N[2*M+1]<<16|N[2*M];for(M=R;M<2*R;M++)N[M]=0;return new h(N,0)};function J(D,R){for(;(D[R]&65535)!=D[R];)D[R+1]+=D[R]>>>16,D[R]&=65535,R++}function K(D,R){this.g=D,this.h=R}function ae(D,R){if(k(R))throw Error("division by zero");if(k(D))return new K(T,T);if(U(D))return R=ae(V(D),R),new K(V(R.g),V(R.h));if(U(R))return R=ae(D,V(R)),new K(V(R.g),R.h);if(30<D.g.length){if(U(D)||U(R))throw Error("slowDivide_ only works with positive integers.");for(var N=b,M=R;0>=M.l(D);)N=le(N),M=le(M);var I=ye(N,1),x=ye(M,1);for(M=ye(M,2),N=ye(N,2);!k(M);){var S=x.add(M);0>=S.l(D)&&(I=I.add(N),x=S),M=ye(M,1),N=ye(N,1)}return R=re(D,I.j(R)),new K(I,R)}for(I=T;0<=D.l(R);){for(N=Math.max(1,Math.floor(D.m()/R.m())),M=Math.ceil(Math.log(N)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),x=m(N),S=x.j(R);U(S)||0<S.l(D);)N-=M,x=m(N),S=x.j(R);k(x)&&(x=b),I=I.add(x),D=re(D,S)}return new K(I,D)}s.A=function(D){return ae(this,D).h},s.and=function(D){for(var R=Math.max(this.g.length,D.g.length),N=[],M=0;M<R;M++)N[M]=this.i(M)&D.i(M);return new h(N,this.h&D.h)},s.or=function(D){for(var R=Math.max(this.g.length,D.g.length),N=[],M=0;M<R;M++)N[M]=this.i(M)|D.i(M);return new h(N,this.h|D.h)},s.xor=function(D){for(var R=Math.max(this.g.length,D.g.length),N=[],M=0;M<R;M++)N[M]=this.i(M)^D.i(M);return new h(N,this.h^D.h)};function le(D){for(var R=D.g.length+1,N=[],M=0;M<R;M++)N[M]=D.i(M)<<1|D.i(M-1)>>>31;return new h(N,D.h)}function ye(D,R){var N=R>>5;R%=32;for(var M=D.g.length-N,I=[],x=0;x<M;x++)I[x]=0<R?D.i(x+N)>>>R|D.i(x+N+1)<<32-R:D.i(x+N);return new h(I,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,kT=r,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=m,h.fromString=v,rr=h}).apply(typeof m0<"u"?m0:typeof self<"u"?self:typeof window<"u"?window:{});var Xu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var LT,Kl,UT,sh,qm,zT,BT,FT;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,_,E){return u==Array.prototype||u==Object.prototype||(u[_]=E.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xu=="object"&&Xu];for(var _=0;_<u.length;++_){var E=u[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function o(u,_){if(_)e:{var E=r;u=u.split(".");for(var C=0;C<u.length-1;C++){var F=u[C];if(!(F in E))break e;E=E[F]}u=u[u.length-1],C=E[u],_=_(C),_!=C&&_!=null&&e(E,u,{configurable:!0,writable:!0,value:_})}}function c(u,_){u instanceof String&&(u+="");var E=0,C=!1,F={next:function(){if(!C&&E<u.length){var Q=E++;return{value:_(Q,u[Q]),done:!1}}return C=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}o("Array.prototype.values",function(u){return u||function(){return c(this,function(_,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},g=this||self;function f(u){var _=typeof u;return _=_!="object"?_:u?Array.isArray(u)?"array":_:"null",_=="array"||_=="object"&&typeof u.length=="number"}function m(u){var _=typeof u;return _=="object"&&u!=null||_=="function"}function v(u,_,E){return u.call.apply(u.bind,arguments)}function T(u,_,E){if(!u)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,C),u.apply(_,F)}}return function(){return u.apply(_,arguments)}}function b(u,_,E){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:T,b.apply(null,arguments)}function O(u,_){var E=Array.prototype.slice.call(arguments,1);return function(){var C=E.slice();return C.push.apply(C,arguments),u.apply(this,C)}}function k(u,_){function E(){}E.prototype=_.prototype,u.aa=_.prototype,u.prototype=new E,u.prototype.constructor=u,u.Qb=function(C,F,Q){for(var de=Array(arguments.length-2),He=2;He<arguments.length;He++)de[He-2]=arguments[He];return _.prototype[F].apply(C,de)}}function U(u){const _=u.length;if(0<_){const E=Array(_);for(let C=0;C<_;C++)E[C]=u[C];return E}return[]}function V(u,_){for(let E=1;E<arguments.length;E++){const C=arguments[E];if(f(C)){const F=u.length||0,Q=C.length||0;u.length=F+Q;for(let de=0;de<Q;de++)u[F+de]=C[de]}else u.push(C)}}class re{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function J(u){return/^[\s\xa0]*$/.test(u)}function K(){var u=g.navigator;return u&&(u=u.userAgent)?u:""}function ae(u){return ae[" "](u),u}ae[" "]=function(){};var le=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function ye(u,_,E){for(const C in u)_.call(E,u[C],C,u)}function D(u,_){for(const E in u)_.call(void 0,u[E],E,u)}function R(u){const _={};for(const E in u)_[E]=u[E];return _}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(u,_){let E,C;for(let F=1;F<arguments.length;F++){C=arguments[F];for(E in C)u[E]=C[E];for(let Q=0;Q<N.length;Q++)E=N[Q],Object.prototype.hasOwnProperty.call(C,E)&&(u[E]=C[E])}}function I(u){var _=1;u=u.split(":");const E=[];for(;0<_&&u.length;)E.push(u.shift()),_--;return u.length&&E.push(u.join(":")),E}function x(u){g.setTimeout(()=>{throw u},0)}function S(){var u=Ee;let _=null;return u.g&&(_=u.g,u.g=u.g.next,u.g||(u.h=null),_.next=null),_}class W{constructor(){this.h=this.g=null}add(_,E){const C=ue.get();C.set(_,E),this.h?this.h.next=C:this.g=C,this.h=C}}var ue=new re(()=>new B,u=>u.reset());class B{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,fe=!1,Ee=new W,P=()=>{const u=g.Promise.resolve(void 0);ee=()=>{u.then(te)}};var te=()=>{for(var u;u=S();){try{u.h.call(u.g)}catch(E){x(E)}var _=ue;_.j(u),100>_.h&&(_.h++,u.next=_.g,_.g=u)}fe=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(u,_){this.type=u,this.g=this.target=_,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var ve=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var u=!1,_=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const E=()=>{};g.addEventListener("test",E,_),g.removeEventListener("test",E,_)}catch{}return u}();function Oe(u,_){if(oe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var E=this.type=u.type,C=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=_,_=u.relatedTarget){if(le){e:{try{ae(_.nodeName);var F=!0;break e}catch{}F=!1}F||(_=null)}}else E=="mouseover"?_=u.fromElement:E=="mouseout"&&(_=u.toElement);this.relatedTarget=_,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:we[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Oe.aa.h.call(this)}}k(Oe,oe);var we={2:"touch",3:"pen",4:"mouse"};Oe.prototype.h=function(){Oe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var vt="closure_listenable_"+(1e6*Math.random()|0),We=0;function Pn(u,_,E,C,F){this.listener=u,this.proxy=null,this.src=_,this.type=E,this.capture=!!C,this.ha=F,this.key=++We,this.da=this.fa=!1}function cs(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function wn(u){this.src=u,this.g={},this.h=0}wn.prototype.add=function(u,_,E,C,F){var Q=u.toString();u=this.g[Q],u||(u=this.g[Q]=[],this.h++);var de=ks(u,_,C,F);return-1<de?(_=u[de],E||(_.fa=!1)):(_=new Pn(_,this.src,Q,!!C,F),_.fa=E,u.push(_)),_};function Ps(u,_){var E=_.type;if(E in u.g){var C=u.g[E],F=Array.prototype.indexOf.call(C,_,void 0),Q;(Q=0<=F)&&Array.prototype.splice.call(C,F,1),Q&&(cs(_),u.g[E].length==0&&(delete u.g[E],u.h--))}}function ks(u,_,E,C){for(var F=0;F<u.length;++F){var Q=u[F];if(!Q.da&&Q.listener==_&&Q.capture==!!E&&Q.ha==C)return F}return-1}var Ls="closure_lm_"+(1e6*Math.random()|0),yr={};function ya(u,_,E,C,F){if(Array.isArray(_)){for(var Q=0;Q<_.length;Q++)ya(u,_[Q],E,C,F);return null}return E=Me(E),u&&u[vt]?u.K(_,E,m(C)?!!C.capture:!1,F):mn(u,_,E,!1,C,F)}function mn(u,_,E,C,F,Q){if(!_)throw Error("Invalid event type");var de=m(F)?!!F.capture:!!F,He=Ti(u);if(He||(u[Ls]=He=new wn(u)),E=He.add(_,E,C,de,Q),E.proxy)return E;if(C=Lo(),E.proxy=C,C.src=u,C.listener=E,u.addEventListener)ve||(F=de),F===void 0&&(F=!1),u.addEventListener(_.toString(),C,F);else if(u.attachEvent)u.attachEvent(Us(_.toString()),C);else if(u.addListener&&u.removeListener)u.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Lo(){function u(E){return _.call(u.src,u.listener,E)}const _=Uo;return u}function vr(u,_,E,C,F){if(Array.isArray(_))for(var Q=0;Q<_.length;Q++)vr(u,_[Q],E,C,F);else C=m(C)?!!C.capture:!!C,E=Me(E),u&&u[vt]?(u=u.i,_=String(_).toString(),_ in u.g&&(Q=u.g[_],E=ks(Q,E,C,F),-1<E&&(cs(Q[E]),Array.prototype.splice.call(Q,E,1),Q.length==0&&(delete u.g[_],u.h--)))):u&&(u=Ti(u))&&(_=u.g[_.toString()],u=-1,_&&(u=ks(_,E,C,F)),(E=-1<u?_[u]:null)&&Ei(E))}function Ei(u){if(typeof u!="number"&&u&&!u.da){var _=u.src;if(_&&_[vt])Ps(_.i,u);else{var E=u.type,C=u.proxy;_.removeEventListener?_.removeEventListener(E,C,u.capture):_.detachEvent?_.detachEvent(Us(E),C):_.addListener&&_.removeListener&&_.removeListener(C),(E=Ti(_))?(Ps(E,u),E.h==0&&(E.src=null,_[Ls]=null)):cs(u)}}}function Us(u){return u in yr?yr[u]:yr[u]="on"+u}function Uo(u,_){if(u.da)u=!0;else{_=new Oe(_,this);var E=u.listener,C=u.ha||u.src;u.fa&&Ei(u),u=E.call(C,_)}return u}function Ti(u){return u=u[Ls],u instanceof wn?u:null}var ce="__closure_events_fn_"+(1e9*Math.random()>>>0);function Me(u){return typeof u=="function"?u:(u[ce]||(u[ce]=function(_){return u.handleEvent(_)}),u[ce])}function Fe(){he.call(this),this.i=new wn(this),this.M=this,this.F=null}k(Fe,he),Fe.prototype[vt]=!0,Fe.prototype.removeEventListener=function(u,_,E,C){vr(this,u,_,E,C)};function Ne(u,_){var E,C=u.F;if(C)for(E=[];C;C=C.F)E.push(C);if(u=u.M,C=_.type||_,typeof _=="string")_=new oe(_,u);else if(_ instanceof oe)_.target=_.target||u;else{var F=_;_=new oe(C,u),M(_,F)}if(F=!0,E)for(var Q=E.length-1;0<=Q;Q--){var de=_.g=E[Q];F=ln(de,C,!0,_)&&F}if(de=_.g=u,F=ln(de,C,!0,_)&&F,F=ln(de,C,!1,_)&&F,E)for(Q=0;Q<E.length;Q++)de=_.g=E[Q],F=ln(de,C,!1,_)&&F}Fe.prototype.N=function(){if(Fe.aa.N.call(this),this.i){var u=this.i,_;for(_ in u.g){for(var E=u.g[_],C=0;C<E.length;C++)cs(E[C]);delete u.g[_],u.h--}}this.F=null},Fe.prototype.K=function(u,_,E,C){return this.i.add(String(u),_,!1,E,C)},Fe.prototype.L=function(u,_,E,C){return this.i.add(String(u),_,!0,E,C)};function ln(u,_,E,C){if(_=u.i.g[String(_)],!_)return!0;_=_.concat();for(var F=!0,Q=0;Q<_.length;++Q){var de=_[Q];if(de&&!de.da&&de.capture==E){var He=de.listener,Nt=de.ha||de.src;de.fa&&Ps(u.i,de),F=He.call(Nt,C)!==!1&&F}}return F&&!C.defaultPrevented}function Vt(u,_,E){if(typeof u=="function")E&&(u=b(u,E));else if(u&&typeof u.handleEvent=="function")u=b(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:g.setTimeout(u,_||0)}function va(u){u.g=Vt(()=>{u.g=null,u.i&&(u.i=!1,va(u))},u.l);const _=u.h;u.h=null,u.m.apply(null,_)}class pn extends he{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:va(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cn(u){he.call(this),this.h=u,this.g={}}k(cn,he);var _t=[];function Ht(u){ye(u.g,function(_,E){this.g.hasOwnProperty(E)&&Ei(_)},u),u.g={}}cn.prototype.N=function(){cn.aa.N.call(this),Ht(this)},cn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qt=g.JSON.stringify,_a=g.JSON.parse,_r=class{stringify(u){return g.JSON.stringify(u,void 0)}parse(u){return g.JSON.parse(u,void 0)}};function zo(){}zo.prototype.h=null;function Bo(u){return u.h||(u.h=u.i())}function Fo(){}var zs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bs(){oe.call(this,"d")}k(Bs,oe);function Ho(){oe.call(this,"c")}k(Ho,oe);var us={},qo=null;function Ai(){return qo=qo||new Fe}us.La="serverreachability";function Ea(u){oe.call(this,us.La,u)}k(Ea,oe);function bi(u){const _=Ai();Ne(_,new Ea(_))}us.STAT_EVENT="statevent";function Cc(u,_){oe.call(this,us.STAT_EVENT,u),this.stat=_}k(Cc,oe);function ot(u){const _=Ai();Ne(_,new Cc(_,u))}us.Ma="timingevent";function Ct(u,_){oe.call(this,us.Ma,u),this.size=_}k(Ct,oe);function Et(u,_){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){u()},_)}function kn(){this.g=!0}kn.prototype.xa=function(){this.g=!1};function Go(u,_,E,C,F,Q){u.info(function(){if(u.g)if(Q)for(var de="",He=Q.split("&"),Nt=0;Nt<He.length;Nt++){var qe=He[Nt].split("=");if(1<qe.length){var kt=qe[0];qe=qe[1];var xt=kt.split("_");de=2<=xt.length&&xt[1]=="type"?de+(kt+"="+qe+"&"):de+(kt+"=redacted&")}}else de=null;else de=Q;return"XMLHTTP REQ ("+C+") [attempt "+F+"]: "+_+`
`+E+`
`+de})}function fd(u,_,E,C,F,Q,de){u.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+F+"]: "+_+`
`+E+`
`+Q+" "+de})}function Si(u,_,E,C){u.info(function(){return"XMLHTTP TEXT ("+_+"): "+Er(u,E)+(C?" "+C:"")})}function Nc(u,_){u.info(function(){return"TIMEOUT: "+_})}kn.prototype.info=function(){};function Er(u,_){if(!u.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E){for(u=0;u<E.length;u++)if(Array.isArray(E[u])){var C=E[u];if(!(2>C.length)){var F=C[1];if(Array.isArray(F)&&!(1>F.length)){var Q=F[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var de=1;de<F.length;de++)F[de]=""}}}}return qt(E)}catch{return _}}var wi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Fs={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},hs;function ds(){}k(ds,zo),ds.prototype.g=function(){return new XMLHttpRequest},ds.prototype.i=function(){return{}},hs=new ds;function un(u,_,E,C){this.j=u,this.i=_,this.l=E,this.R=C||1,this.U=new cn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new mt}function mt(){this.i=null,this.g="",this.h=!1}var $o={},Ta={};function Zn(u,_,E){u.L=1,u.v=wr(Rn(_)),u.m=E,u.P=!0,Hs(u,null)}function Hs(u,_){u.F=Date.now(),Tr(u),u.A=Rn(u.v);var E=u.A,C=u.R;Array.isArray(C)||(C=[String(C)]),Jo(E.i,"t",C),u.C=0,E=u.j.J,u.h=new mt,u.g=Gc(u.j,E?_:null,!u.m),0<u.O&&(u.M=new pn(b(u.Y,u,u.g),u.O)),_=u.U,E=u.g,C=u.ca;var F="readystatechange";Array.isArray(F)||(F&&(_t[0]=F.toString()),F=_t);for(var Q=0;Q<F.length;Q++){var de=ya(E,F[Q],C||_.handleEvent,!1,_.h||_);if(!de)break;_.g[de.key]=de}_=u.H?R(u.H):{},u.m?(u.u||(u.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,_)):(u.u="GET",u.g.ea(u.A,u.u,null,_)),bi(),Go(u.i,u.u,u.A,u.l,u.R,u.m)}un.prototype.ca=function(u){u=u.target;const _=this.M;_&&Bn(u)==3?_.j():this.Y(u)},un.prototype.Y=function(u){try{if(u==this.g)e:{const xt=Bn(this.g);var _=this.g.Ba();const Zs=this.g.Z();if(!(3>xt)&&(xt!=3||this.g&&(this.h.h||this.g.oa()||kc(this.g)))){this.J||xt!=4||_==7||(_==8||0>=Zs?bi(3):bi(2)),Ri(this);var E=this.g.Z();this.X=E;t:if(xc(this)){var C=kc(this.g);u="";var F=C.length,Q=Bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gt(this),fs(this);var de="";break t}this.h.i=new g.TextDecoder}for(_=0;_<F;_++)this.h.h=!0,u+=this.h.i.decode(C[_],{stream:!(Q&&_==F-1)});C.length=0,this.h.g+=u,this.C=0,de=this.h.g}else de=this.g.oa();if(this.o=E==200,fd(this.i,this.u,this.A,this.l,this.R,xt,E),this.o){if(this.T&&!this.K){t:{if(this.g){var He,Nt=this.g;if((He=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!J(He)){var qe=He;break t}}qe=null}if(E=qe)Si(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ar(this,E);else{this.o=!1,this.s=3,ot(12),Gt(this),fs(this);break e}}if(this.P){E=!0;let $t;for(;!this.J&&this.C<de.length;)if($t=Dc(this,de),$t==Ta){xt==4&&(this.s=4,ot(14),E=!1),Si(this.i,this.l,null,"[Incomplete Response]");break}else if($t==$o){this.s=4,ot(15),Si(this.i,this.l,de,"[Invalid Chunk]"),E=!1;break}else Si(this.i,this.l,$t,null),Ar(this,$t);if(xc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xt!=4||de.length!=0||this.h.h||(this.s=1,ot(16),E=!1),this.o=this.o&&E,!E)Si(this.i,this.l,de,"[Invalid Chunked Response]"),Gt(this),fs(this);else if(0<de.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),Mr(kt),kt.M=!0,ot(11))}}else Si(this.i,this.l,de,null),Ar(this,de);xt==4&&Gt(this),this.o&&!this.J&&(xt==4?Fc(this.j,this):(this.o=!1,Tr(this)))}else vd(this.g),E==400&&0<de.indexOf("Unknown SID")?(this.s=3,ot(12)):(this.s=0,ot(13)),Gt(this),fs(this)}}}catch{}finally{}};function xc(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Dc(u,_){var E=u.C,C=_.indexOf(`
`,E);return C==-1?Ta:(E=Number(_.substring(E,C)),isNaN(E)?$o:(C+=1,C+E>_.length?Ta:(_=_.slice(C,C+E),u.C=C+E,_)))}un.prototype.cancel=function(){this.J=!0,Gt(this)};function Tr(u){u.S=Date.now()+u.I,Oc(u,u.I)}function Oc(u,_){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Et(b(u.ba,u),_)}function Ri(u){u.B&&(g.clearTimeout(u.B),u.B=null)}un.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Nc(this.i,this.A),this.L!=2&&(bi(),ot(17)),Gt(this),this.s=2,fs(this)):Oc(this,this.S-u)};function fs(u){u.j.G==0||u.J||Fc(u.j,u)}function Gt(u){Ri(u);var _=u.M;_&&typeof _.ma=="function"&&_.ma(),u.M=null,Ht(u.U),u.g&&(_=u.g,u.g=null,_.abort(),_.ma())}function Ar(u,_){try{var E=u.j;if(E.G!=0&&(E.g==u||Qo(E.h,u))){if(!u.K&&Qo(E.h,u)&&E.G==3){try{var C=E.Da.g.parse(_)}catch{C=null}if(Array.isArray(C)&&C.length==3){var F=C;if(F[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<u.F)Ma(E),Da(E);else break e;sl(E),ot(18)}}else E.za=F[1],0<E.za-E.T&&37500>F[2]&&E.F&&E.v==0&&!E.C&&(E.C=Et(b(E.Za,E),6e3));if(1>=ba(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Xs(E,11)}else if((u.K||E.g==u)&&Ma(E),!J(_))for(F=E.Da.g.parse(_),_=0;_<F.length;_++){let qe=F[_];if(E.T=qe[0],qe=qe[1],E.G==2)if(qe[0]=="c"){E.K=qe[1],E.ia=qe[2];const kt=qe[3];kt!=null&&(E.la=kt,E.j.info("VER="+E.la));const xt=qe[4];xt!=null&&(E.Aa=xt,E.j.info("SVER="+E.Aa));const Zs=qe[5];Zs!=null&&typeof Zs=="number"&&0<Zs&&(C=1.5*Zs,E.L=C,E.j.info("backChannelRequestTimeoutMs_="+C)),C=E;const $t=u.g;if($t){const Es=$t.g?$t.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Es){var Q=C.h;Q.g||Es.indexOf("spdy")==-1&&Es.indexOf("quic")==-1&&Es.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Sa(Q,Q.h),Q.h=null))}if(C.D){const rl=$t.g?$t.g.getResponseHeader("X-HTTP-Session-Id"):null;rl&&(C.ya=rl,et(C.I,C.D,rl))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-u.F,E.j.info("Handshake RTT: "+E.R+"ms")),C=E;var de=u;if(C.qa=qc(C,C.J?C.ia:null,C.W),de.K){hn(C.h,de);var He=de,Nt=C.L;Nt&&(He.I=Nt),He.B&&(Ri(He),Tr(He)),C.g=de}else zc(C);0<E.i.length&&Oa(E)}else qe[0]!="stop"&&qe[0]!="close"||Xs(E,7);else E.G==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?Xs(E,7):tl(E):qe[0]!="noop"&&E.l&&E.l.ta(qe),E.v=0)}}bi(4)}catch{}}var Mc=class{constructor(u,_){this.g=u,this.map=_}};function qs(u){this.l=u||10,g.PerformanceNavigationTiming?(u=g.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Aa(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ba(u){return u.h?1:u.g?u.g.size:0}function Qo(u,_){return u.h?u.h==_:u.g?u.g.has(_):!1}function Sa(u,_){u.g?u.g.add(_):u.h=_}function hn(u,_){u.h&&u.h==_?u.h=null:u.g&&u.g.has(_)&&u.g.delete(_)}qs.prototype.cancel=function(){if(this.i=Yo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Yo(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let _=u.i;for(const E of u.g.values())_=_.concat(E.D);return _}return U(u.i)}function md(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(f(u)){for(var _=[],E=u.length,C=0;C<E;C++)_.push(u[C]);return _}_=[],E=0;for(C in u)_[E++]=u[C];return _}function wa(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(f(u)||typeof u=="string"){var _=[];u=u.length;for(var E=0;E<u;E++)_.push(E);return _}_=[],E=0;for(const C in u)_[E++]=C;return _}}}function Ko(u,_){if(u.forEach&&typeof u.forEach=="function")u.forEach(_,void 0);else if(f(u)||typeof u=="string")Array.prototype.forEach.call(u,_,void 0);else for(var E=wa(u),C=md(u),F=C.length,Q=0;Q<F;Q++)_.call(void 0,C[Q],E&&E[Q],u)}var br=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pd(u,_){if(u){u=u.split("&");for(var E=0;E<u.length;E++){var C=u[E].indexOf("="),F=null;if(0<=C){var Q=u[E].substring(0,C);F=u[E].substring(C+1)}else Q=u[E];_(Q,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Tt(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Tt){this.h=u.h,Sr(this,u.j),this.o=u.o,this.g=u.g,Ii(this,u.s),this.l=u.l;var _=u.i,E=new $s;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),Gs(this,E),this.m=u.m}else u&&(_=String(u).match(br))?(this.h=!1,Sr(this,_[1]||"",!0),this.o=Ln(_[2]||""),this.g=Ln(_[3]||"",!0),Ii(this,_[4]),this.l=Ln(_[5]||"",!0),Gs(this,_[6]||"",!0),this.m=Ln(_[7]||"")):(this.h=!1,this.i=new $s(null,this.h))}Tt.prototype.toString=function(){var u=[],_=this.j;_&&u.push(Rr(_,Xo,!0),":");var E=this.g;return(E||_=="file")&&(u.push("//"),(_=this.o)&&u.push(Rr(_,Xo,!0),"@"),u.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&u.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&u.push("/"),u.push(Rr(E,E.charAt(0)=="/"?gd:Zo,!0))),(E=this.i.toString())&&u.push("?",E),(E=this.m)&&u.push("#",Rr(E,Ra)),u.join("")};function Rn(u){return new Tt(u)}function Sr(u,_,E){u.j=E?Ln(_,!0):_,u.j&&(u.j=u.j.replace(/:$/,""))}function Ii(u,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);u.s=_}else u.s=null}function Gs(u,_,E){_ instanceof $s?(u.i=_,Vc(u.i,u.h)):(E||(_=Rr(_,yd)),u.i=new $s(_,u.h))}function et(u,_,E){u.i.set(_,E)}function wr(u){return et(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ln(u,_){return u?_?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Rr(u,_,E){return typeof u=="string"?(u=encodeURI(u).replace(_,jc),E&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function jc(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Xo=/[#\/\?@]/g,Zo=/[#\?:]/g,gd=/[#\?]/g,yd=/[#\?@]/g,Ra=/#/g;function $s(u,_){this.h=this.g=null,this.i=u||null,this.j=!!_}function Un(u){u.g||(u.g=new Map,u.h=0,u.i&&pd(u.i,function(_,E){u.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}s=$s.prototype,s.add=function(u,_){Un(this),this.i=null,u=ms(this,u);var E=this.g.get(u);return E||this.g.set(u,E=[]),E.push(_),this.h+=1,this};function Qs(u,_){Un(u),_=ms(u,_),u.g.has(_)&&(u.i=null,u.h-=u.g.get(_).length,u.g.delete(_))}function Ys(u,_){return Un(u),_=ms(u,_),u.g.has(_)}s.forEach=function(u,_){Un(this),this.g.forEach(function(E,C){E.forEach(function(F){u.call(_,F,C,this)},this)},this)},s.na=function(){Un(this);const u=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let C=0;C<_.length;C++){const F=u[C];for(let Q=0;Q<F.length;Q++)E.push(_[C])}return E},s.V=function(u){Un(this);let _=[];if(typeof u=="string")Ys(this,u)&&(_=_.concat(this.g.get(ms(this,u))));else{u=Array.from(this.g.values());for(let E=0;E<u.length;E++)_=_.concat(u[E])}return _},s.set=function(u,_){return Un(this),this.i=null,u=ms(this,u),Ys(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[_]),this.h+=1,this},s.get=function(u,_){return u?(u=this.V(u),0<u.length?String(u[0]):_):_};function Jo(u,_,E){Qs(u,_),0<E.length&&(u.i=null,u.g.set(ms(u,_),U(E)),u.h+=E.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var C=_[E];const Q=encodeURIComponent(String(C)),de=this.V(C);for(C=0;C<de.length;C++){var F=Q;de[C]!==""&&(F+="="+encodeURIComponent(String(de[C]))),u.push(F)}}return this.i=u.join("&")};function ms(u,_){return _=String(_),u.j&&(_=_.toLowerCase()),_}function Vc(u,_){_&&!u.j&&(Un(u),u.i=null,u.g.forEach(function(E,C){var F=C.toLowerCase();C!=F&&(Qs(this,C),Jo(this,F,E))},u)),u.j=_}function Ir(u,_){const E=new kn;if(g.Image){const C=new Image;C.onload=O(zn,E,"TestLoadImage: loaded",!0,_,C),C.onerror=O(zn,E,"TestLoadImage: error",!1,_,C),C.onabort=O(zn,E,"TestLoadImage: abort",!1,_,C),C.ontimeout=O(zn,E,"TestLoadImage: timeout",!1,_,C),g.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=u}else _(!1)}function Jn(u,_){const E=new kn,C=new AbortController,F=setTimeout(()=>{C.abort(),zn(E,"TestPingServer: timeout",!1,_)},1e4);fetch(u,{signal:C.signal}).then(Q=>{clearTimeout(F),Q.ok?zn(E,"TestPingServer: ok",!0,_):zn(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(F),zn(E,"TestPingServer: error",!1,_)})}function zn(u,_,E,C,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),C(E)}catch{}}function Cr(){this.g=new _r}function ps(u,_,E){const C=E||"";try{Ko(u,function(F,Q){let de=F;m(F)&&(de=qt(F)),_.push(C+Q+"="+encodeURIComponent(de))})}catch(F){throw _.push(C+"type="+encodeURIComponent("_badmap")),F}}function Ci(u){this.l=u.Ub||null,this.j=u.eb||!1}k(Ci,zo),Ci.prototype.g=function(){return new Ks(this.l,this.j)},Ci.prototype.i=function(u){return function(){return u}}({});function Ks(u,_){Fe.call(this),this.D=u,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(Ks,Fe),s=Ks.prototype,s.open=function(u,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=_,this.readyState=1,ys(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(_.body=u),(this.D||g).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,gs(this)),this.readyState=0},s.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ys(this)),this.g&&(this.readyState=3,ys(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Wo(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Wo(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}s.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var _=u.value?u.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!u.done}))&&(this.response=this.responseText+=_)}u.done?gs(this):ys(this),this.readyState==3&&Wo(this)}},s.Ra=function(u){this.g&&(this.response=this.responseText=u,gs(this))},s.Qa=function(u){this.g&&(this.response=u,gs(this))},s.ga=function(){this.g&&gs(this)};function gs(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ys(u)}s.setRequestHeader=function(u,_){this.u.append(u,_)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,u.push(E[0]+": "+E[1]),E=_.next();return u.join(`\r
`)};function ys(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ks.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function el(u){let _="";return ye(u,function(E,C){_+=C,_+=":",_+=E,_+=`\r
`}),_}function Pt(u,_,E){e:{for(C in E){var C=!1;break e}C=!0}C||(E=el(E),typeof u=="string"?E!=null&&encodeURIComponent(String(E)):et(u,_,E))}function Ke(u){Fe.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(Ke,Fe);var Ia=/^https?$/i,Nr=["POST","PUT"];s=Ke.prototype,s.Ha=function(u){this.J=u},s.ea=function(u,_,E,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);_=_?_.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():hs.g(),this.v=this.o?Bo(this.o):Bo(hs),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(_,String(u),!0),this.B=!1}catch(Q){Pc(this,Q);return}if(u=E||"",E=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var F in C)E.set(F,C[F]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const Q of C.keys())E.set(Q,C.get(Q));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(E.keys()).find(Q=>Q.toLowerCase()=="content-type"),F=g.FormData&&u instanceof g.FormData,!(0<=Array.prototype.indexOf.call(Nr,_,void 0))||C||F||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,de]of E)this.g.setRequestHeader(Q,de);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xr(this),this.u=!0,this.g.send(u),this.u=!1}catch(Q){Pc(this,Q)}};function Pc(u,_){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=_,u.m=5,Ca(u),vs(u)}function Ca(u){u.A||(u.A=!0,Ne(u,"complete"),Ne(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ne(this,"complete"),Ne(this,"abort"),vs(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vs(this,!0)),Ke.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Na(this):this.bb())},s.bb=function(){Na(this)};function Na(u){if(u.h&&typeof h<"u"&&(!u.v[1]||Bn(u)!=4||u.Z()!=2)){if(u.u&&Bn(u)==4)Vt(u.Ea,0,u);else if(Ne(u,"readystatechange"),Bn(u)==4){u.h=!1;try{const de=u.Z();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var C;if(C=de===0){var F=String(u.D).match(br)[1]||null;!F&&g.self&&g.self.location&&(F=g.self.location.protocol.slice(0,-1)),C=!Ia.test(F?F.toLowerCase():"")}E=C}if(E)Ne(u,"complete"),Ne(u,"success");else{u.m=6;try{var Q=2<Bn(u)?u.g.statusText:""}catch{Q=""}u.l=Q+" ["+u.Z()+"]",Ca(u)}}finally{vs(u)}}}}function vs(u,_){if(u.g){xr(u);const E=u.g,C=u.v[0]?()=>{}:null;u.g=null,u.v=null,_||Ne(u,"ready");try{E.onreadystatechange=C}catch{}}}function xr(u){u.I&&(g.clearTimeout(u.I),u.I=null)}s.isActive=function(){return!!this.g};function Bn(u){return u.g?u.g.readyState:0}s.Z=function(){try{return 2<Bn(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(u){if(this.g){var _=this.g.responseText;return u&&_.indexOf(u)==0&&(_=_.substring(u.length)),_a(_)}};function kc(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function vd(u){const _={};u=(u.g&&2<=Bn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<u.length;C++){if(J(u[C]))continue;var E=I(u[C]);const F=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Q=_[F]||[];_[F]=Q,Q.push(E)}D(_,function(C){return C.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Dr(u,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[u]||_}function xa(u){this.Aa=0,this.i=[],this.j=new kn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Dr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Dr("baseRetryDelayMs",5e3,u),this.cb=Dr("retryDelaySeedMs",1e4,u),this.Wa=Dr("forwardChannelMaxRetries",2,u),this.wa=Dr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new qs(u&&u.concurrentRequestLimit),this.Da=new Cr,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=xa.prototype,s.la=8,s.G=1,s.connect=function(u,_,E,C){ot(0),this.W=u,this.H=_||{},E&&C!==void 0&&(this.H.OSID=E,this.H.OAID=C),this.F=this.X,this.I=qc(this,null,this.W),Oa(this)};function tl(u){if(Lc(u),u.G==3){var _=u.U++,E=Rn(u.I);if(et(E,"SID",u.K),et(E,"RID",_),et(E,"TYPE","terminate"),Or(u,E),_=new un(u,u.j,_),_.L=2,_.v=wr(Rn(E)),E=!1,g.navigator&&g.navigator.sendBeacon)try{E=g.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&g.Image&&(new Image().src=_.v,E=!0),E||(_.g=Gc(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Tr(_)}Hc(u)}function Da(u){u.g&&(Mr(u),u.g.cancel(),u.g=null)}function Lc(u){Da(u),u.u&&(g.clearTimeout(u.u),u.u=null),Ma(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&g.clearTimeout(u.s),u.s=null)}function Oa(u){if(!Aa(u.h)&&!u.s){u.s=!0;var _=u.Ga;ee||P(),fe||(ee(),fe=!0),Ee.add(_,u),u.B=0}}function _d(u,_){return ba(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=_.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Et(b(u.Ga,u,_),il(u,u.B)),u.B++,!0)}s.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const F=new un(this,this.j,u);let Q=this.o;if(this.S&&(Q?(Q=R(Q),M(Q,this.S)):Q=this.S),this.m!==null||this.O||(F.H=Q,Q=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var C=this.i[E];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(_+=C,4096<_){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=Uc(this,F,_),E=Rn(this.I),et(E,"RID",u),et(E,"CVER",22),this.D&&et(E,"X-HTTP-Session-Id",this.D),Or(this,E),Q&&(this.O?_="headers="+encodeURIComponent(String(el(Q)))+"&"+_:this.m&&Pt(E,this.m,Q)),Sa(this.h,F),this.Ua&&et(E,"TYPE","init"),this.P?(et(E,"$req",_),et(E,"SID","null"),F.T=!0,Zn(F,E,null)):Zn(F,E,_),this.G=2}}else this.G==3&&(u?nl(this,u):this.i.length==0||Aa(this.h)||nl(this))};function nl(u,_){var E;_?E=_.l:E=u.U++;const C=Rn(u.I);et(C,"SID",u.K),et(C,"RID",E),et(C,"AID",u.T),Or(u,C),u.m&&u.o&&Pt(C,u.m,u.o),E=new un(u,u.j,E,u.B+1),u.m===null&&(E.H=u.o),_&&(u.i=_.D.concat(u.i)),_=Uc(u,E,1e3),E.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Sa(u.h,E),Zn(E,C,_)}function Or(u,_){u.H&&ye(u.H,function(E,C){et(_,C,E)}),u.l&&Ko({},function(E,C){et(_,C,E)})}function Uc(u,_,E){E=Math.min(u.i.length,E);var C=u.l?b(u.l.Na,u.l,u):null;e:{var F=u.i;let Q=-1;for(;;){const de=["count="+E];Q==-1?0<E?(Q=F[0].g,de.push("ofs="+Q)):Q=0:de.push("ofs="+Q);let He=!0;for(let Nt=0;Nt<E;Nt++){let qe=F[Nt].g;const kt=F[Nt].map;if(qe-=Q,0>qe)Q=Math.max(0,F[Nt].g-100),He=!1;else try{ps(kt,de,"req"+qe+"_")}catch{C&&C(kt)}}if(He){C=de.join("&");break e}}}return u=u.i.splice(0,E),_.D=u,C}function zc(u){if(!u.g&&!u.u){u.Y=1;var _=u.Fa;ee||P(),fe||(ee(),fe=!0),Ee.add(_,u),u.v=0}}function sl(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Et(b(u.Fa,u),il(u,u.v)),u.v++,!0)}s.Fa=function(){if(this.u=null,Bc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Et(b(this.ab,this),u)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ot(10),Da(this),Bc(this))};function Mr(u){u.A!=null&&(g.clearTimeout(u.A),u.A=null)}function Bc(u){u.g=new un(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var _=Rn(u.qa);et(_,"RID","rpc"),et(_,"SID",u.K),et(_,"AID",u.T),et(_,"CI",u.F?"0":"1"),!u.F&&u.ja&&et(_,"TO",u.ja),et(_,"TYPE","xmlhttp"),Or(u,_),u.m&&u.o&&Pt(_,u.m,u.o),u.L&&(u.g.I=u.L);var E=u.g;u=u.ia,E.L=1,E.v=wr(Rn(_)),E.m=null,E.P=!0,Hs(E,u)}s.Za=function(){this.C!=null&&(this.C=null,Da(this),sl(this),ot(19))};function Ma(u){u.C!=null&&(g.clearTimeout(u.C),u.C=null)}function Fc(u,_){var E=null;if(u.g==_){Ma(u),Mr(u),u.g=null;var C=2}else if(Qo(u.h,_))E=_.D,hn(u.h,_),C=1;else return;if(u.G!=0){if(_.o)if(C==1){E=_.m?_.m.length:0,_=Date.now()-_.F;var F=u.B;C=Ai(),Ne(C,new Ct(C,E)),Oa(u)}else zc(u);else if(F=_.s,F==3||F==0&&0<_.X||!(C==1&&_d(u,_)||C==2&&sl(u)))switch(E&&0<E.length&&(_=u.h,_.i=_.i.concat(E)),F){case 1:Xs(u,5);break;case 4:Xs(u,10);break;case 3:Xs(u,6);break;default:Xs(u,2)}}}function il(u,_){let E=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(E*=2),E*_}function Xs(u,_){if(u.j.info("Error code "+_),_==2){var E=b(u.fb,u),C=u.Xa;const F=!C;C=new Tt(C||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||Sr(C,"https"),wr(C),F?Ir(C.toString(),E):Jn(C.toString(),E)}else ot(2);u.G=0,u.l&&u.l.sa(_),Hc(u),Lc(u)}s.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function Hc(u){if(u.G=0,u.ka=[],u.l){const _=Yo(u.h);(_.length!=0||u.i.length!=0)&&(V(u.ka,_),V(u.ka,u.i),u.h.i.length=0,U(u.i),u.i.length=0),u.l.ra()}}function qc(u,_,E){var C=E instanceof Tt?Rn(E):new Tt(E);if(C.g!="")_&&(C.g=_+"."+C.g),Ii(C,C.s);else{var F=g.location;C=F.protocol,_=_?_+"."+F.hostname:F.hostname,F=+F.port;var Q=new Tt(null);C&&Sr(Q,C),_&&(Q.g=_),F&&Ii(Q,F),E&&(Q.l=E),C=Q}return E=u.D,_=u.ya,E&&_&&et(C,E,_),et(C,"VER",u.la),Or(u,C),C}function Gc(u,_,E){if(_&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=u.Ca&&!u.pa?new Ke(new Ci({eb:E})):new Ke(u.pa),_.Ha(u.J),_}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function $c(){}s=$c.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function ja(){}ja.prototype.g=function(u,_){return new dn(u,_)};function dn(u,_){Fe.call(this),this.g=new xa(_),this.l=u,this.h=_&&_.messageUrlParams||null,u=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(u?u["X-WebChannel-Content-Type"]=_.messageContentType:u={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(u?u["X-WebChannel-Client-Profile"]=_.va:u={"X-WebChannel-Client-Profile":_.va}),this.g.S=u,(u=_&&_.Sb)&&!J(u)&&(this.g.m=u),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!J(_)&&(this.g.D=_,u=this.h,u!==null&&_ in u&&(u=this.h,_ in u&&delete u[_])),this.j=new _s(this)}k(dn,Fe),dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){tl(this.g)},dn.prototype.o=function(u){var _=this.g;if(typeof u=="string"){var E={};E.__data__=u,u=E}else this.u&&(E={},E.__data__=qt(u),u=E);_.i.push(new Mc(_.Ya++,u)),_.G==3&&Oa(_)},dn.prototype.N=function(){this.g.l=null,delete this.j,tl(this.g),delete this.g,dn.aa.N.call(this)};function Qc(u){Bs.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var _=u.__sm__;if(_){e:{for(const E in _){u=E;break e}u=void 0}(this.i=u)&&(u=this.i,_=_!==null&&u in _?_[u]:void 0),this.data=_}else this.data=u}k(Qc,Bs);function Yc(){Ho.call(this),this.status=1}k(Yc,Ho);function _s(u){this.g=u}k(_s,$c),_s.prototype.ua=function(){Ne(this.g,"a")},_s.prototype.ta=function(u){Ne(this.g,new Qc(u))},_s.prototype.sa=function(u){Ne(this.g,new Yc)},_s.prototype.ra=function(){Ne(this.g,"b")},ja.prototype.createWebChannel=ja.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,FT=function(){return new ja},BT=function(){return Ai()},zT=us,qm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wi.NO_ERROR=0,wi.TIMEOUT=8,wi.HTTP_ERROR=6,sh=wi,Fs.COMPLETE="complete",UT=Fs,Fo.EventType=zs,zs.OPEN="a",zs.CLOSE="b",zs.ERROR="c",zs.MESSAGE="d",Fe.prototype.listen=Fe.prototype.K,Kl=Fo,Ke.prototype.listenOnce=Ke.prototype.L,Ke.prototype.getLastError=Ke.prototype.Ka,Ke.prototype.getLastErrorCode=Ke.prototype.Ba,Ke.prototype.getStatus=Ke.prototype.Z,Ke.prototype.getResponseJson=Ke.prototype.Oa,Ke.prototype.getResponseText=Ke.prototype.oa,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Ha,LT=Ke}).apply(typeof Xu<"u"?Xu:typeof self<"u"?self:typeof window<"u"?window:{});const p0="@firebase/firestore",g0="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let No="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia=new Hh("@firebase/firestore");function co(){return ia.logLevel}function me(s,...e){if(ia.logLevel<=ze.DEBUG){const t=e.map(Rp);ia.debug(`Firestore (${No}): ${s}`,...t)}}function pi(s,...e){if(ia.logLevel<=ze.ERROR){const t=e.map(Rp);ia.error(`Firestore (${No}): ${s}`,...t)}}function To(s,...e){if(ia.logLevel<=ze.WARN){const t=e.map(Rp);ia.warn(`Firestore (${No}): ${s}`,...t)}}function Rp(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(s,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,HT(s,r,t)}function HT(s,e,t){let r=`FIRESTORE (${No}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw pi(r),new Error(r)}function Xe(s,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,s||HT(e,o,r)}function xe(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Xn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class QC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(rn.UNAUTHENTICATED))}shutdown(){}}class YC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class KC{constructor(e){this.t=e,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Xe(this.o===void 0,42304);let r=this.i;const o=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let c=new fi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new fi,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const f=c;e.enqueueRetryable(async()=>{await f.promise,await o(this.currentUser)})},g=f=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(f=>g(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?g(f):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new fi)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Xe(typeof r.accessToken=="string",31837,{l:r}),new qT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string",2055,{h:e}),new rn(e)}}class XC{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ZC{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new XC(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(rn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class y0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JC{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ns(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Xe(this.o===void 0,3512);const r=c=>{c.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.m;return this.m=c.token,me("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>r(c))};const o=c=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(c=>o(c)),setTimeout(()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new y0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Xe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new y0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WC(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<s;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=WC(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<t&&(r+=e.charAt(o[c]%62))}return r}}function Ve(s,e){return s<e?-1:s>e?1:0}function Gm(s,e){let t=0;for(;t<s.length&&t<e.length;){const r=s.codePointAt(t),o=e.codePointAt(t);if(r!==o){if(r<128&&o<128)return Ve(r,o);{const c=GT(),h=eN(c.encode(v0(s,t)),c.encode(v0(e,t)));return h!==0?h:Ve(r,o)}}t+=r>65535?2:1}return Ve(s.length,e.length)}function v0(s,e){return s.codePointAt(e)>65535?s.substring(e,e+2):s.substring(e,e+1)}function eN(s,e){for(let t=0;t<s.length&&t<e.length;++t)if(s[t]!==e[t])return Ve(s[t],e[t]);return Ve(s.length,e.length)}function Ao(s,e,t){return s.length===e.length&&s.every((r,o)=>t(r,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0=-62135596800,E0=1e6;class Mt{static now(){return Mt.fromMillis(Date.now())}static fromDate(e){return Mt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*E0);return new Mt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<_0)throw new pe(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/E0}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-_0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new Mt(0,0))}static max(){return new Ce(new Mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0="__name__";class Is{constructor(e,t,r){t===void 0?t=0:t>e.length&&Se(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Se(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Is.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Is?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const c=Is.compareSegments(e.get(o),t.get(o));if(c!==0)return c}return Ve(e.length,t.length)}static compareSegments(e,t){const r=Is.isNumericId(e),o=Is.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?Is.extractNumericId(e).compare(Is.extractNumericId(t)):Gm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return rr.fromString(e.substring(4,e.length-2))}}class at extends Is{construct(e,t,r){return new at(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new pe(se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new at(t)}static emptyPath(){return new at([])}}const tN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zt extends Is{construct(e,t,r){return new Zt(e,t,r)}static isValidIdentifier(e){return tN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===T0}static keyField(){return new Zt([T0])}static fromServerFormat(e){const t=[];let r="",o=0;const c=()=>{if(r.length===0)throw new pe(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new pe(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[o+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new pe(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,o+=2}else g==="`"?(h=!h,o++):g!=="."||h?(r+=g,o++):(c(),o++)}if(c(),h)throw new pe(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zt(t)}static emptyPath(){return new Zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(at.fromString(e))}static fromName(e){return new Te(at.fromString(e).popFirst(5))}static empty(){return new Te(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return at.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new at(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc=-1;function nN(s,e){const t=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=Ce.fromTimestamp(r===1e9?new Mt(t+1,0):new Mt(t,r));return new lr(o,Te.empty(),e)}function sN(s){return new lr(s.readTime,s.key,cc)}class lr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new lr(Ce.min(),Te.empty(),cc)}static max(){return new lr(Ce.max(),Te.empty(),cc)}}function iN(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(s.documentKey,e.documentKey),t!==0?t:Ve(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xo(s){if(s.code!==se.FAILED_PRECONDITION||s.message!==rN)throw s;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.reject(t)}static resolve(e){return new ie((t,r)=>{t(e)})}static reject(e){return new ie((t,r)=>{r(e)})}static waitFor(e){return new ie((t,r)=>{let o=0,c=0,h=!1;e.forEach(g=>{++o,g.next(()=>{++c,h&&c===o&&t()},f=>r(f))}),h=!0,c===o&&t()})}static or(e){let t=ie.resolve(!1);for(const r of e)t=t.next(o=>o?ie.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,c)=>{r.push(t.call(this,o,c))}),this.waitFor(r)}static mapArray(e,t){return new ie((r,o)=>{const c=e.length,h=new Array(c);let g=0;for(let f=0;f<c;f++){const m=f;t(e[m]).next(v=>{h[m]=v,++g,g===c&&r(h)},v=>o(v))}})}static doWhile(e,t){return new ie((r,o)=>{const c=()=>{e()===!0?t().next(()=>{c()},o):r()};c()})}}function oN(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Do(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Qh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip=-1;function Yh(s){return s==null}function Eh(s){return s===0&&1/s==-1/0}function lN(s){return typeof s=="number"&&Number.isInteger(s)&&!Eh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT="";function cN(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=A0(e)),e=uN(s.get(t),e);return A0(e)}function uN(s,e){let t=e;const r=s.length;for(let o=0;o<r;o++){const c=s.charAt(o);switch(c){case"\0":t+="";break;case QT:t+="";break;default:t+=c}}return t}function A0(s){return s+QT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function pr(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function YT(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,t){this.comparator=e,this.root=t||Xt.EMPTY}insert(e,t){return new ut(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zu(this.root,e,this.comparator,!0)}}class Zu{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,t&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,t,r,o,c){this.key=e,this.value=t,this.color=r??Xt.RED,this.left=o??Xt.EMPTY,this.right=c??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,c){return new Xt(e??this.key,t??this.value,r??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,r),null):c===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Xt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,t,r,o,c){return this}insert(e,t,r){return new Xt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new S0(this.data.getIterator())}getIteratorFrom(e){return new S0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof jt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=r.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new jt(this.comparator);return t.data=e,t}}class S0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.fields=e,e.sort(Zt.comparator)}static empty(){return new jn([])}unionWith(e){let t=new jt(Zt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new jn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ao(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new KT("Invalid base64 string: "+c):c}}(e);return new en(t)}static fromUint8Array(e){const t=function(o){let c="";for(let h=0;h<o.length;++h)c+=String.fromCharCode(o[h]);return c}(e);return new en(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const hN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cr(s){if(Xe(!!s,39018),typeof s=="string"){let e=0;const t=hN.exec(s);if(Xe(!!t,46558,{timestamp:s}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yt(s.seconds),nanos:yt(s.nanos)}}function yt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function ur(s){return typeof s=="string"?en.fromBase64String(s):en.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="server_timestamp",ZT="__type__",JT="__previous_value__",WT="__local_write_time__";function Cp(s){var e,t;return((t=(((e=s?.mapValue)===null||e===void 0?void 0:e.fields)||{})[ZT])===null||t===void 0?void 0:t.stringValue)===XT}function Kh(s){const e=s.mapValue.fields[JT];return Cp(e)?Kh(e):e}function uc(s){const e=cr(s.mapValue.fields[WT].timestampValue);return new Mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e,t,r,o,c,h,g,f,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=g,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=v}}const Th="(default)";class hc{constructor(e,t){this.projectId=e,this.database=t||Th}static empty(){return new hc("","")}get isDefaultDatabase(){return this.database===Th}isEqual(e){return e instanceof hc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="__type__",fN="__max__",Ju={mapValue:{}},tA="__vector__",Ah="value";function hr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Cp(s)?4:pN(s)?9007199254740991:mN(s)?10:11:Se(28295,{value:s})}function Ms(s,e){if(s===e)return!0;const t=hr(s);if(t!==hr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return uc(s).isEqual(uc(e));case 3:return function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const h=cr(o.timestampValue),g=cr(c.timestampValue);return h.seconds===g.seconds&&h.nanos===g.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return function(o,c){return ur(o.bytesValue).isEqual(ur(c.bytesValue))}(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return function(o,c){return yt(o.geoPointValue.latitude)===yt(c.geoPointValue.latitude)&&yt(o.geoPointValue.longitude)===yt(c.geoPointValue.longitude)}(s,e);case 2:return function(o,c){if("integerValue"in o&&"integerValue"in c)return yt(o.integerValue)===yt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const h=yt(o.doubleValue),g=yt(c.doubleValue);return h===g?Eh(h)===Eh(g):isNaN(h)&&isNaN(g)}return!1}(s,e);case 9:return Ao(s.arrayValue.values||[],e.arrayValue.values||[],Ms);case 10:case 11:return function(o,c){const h=o.mapValue.fields||{},g=c.mapValue.fields||{};if(b0(h)!==b0(g))return!1;for(const f in h)if(h.hasOwnProperty(f)&&(g[f]===void 0||!Ms(h[f],g[f])))return!1;return!0}(s,e);default:return Se(52216,{left:s})}}function dc(s,e){return(s.values||[]).find(t=>Ms(t,e))!==void 0}function bo(s,e){if(s===e)return 0;const t=hr(s),r=hr(e);if(t!==r)return Ve(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ve(s.booleanValue,e.booleanValue);case 2:return function(c,h){const g=yt(c.integerValue||c.doubleValue),f=yt(h.integerValue||h.doubleValue);return g<f?-1:g>f?1:g===f?0:isNaN(g)?isNaN(f)?0:-1:1}(s,e);case 3:return w0(s.timestampValue,e.timestampValue);case 4:return w0(uc(s),uc(e));case 5:return Gm(s.stringValue,e.stringValue);case 6:return function(c,h){const g=ur(c),f=ur(h);return g.compareTo(f)}(s.bytesValue,e.bytesValue);case 7:return function(c,h){const g=c.split("/"),f=h.split("/");for(let m=0;m<g.length&&m<f.length;m++){const v=Ve(g[m],f[m]);if(v!==0)return v}return Ve(g.length,f.length)}(s.referenceValue,e.referenceValue);case 8:return function(c,h){const g=Ve(yt(c.latitude),yt(h.latitude));return g!==0?g:Ve(yt(c.longitude),yt(h.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return R0(s.arrayValue,e.arrayValue);case 10:return function(c,h){var g,f,m,v;const T=c.fields||{},b=h.fields||{},O=(g=T[Ah])===null||g===void 0?void 0:g.arrayValue,k=(f=b[Ah])===null||f===void 0?void 0:f.arrayValue,U=Ve(((m=O?.values)===null||m===void 0?void 0:m.length)||0,((v=k?.values)===null||v===void 0?void 0:v.length)||0);return U!==0?U:R0(O,k)}(s.mapValue,e.mapValue);case 11:return function(c,h){if(c===Ju.mapValue&&h===Ju.mapValue)return 0;if(c===Ju.mapValue)return 1;if(h===Ju.mapValue)return-1;const g=c.fields||{},f=Object.keys(g),m=h.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let T=0;T<f.length&&T<v.length;++T){const b=Gm(f[T],v[T]);if(b!==0)return b;const O=bo(g[f[T]],m[v[T]]);if(O!==0)return O}return Ve(f.length,v.length)}(s.mapValue,e.mapValue);default:throw Se(23264,{Pe:t})}}function w0(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ve(s,e);const t=cr(s),r=cr(e),o=Ve(t.seconds,r.seconds);return o!==0?o:Ve(t.nanos,r.nanos)}function R0(s,e){const t=s.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const c=bo(t[o],r[o]);if(c)return c}return Ve(t.length,r.length)}function So(s){return $m(s)}function $m(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(t){const r=cr(t);return`time(${r.seconds},${r.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(t){return ur(t).toBase64()}(s.bytesValue):"referenceValue"in s?function(t){return Te.fromName(t).toString()}(s.referenceValue):"geoPointValue"in s?function(t){return`geo(${t.latitude},${t.longitude})`}(s.geoPointValue):"arrayValue"in s?function(t){let r="[",o=!0;for(const c of t.values||[])o?o=!1:r+=",",r+=$m(c);return r+"]"}(s.arrayValue):"mapValue"in s?function(t){const r=Object.keys(t.fields||{}).sort();let o="{",c=!0;for(const h of r)c?c=!1:o+=",",o+=`${h}:${$m(t.fields[h])}`;return o+"}"}(s.mapValue):Se(61005,{value:s})}function ih(s){switch(hr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Kh(s);return e?16+ih(e):16;case 5:return 2*s.stringValue.length;case 6:return ur(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,c)=>o+ih(c),0)}(s.arrayValue);case 10:case 11:return function(r){let o=0;return pr(r.fields,(c,h)=>{o+=c.length+ih(h)}),o}(s.mapValue);default:throw Se(13486,{value:s})}}function I0(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Qm(s){return!!s&&"integerValue"in s}function Np(s){return!!s&&"arrayValue"in s}function C0(s){return!!s&&"nullValue"in s}function N0(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function rh(s){return!!s&&"mapValue"in s}function mN(s){var e,t;return((t=(((e=s?.mapValue)===null||e===void 0?void 0:e.fields)||{})[eA])===null||t===void 0?void 0:t.stringValue)===tA}function tc(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return pr(s.mapValue.fields,(t,r)=>e.mapValue.fields[t]=tc(r)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=tc(s.arrayValue.values[t]);return e}return Object.assign({},s)}function pN(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===fN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.value=e}static empty(){return new Tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!rh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tc(t)}setAll(e){let t=Zt.emptyPath(),r={},o=[];e.forEach((h,g)=>{if(!t.isImmediateParentOf(g)){const f=this.getFieldsMap(t);this.applyChanges(f,r,o),r={},o=[],t=g.popLast()}h?r[g.lastSegment()]=tc(h):o.push(g.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,r,o)}delete(e){const t=this.field(e.popLast());rh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ms(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];rh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){pr(t,(o,c)=>e[o]=c);for(const o of r)delete e[o]}clone(){return new Tn(tc(this.value))}}function nA(s){const e=[];return pr(s.fields,(t,r)=>{const o=new Zt([t]);if(rh(r)){const c=nA(r.mapValue).fields;if(c.length===0)e.push(o);else for(const h of c)e.push(o.child(h))}else e.push(o)}),new jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,t,r,o,c,h,g){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=c,this.data=h,this.documentState=g}static newInvalidDocument(e){return new an(e,0,Ce.min(),Ce.min(),Ce.min(),Tn.empty(),0)}static newFoundDocument(e,t,r,o){return new an(e,1,t,Ce.min(),r,o,0)}static newNoDocument(e,t){return new an(e,2,t,Ce.min(),Ce.min(),Tn.empty(),0)}static newUnknownDocument(e,t){return new an(e,3,t,Ce.min(),Ce.min(),Tn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof an&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new an(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,t){this.position=e,this.inclusive=t}}function x0(s,e,t){let r=0;for(let o=0;o<s.position.length;o++){const c=e[o],h=s.position[o];if(c.field.isKeyField()?r=Te.comparator(Te.fromName(h.referenceValue),t.key):r=bo(h,t.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function D0(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Ms(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,t="asc"){this.field=e,this.dir=t}}function gN(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{}class Rt extends sA{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new vN(e,t,r):t==="array-contains"?new TN(e,r):t==="in"?new AN(e,r):t==="not-in"?new bN(e,r):t==="array-contains-any"?new SN(e,r):new Rt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new _N(e,r):new EN(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(bo(t,this.value)):t!==null&&hr(this.value)===hr(t)&&this.matchesComparison(bo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ls extends sA{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new ls(e,t)}matches(e){return iA(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function iA(s){return s.op==="and"}function rA(s){return yN(s)&&iA(s)}function yN(s){for(const e of s.filters)if(e instanceof ls)return!1;return!0}function Ym(s){if(s instanceof Rt)return s.field.canonicalString()+s.op.toString()+So(s.value);if(rA(s))return s.filters.map(e=>Ym(e)).join(",");{const e=s.filters.map(t=>Ym(t)).join(",");return`${s.op}(${e})`}}function aA(s,e){return s instanceof Rt?function(r,o){return o instanceof Rt&&r.op===o.op&&r.field.isEqual(o.field)&&Ms(r.value,o.value)}(s,e):s instanceof ls?function(r,o){return o instanceof ls&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((c,h,g)=>c&&aA(h,o.filters[g]),!0):!1}(s,e):void Se(19439)}function oA(s){return s instanceof Rt?function(t){return`${t.field.canonicalString()} ${t.op} ${So(t.value)}`}(s):s instanceof ls?function(t){return t.op.toString()+" {"+t.getFilters().map(oA).join(" ,")+"}"}(s):"Filter"}class vN extends Rt{constructor(e,t,r){super(e,t,r),this.key=Te.fromName(r.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class _N extends Rt{constructor(e,t){super(e,"in",t),this.keys=lA("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class EN extends Rt{constructor(e,t){super(e,"not-in",t),this.keys=lA("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function lA(s,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Te.fromName(r.referenceValue))}class TN extends Rt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Np(t)&&dc(t.arrayValue,this.value)}}class AN extends Rt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&dc(this.value.arrayValue,t)}}class bN extends Rt{constructor(e,t){super(e,"not-in",t)}matches(e){if(dc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!dc(this.value.arrayValue,t)}}class SN extends Rt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Np(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>dc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,t=null,r=[],o=[],c=null,h=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=h,this.endAt=g,this.Ie=null}}function O0(s,e=null,t=[],r=[],o=null,c=null,h=null){return new wN(s,e,t,r,o,c,h)}function xp(s){const e=xe(s);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Ym(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(c){return c.field.canonicalString()+c.dir}(r)).join(","),Yh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>So(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>So(r)).join(",")),e.Ie=t}return e.Ie}function Dp(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!gN(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!aA(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!D0(s.startAt,e.startAt)&&D0(s.endAt,e.endAt)}function Km(s){return Te.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,t=null,r=[],o=[],c=null,h="F",g=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=h,this.startAt=g,this.endAt=f,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function RN(s,e,t,r,o,c,h,g){return new Oo(s,e,t,r,o,c,h,g)}function Op(s){return new Oo(s)}function M0(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function cA(s){return s.collectionGroup!==null}function nc(s){const e=xe(s);if(e.Ee===null){e.Ee=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ee.push(c),t.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let g=new jt(Zt.comparator);return h.filters.forEach(f=>{f.getFlattenedFilters().forEach(m=>{m.isInequality()&&(g=g.add(m.field))})}),g})(e).forEach(c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ee.push(new fc(c,r))}),t.has(Zt.keyField().canonicalString())||e.Ee.push(new fc(Zt.keyField(),r))}return e.Ee}function Ns(s){const e=xe(s);return e.de||(e.de=IN(e,nc(s))),e.de}function IN(s,e){if(s.limitType==="F")return O0(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map(o=>{const c=o.dir==="desc"?"asc":"desc";return new fc(o.field,c)});const t=s.endAt?new bh(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new bh(s.startAt.position,s.startAt.inclusive):null;return O0(s.path,s.collectionGroup,e,s.filters,s.limit,t,r)}}function Xm(s,e){const t=s.filters.concat([e]);return new Oo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function Zm(s,e,t){return new Oo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function Xh(s,e){return Dp(Ns(s),Ns(e))&&s.limitType===e.limitType}function uA(s){return`${xp(Ns(s))}|lt:${s.limitType}`}function uo(s){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(o=>oA(o)).join(", ")}]`),Yh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(o=>So(o)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(o=>So(o)).join(",")),`Target(${r})`}(Ns(s))}; limitType=${s.limitType})`}function Zh(s,e){return e.isFoundDocument()&&function(r,o){const c=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):Te.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)}(s,e)&&function(r,o){for(const c of nc(r))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0}(s,e)&&function(r,o){for(const c of r.filters)if(!c.matches(o))return!1;return!0}(s,e)&&function(r,o){return!(r.startAt&&!function(h,g,f){const m=x0(h,g,f);return h.inclusive?m<=0:m<0}(r.startAt,nc(r),o)||r.endAt&&!function(h,g,f){const m=x0(h,g,f);return h.inclusive?m>=0:m>0}(r.endAt,nc(r),o))}(s,e)}function CN(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function hA(s){return(e,t)=>{let r=!1;for(const o of nc(s)){const c=NN(o,e,t);if(c!==0)return c;r=r||o.field.isKeyField()}return 0}}function NN(s,e,t){const r=s.field.isKeyField()?Te.comparator(e.key,t.key):function(c,h,g){const f=h.data.field(c),m=g.data.field(c);return f!==null&&m!==null?bo(f,m):Se(42886)}(s.field,e,t);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return Se(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,c]of r)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){pr(this.inner,(t,r)=>{for(const[o,c]of r)e(o,c)})}isEmpty(){return YT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN=new ut(Te.comparator);function gi(){return xN}const dA=new ut(Te.comparator);function Xl(...s){let e=dA;for(const t of s)e=e.insert(t.key,t);return e}function fA(s){let e=dA;return s.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Wr(){return sc()}function mA(){return sc()}function sc(){return new ma(s=>s.toString(),(s,e)=>s.isEqual(e))}const DN=new ut(Te.comparator),ON=new jt(Te.comparator);function Be(...s){let e=ON;for(const t of s)e=e.add(t);return e}const MN=new jt(Ve);function jN(){return MN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eh(e)?"-0":e}}function pA(s){return{integerValue:""+s}}function VN(s,e){return lN(e)?pA(e):Mp(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(){this._=void 0}}function PN(s,e,t){return s instanceof Sh?function(o,c){const h={fields:{[ZT]:{stringValue:XT},[WT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Cp(c)&&(c=Kh(c)),c&&(h.fields[JT]=c),{mapValue:h}}(t,e):s instanceof mc?yA(s,e):s instanceof pc?vA(s,e):function(o,c){const h=gA(o,c),g=j0(h)+j0(o.Re);return Qm(h)&&Qm(o.Re)?pA(g):Mp(o.serializer,g)}(s,e)}function kN(s,e,t){return s instanceof mc?yA(s,e):s instanceof pc?vA(s,e):t}function gA(s,e){return s instanceof wh?function(r){return Qm(r)||function(c){return!!c&&"doubleValue"in c}(r)}(e)?e:{integerValue:0}:null}class Sh extends Jh{}class mc extends Jh{constructor(e){super(),this.elements=e}}function yA(s,e){const t=_A(e);for(const r of s.elements)t.some(o=>Ms(o,r))||t.push(r);return{arrayValue:{values:t}}}class pc extends Jh{constructor(e){super(),this.elements=e}}function vA(s,e){let t=_A(e);for(const r of s.elements)t=t.filter(o=>!Ms(o,r));return{arrayValue:{values:t}}}class wh extends Jh{constructor(e,t){super(),this.serializer=e,this.Re=t}}function j0(s){return yt(s.integerValue||s.doubleValue)}function _A(s){return Np(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function LN(s,e){return s.field.isEqual(e.field)&&function(r,o){return r instanceof mc&&o instanceof mc||r instanceof pc&&o instanceof pc?Ao(r.elements,o.elements,Ms):r instanceof wh&&o instanceof wh?Ms(r.Re,o.Re):r instanceof Sh&&o instanceof Sh}(s.transform,e.transform)}class UN{constructor(e,t){this.version=e,this.transformResults=t}}class as{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new as}static exists(e){return new as(void 0,e)}static updateTime(e){return new as(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ah(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Wh{}function EA(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new jp(s.key,as.none()):new Ec(s.key,s.data,as.none());{const t=s.data,r=Tn.empty();let o=new jt(Zt.comparator);for(let c of e.fields)if(!o.has(c)){let h=t.field(c);h===null&&c.length>1&&(c=c.popLast(),h=t.field(c)),h===null?r.delete(c):r.set(c,h),o=o.add(c)}return new gr(s.key,r,new jn(o.toArray()),as.none())}}function zN(s,e,t){s instanceof Ec?function(o,c,h){const g=o.value.clone(),f=P0(o.fieldTransforms,c,h.transformResults);g.setAll(f),c.convertToFoundDocument(h.version,g).setHasCommittedMutations()}(s,e,t):s instanceof gr?function(o,c,h){if(!ah(o.precondition,c))return void c.convertToUnknownDocument(h.version);const g=P0(o.fieldTransforms,c,h.transformResults),f=c.data;f.setAll(TA(o)),f.setAll(g),c.convertToFoundDocument(h.version,f).setHasCommittedMutations()}(s,e,t):function(o,c,h){c.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function ic(s,e,t,r){return s instanceof Ec?function(c,h,g,f){if(!ah(c.precondition,h))return g;const m=c.value.clone(),v=k0(c.fieldTransforms,f,h);return m.setAll(v),h.convertToFoundDocument(h.version,m).setHasLocalMutations(),null}(s,e,t,r):s instanceof gr?function(c,h,g,f){if(!ah(c.precondition,h))return g;const m=k0(c.fieldTransforms,f,h),v=h.data;return v.setAll(TA(c)),v.setAll(m),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(T=>T.field))}(s,e,t,r):function(c,h,g){return ah(c.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):g}(s,e,t)}function BN(s,e){let t=null;for(const r of s.fieldTransforms){const o=e.data.field(r.field),c=gA(r.transform,o||null);c!=null&&(t===null&&(t=Tn.empty()),t.set(r.field,c))}return t||null}function V0(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Ao(r,o,(c,h)=>LN(c,h))}(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Ec extends Wh{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class gr extends Wh{constructor(e,t,r,o,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function TA(s){const e=new Map;return s.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=s.data.field(t);e.set(t,r)}}),e}function P0(s,e,t){const r=new Map;Xe(s.length===t.length,32656,{Ve:t.length,me:s.length});for(let o=0;o<t.length;o++){const c=s[o],h=c.transform,g=e.data.field(c.field);r.set(c.field,kN(h,g,t[o]))}return r}function k0(s,e,t){const r=new Map;for(const o of s){const c=o.transform,h=t.data.field(o.field);r.set(o.field,PN(c,h,e))}return r}class jp extends Wh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class FN extends Wh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&zN(c,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ic(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ic(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=mA();return this.mutations.forEach(o=>{const c=e.get(o.key),h=c.overlayedDocument;let g=this.applyToLocalView(h,c.mutatedFields);g=t.has(o.key)?null:g;const f=EA(h,g);f!==null&&r.set(o.key,f),h.isValidDocument()||h.convertToNoDocument(Ce.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Be())}isEqual(e){return this.batchId===e.batchId&&Ao(this.mutations,e.mutations,(t,r)=>V0(t,r))&&Ao(this.baseMutations,e.baseMutations,(t,r)=>V0(t,r))}}class Vp{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Xe(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let o=function(){return DN}();const c=e.mutations;for(let h=0;h<c.length;h++)o=o.insert(c[h].key,r[h].version);return new Vp(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St,$e;function $N(s){switch(s){case se.OK:return Se(64938);case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0;default:return Se(15467,{code:s})}}function AA(s){if(s===void 0)return pi("GRPC error has no .code"),se.UNKNOWN;switch(s){case St.OK:return se.OK;case St.CANCELLED:return se.CANCELLED;case St.UNKNOWN:return se.UNKNOWN;case St.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case St.INTERNAL:return se.INTERNAL;case St.UNAVAILABLE:return se.UNAVAILABLE;case St.UNAUTHENTICATED:return se.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case St.NOT_FOUND:return se.NOT_FOUND;case St.ALREADY_EXISTS:return se.ALREADY_EXISTS;case St.PERMISSION_DENIED:return se.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case St.ABORTED:return se.ABORTED;case St.OUT_OF_RANGE:return se.OUT_OF_RANGE;case St.UNIMPLEMENTED:return se.UNIMPLEMENTED;case St.DATA_LOSS:return se.DATA_LOSS;default:return Se(39323,{code:s})}}($e=St||(St={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN=new rr([4294967295,4294967295],0);function L0(s){const e=GT().encode(s),t=new kT;return t.update(e),new Uint8Array(t.digest())}function U0(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new rr([t,r],0),new rr([o,c],0)]}class Pp{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Zl(`Invalid padding: ${t}`);if(r<0)throw new Zl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Zl(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=rr.fromNumber(this.pe)}we(e,t,r){let o=e.add(t.multiply(rr.fromNumber(r)));return o.compare(QN)===1&&(o=new rr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=L0(e),[r,o]=U0(t);for(let c=0;c<this.hashCount;c++){const h=this.we(r,o,c);if(!this.be(h))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),h=new Pp(c,o,t);return r.forEach(g=>h.insert(g)),h}insert(e){if(this.pe===0)return;const t=L0(e),[r,o]=U0(t);for(let c=0;c<this.hashCount;c++){const h=this.we(r,o,c);this.Se(h)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Zl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,t,r,o,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Tc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new ed(Ce.min(),o,new ut(Ve),gi(),Be())}}class Tc{constructor(e,t,r,o,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Tc(r,t,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e,t,r,o){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=o}}class bA{constructor(e,t){this.targetId=e,this.Ce=t}}class SA{constructor(e,t,r=en.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class z0{constructor(){this.Fe=0,this.Me=B0(),this.xe=en.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Be(),t=Be(),r=Be();return this.Me.forEach((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Se(38017,{changeType:c})}}),new Tc(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=B0()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Xe(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class YN{constructor(e){this.ze=e,this.je=new Map,this.He=gi(),this.Je=Wu(),this.Ye=Wu(),this.Ze=new ut(Ve)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:Se(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,o)=>{this.it(o)&&t(o)})}ot(e){const t=e.targetId,r=e.Ce.count,o=this._t(t);if(o){const c=o.target;if(Km(c))if(r===0){const h=new Te(c.path);this.tt(t,h,an.newNoDocument(h,Ce.min()))}else Xe(r===1,20013,{expectedCount:r});else{const h=this.ut(t);if(h!==r){const g=this.ct(e),f=g?this.lt(g,e,h):1;if(f!==0){this.st(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,m)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:c=0}=t;let h,g;try{h=ur(r).toUint8Array()}catch(f){if(f instanceof KT)return To("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{g=new Pp(h,o,c)}catch(f){return To(f instanceof Zl?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return g.pe===0?null:g}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let o=0;return r.forEach(c=>{const h=this.ze.Pt(),g=`projects/${h.projectId}/databases/${h.database}/documents/${c.path.canonicalString()}`;e.mightContain(g)||(this.tt(t,c,null),o++)}),o}It(e){const t=new Map;this.je.forEach((c,h)=>{const g=this._t(h);if(g){if(c.current&&Km(g.target)){const f=new Te(g.target.path);this.Et(f).has(h)||this.dt(h,f)||this.tt(h,f,an.newNoDocument(f,e))}c.Le&&(t.set(h,c.qe()),c.Qe())}});let r=Be();this.Ye.forEach((c,h)=>{let g=!0;h.forEachWhile(f=>{const m=this._t(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)}),g&&(r=r.add(c))}),this.He.forEach((c,h)=>h.setReadTime(e));const o=new ed(e,t,this.Ze,this.He,r);return this.He=gi(),this.Je=Wu(),this.Ye=Wu(),this.Ze=new ut(Ve),o}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const o=this.rt(e);this.dt(e,t)?o.$e(t,1):o.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new z0,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new jt(Ve),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new jt(Ve),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new z0),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Wu(){return new ut(Te.comparator)}function B0(){return new ut(Te.comparator)}const KN={asc:"ASCENDING",desc:"DESCENDING"},XN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ZN={and:"AND",or:"OR"};class JN{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Jm(s,e){return s.useProto3Json||Yh(e)?e:{value:e}}function Rh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wA(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function WN(s,e){return Rh(s,e.toTimestamp())}function xs(s){return Xe(!!s,49232),Ce.fromTimestamp(function(t){const r=cr(t);return new Mt(r.seconds,r.nanos)}(s))}function kp(s,e){return Wm(s,e).canonicalString()}function Wm(s,e){const t=function(o){return new at(["projects",o.projectId,"databases",o.database])}(s).child("documents");return e===void 0?t:t.child(e)}function RA(s){const e=at.fromString(s);return Xe(DA(e),10190,{key:e.toString()}),e}function ep(s,e){return kp(s.databaseId,e.path)}function Rm(s,e){const t=RA(e);if(t.get(1)!==s.databaseId.projectId)throw new pe(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new pe(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new Te(CA(t))}function IA(s,e){return kp(s.databaseId,e)}function ex(s){const e=RA(s);return e.length===4?at.emptyPath():CA(e)}function tp(s){return new at(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function CA(s){return Xe(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function F0(s,e,t){return{name:ep(s,e),fields:t.value.mapValue.fields}}function tx(s,e){let t;if("targetChange"in e){e.targetChange;const r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Se(39313,{state:m})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=function(m,v){return m.useProto3Json?(Xe(v===void 0||typeof v=="string",58123),en.fromBase64String(v||"")):(Xe(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),en.fromUint8Array(v||new Uint8Array))}(s,e.targetChange.resumeToken),h=e.targetChange.cause,g=h&&function(m){const v=m.code===void 0?se.UNKNOWN:AA(m.code);return new pe(v,m.message||"")}(h);t=new SA(r,o,c,g||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Rm(s,r.document.name),c=xs(r.document.updateTime),h=r.document.createTime?xs(r.document.createTime):Ce.min(),g=new Tn({mapValue:{fields:r.document.fields}}),f=an.newFoundDocument(o,c,h,g),m=r.targetIds||[],v=r.removedTargetIds||[];t=new oh(m,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Rm(s,r.document),c=r.readTime?xs(r.readTime):Ce.min(),h=an.newNoDocument(o,c),g=r.removedTargetIds||[];t=new oh([],g,h.key,h)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Rm(s,r.document),c=r.removedTargetIds||[];t=new oh([],c,o,null)}else{if(!("filter"in e))return Se(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:c}=r,h=new GN(o,c),g=r.targetId;t=new bA(g,h)}}return t}function nx(s,e){let t;if(e instanceof Ec)t={update:F0(s,e.key,e.value)};else if(e instanceof jp)t={delete:ep(s,e.key)};else if(e instanceof gr)t={update:F0(s,e.key,e.data),updateMask:hx(e.fieldMask)};else{if(!(e instanceof FN))return Se(16599,{ft:e.type});t={verify:ep(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(c,h){const g=h.transform;if(g instanceof Sh)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof mc)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof pc)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof wh)return{fieldPath:h.field.canonicalString(),increment:g.Re};throw Se(20930,{transform:h.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(o,c){return c.updateTime!==void 0?{updateTime:WN(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Se(27497)}(s,e.precondition)),t}function sx(s,e){return s&&s.length>0?(Xe(e!==void 0,14353),s.map(t=>function(o,c){let h=o.updateTime?xs(o.updateTime):xs(c);return h.isEqual(Ce.min())&&(h=xs(c)),new UN(h,o.transformResults||[])}(t,e))):[]}function ix(s,e){return{documents:[IA(s,e.path)]}}function rx(s,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=IA(s,o);const c=function(m){if(m.length!==0)return xA(ls.create(m,"and"))}(e.filters);c&&(t.structuredQuery.where=c);const h=function(m){if(m.length!==0)return m.map(v=>function(b){return{field:ho(b.field),direction:lx(b.dir)}}(v))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const g=Jm(s,e.limit);return g!==null&&(t.structuredQuery.limit=g),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{gt:t,parent:o}}function ax(s){let e=ex(s.parent);const t=s.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Xe(r===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let c=[];t.where&&(c=function(T){const b=NA(T);return b instanceof ls&&rA(b)?b.getFilters():[b]}(t.where));let h=[];t.orderBy&&(h=function(T){return T.map(b=>function(k){return new fc(fo(k.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(b))}(t.orderBy));let g=null;t.limit&&(g=function(T){let b;return b=typeof T=="object"?T.value:T,Yh(b)?null:b}(t.limit));let f=null;t.startAt&&(f=function(T){const b=!!T.before,O=T.values||[];return new bh(O,b)}(t.startAt));let m=null;return t.endAt&&(m=function(T){const b=!T.before,O=T.values||[];return new bh(O,b)}(t.endAt)),RN(e,o,h,c,g,"F",f,m)}function ox(s,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:o})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function NA(s){return s.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=fo(t.unaryFilter.field);return Rt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=fo(t.unaryFilter.field);return Rt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=fo(t.unaryFilter.field);return Rt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=fo(t.unaryFilter.field);return Rt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}}(s):s.fieldFilter!==void 0?function(t){return Rt.create(fo(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(t){return ls.create(t.compositeFilter.filters.map(r=>NA(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Se(1026)}}(t.compositeFilter.op))}(s):Se(30097,{filter:s})}function lx(s){return KN[s]}function cx(s){return XN[s]}function ux(s){return ZN[s]}function ho(s){return{fieldPath:s.canonicalString()}}function fo(s){return Zt.fromServerFormat(s.fieldPath)}function xA(s){return s instanceof Rt?function(t){if(t.op==="=="){if(N0(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NAN"}};if(C0(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(N0(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NOT_NAN"}};if(C0(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ho(t.field),op:cx(t.op),value:t.value}}}(s):s instanceof ls?function(t){const r=t.getFilters().map(o=>xA(o));return r.length===1?r[0]:{compositeFilter:{op:ux(t.op),filters:r}}}(s):Se(54877,{filter:s})}function hx(s){const e=[];return s.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function DA(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e,t,r,o,c=Ce.min(),h=Ce.min(),g=en.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=g,this.expectedCount=f}withSequenceNumber(e){return new nr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e){this.wt=e}}function fx(s){const e=ax({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Zm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(){this.Cn=new px}addToCollectionParentIndex(e,t){return this.Cn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(lr.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(lr.min())}updateCollectionGroup(e,t,r){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class px{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new jt(at.comparator),c=!o.has(r);return this.index[t]=o.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new jt(at.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},OA=41943040;class _n{static withCacheSize(e){return new _n(e,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(OA,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new wo(0)}static lr(){return new wo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0="LruGarbageCollector",gx=1048576;function G0([s,e],[t,r]){const o=Ve(s,t);return o===0?Ve(e,r):o}class yx{constructor(e){this.Er=e,this.buffer=new jt(G0),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();G0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class vx{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){me(q0,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Do(t)?me(q0,"Ignoring IndexedDB error during garbage collection: ",t):await xo(t)}await this.mr(3e5)})}}class _x{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(Qh.le);const r=new yx(t);return this.gr.forEachTarget(e,o=>r.Rr(o.sequenceNumber)).next(()=>this.gr.yr(e,o=>r.Rr(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(H0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),H0):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,o,c,h,g,f,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(e,o))).next(T=>(r=T,g=Date.now(),this.removeTargets(e,r,t))).next(T=>(c=T,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(T=>(m=Date.now(),co()<=ze.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-v}ms
	Determined least recently used ${o} in `+(g-h)+`ms
	Removed ${c} targets in `+(f-g)+`ms
	Removed ${T} documents in `+(m-f)+`ms
Total Duration: ${m-v}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:T})))}}function Ex(s,e){return new _x(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(){this.changes=new ma(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,an.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(r!==null&&ic(r.mutation,o,jn.empty(),Mt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Be()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Be()){const o=Wr();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(c=>{let h=Xl();return c.forEach((g,f)=>{h=h.insert(g,f.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const r=Wr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Be()))}populateOverlays(e,t,r){const o=[];return r.forEach(c=>{t.has(c)||o.push(c)}),this.documentOverlayCache.getOverlays(e,o).next(c=>{c.forEach((h,g)=>{t.set(h,g)})})}computeViews(e,t,r,o){let c=gi();const h=sc(),g=function(){return sc()}();return t.forEach((f,m)=>{const v=r.get(m.key);o.has(m.key)&&(v===void 0||v.mutation instanceof gr)?c=c.insert(m.key,m):v!==void 0?(h.set(m.key,v.mutation.getFieldMask()),ic(v.mutation,m,v.mutation.getFieldMask(),Mt.now())):h.set(m.key,jn.empty())}),this.recalculateAndSaveOverlays(e,c).next(f=>(f.forEach((m,v)=>h.set(m,v)),t.forEach((m,v)=>{var T;return g.set(m,new Ax(v,(T=h.get(m))!==null&&T!==void 0?T:null))}),g))}recalculateAndSaveOverlays(e,t){const r=sc();let o=new ut((h,g)=>h-g),c=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const g of h)g.keys().forEach(f=>{const m=t.get(f);if(m===null)return;let v=r.get(f)||jn.empty();v=g.applyToLocalView(m,v),r.set(f,v);const T=(o.get(g.batchId)||Be()).add(f);o=o.insert(g.batchId,T)})}).next(()=>{const h=[],g=o.getReverseIterator();for(;g.hasNext();){const f=g.getNext(),m=f.key,v=f.value,T=mA();v.forEach(b=>{if(!c.has(b)){const O=EA(t.get(b),r.get(b));O!==null&&T.set(b,O),c=c.add(b)}}),h.push(this.documentOverlayCache.saveOverlays(e,m,T))}return ie.waitFor(h)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,o){return function(h){return Te.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):cA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(c=>{const h=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-c.size):ie.resolve(Wr());let g=cc,f=c;return h.next(m=>ie.forEach(m,(v,T)=>(g<T.largestBatchId&&(g=T.largestBatchId),c.get(v)?ie.resolve():this.remoteDocumentCache.getEntry(e,v).next(b=>{f=f.insert(v,b)}))).next(()=>this.populateOverlays(e,m,c)).next(()=>this.computeViews(e,f,m,Be())).next(v=>({batchId:g,changes:fA(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next(r=>{let o=Xl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const c=t.collectionGroup;let h=Xl();return this.indexManager.getCollectionParents(e,c).next(g=>ie.forEach(g,f=>{const m=function(T,b){return new Oo(b,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(t,f.child(c));return this.getDocumentsMatchingCollectionQuery(e,m,r,o).next(v=>{v.forEach((T,b)=>{h=h.insert(T,b)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,r,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(h=>(c=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,c,o))).next(h=>{c.forEach((f,m)=>{const v=m.getKey();h.get(v)===null&&(h=h.insert(v,an.newInvalidDocument(v)))});let g=Xl();return h.forEach((f,m)=>{const v=c.get(f);v!==void 0&&ic(v.mutation,m,jn.empty(),Mt.now()),Zh(t,m)&&(g=g.insert(f,m))}),g})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return ie.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:xs(o.createTime)}}(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(o){return{name:o.name,query:fx(o.bundledQuery),readTime:xs(o.readTime)}}(t)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(){this.overlays=new ut(Te.comparator),this.Qr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Wr();return ie.forEach(t,o=>this.getOverlay(e,o).next(c=>{c!==null&&r.set(o,c)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,c)=>{this.St(e,t,c)}),ie.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Qr.get(r);return o!==void 0&&(o.forEach(c=>this.overlays=this.overlays.remove(c)),this.Qr.delete(r)),ie.resolve()}getOverlaysForCollection(e,t,r){const o=Wr(),c=t.length+1,h=new Te(t.child("")),g=this.overlays.getIteratorFrom(h);for(;g.hasNext();){const f=g.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===c&&f.largestBatchId>r&&o.set(f.getKey(),f)}return ie.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let c=new ut((m,v)=>m-v);const h=this.overlays.getIterator();for(;h.hasNext();){const m=h.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let v=c.get(m.largestBatchId);v===null&&(v=Wr(),c=c.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const g=Wr(),f=c.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((m,v)=>g.set(m,v)),!(g.size()>=o)););return ie.resolve(g)}St(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const h=this.Qr.get(o.largestBatchId).delete(r.key);this.Qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new qN(t,r));let c=this.Qr.get(t);c===void 0&&(c=Be(),this.Qr.set(t,c)),this.Qr.set(t,c.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(){this.$r=new jt(Bt.Ur),this.Kr=new jt(Bt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const r=new Bt(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new Bt(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){const t=new Te(new at([])),r=new Bt(t,e),o=new Bt(t,e+1),c=[];return this.Kr.forEachInRange([r,o],h=>{this.zr(h),c.push(h.key)}),c}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new Te(new at([])),r=new Bt(t,e),o=new Bt(t,e+1);let c=Be();return this.Kr.forEachInRange([r,o],h=>{c=c.add(h.key)}),c}containsKey(e){const t=new Bt(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Bt{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return Te.comparator(e.key,t.key)||Ve(e.Zr,t.Zr)}static Wr(e,t){return Ve(e.Zr,t.Zr)||Te.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new jt(Bt.Ur)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const c=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new HN(c,t,r,o);this.mutationQueue.push(h);for(const g of o)this.Xr=this.Xr.add(new Bt(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ie.resolve(h)}lookupMutationBatch(e,t){return ie.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.ti(r),c=o<0?0:o;return ie.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?Ip:this.nr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Bt(t,0),o=new Bt(t,Number.POSITIVE_INFINITY),c=[];return this.Xr.forEachInRange([r,o],h=>{const g=this.ei(h.Zr);c.push(g)}),ie.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jt(Ve);return t.forEach(o=>{const c=new Bt(o,0),h=new Bt(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([c,h],g=>{r=r.add(g.Zr)})}),ie.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let c=r;Te.isDocumentKey(c)||(c=c.child(""));const h=new Bt(new Te(c),0);let g=new jt(Ve);return this.Xr.forEachWhile(f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===o&&(g=g.add(f.Zr)),!0)},h),ie.resolve(this.ni(g))}ni(e){const t=[];return e.forEach(r=>{const o=this.ei(r);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Xe(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return ie.forEach(t.mutations,o=>{const c=new Bt(o.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){const r=new Bt(t,0),o=this.Xr.firstAfterOrEqual(r);return ie.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e){this.ii=e,this.docs=function(){return new ut(Te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),c=o?o.size:0,h=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ie.resolve(r?r.document.mutableCopy():an.newInvalidDocument(t))}getEntries(e,t){let r=gi();return t.forEach(o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.mutableCopy():an.newInvalidDocument(o))}),ie.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let c=gi();const h=t.path,g=new Te(h.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(g);for(;f.hasNext();){const{key:m,value:{document:v}}=f.getNext();if(!h.isPrefixOf(m.path))break;m.path.length>h.length+1||iN(sN(v),r)<=0||(o.has(v.key)||Zh(t,v))&&(c=c.insert(v.key,v.mutableCopy()))}return ie.resolve(c)}getAllFromCollectionGroup(e,t,r,o){Se(9500)}si(e,t){return ie.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Nx(this)}getSize(e){return ie.resolve(this.size)}}class Nx extends Tx{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Br.addEntry(e,o)):this.Br.removeEntry(r)}),ie.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e){this.persistence=e,this.oi=new ma(t=>xp(t),Dp),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this._i=0,this.ai=new Lp,this.targetCount=0,this.ui=wo.cr()}forEachTarget(e,t){return this.oi.forEach((r,o)=>t(o)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),ie.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new wo(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Tr(t),ie.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,r){let o=0;const c=[];return this.oi.forEach((h,g)=>{g.sequenceNumber<=t&&r.get(g.targetId)===null&&(this.oi.delete(h),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)}),ie.waitFor(c).next(()=>o)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.oi.get(t)||null;return ie.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),ie.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);const o=this.persistence.referenceDelegate,c=[];return o&&t.forEach(h=>{c.push(o.markPotentiallyOrphaned(e,h))}),ie.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ai.Yr(t);return ie.resolve(r)}containsKey(e,t){return ie.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e,t){this.ci={},this.overlays={},this.li=new Qh(0),this.hi=!1,this.hi=!0,this.Pi=new Rx,this.referenceDelegate=e(this),this.Ti=new xx(this),this.indexManager=new mx,this.remoteDocumentCache=function(o){return new Cx(o)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new dx(t),this.Ei=new Sx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wx,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new Ix(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){me("MemoryPersistence","Starting transaction:",e);const o=new Dx(this.li.next());return this.referenceDelegate.di(),r(o).next(c=>this.referenceDelegate.Ai(o).next(()=>c)).toPromise().then(c=>(o.raiseOnCommittedEvent(),c))}Ri(e,t){return ie.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}}class Dx extends aN{constructor(e){super(),this.currentSequenceNumber=e}}class Up{constructor(e){this.persistence=e,this.Vi=new Lp,this.mi=null}static fi(e){return new Up(e)}get gi(){if(this.mi)return this.mi;throw Se(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),ie.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(o=>this.gi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(c=>this.gi.add(c.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.gi,r=>{const o=Te.fromPath(r);return this.pi(e,o).next(c=>{c||t.removeEntry(o,Ce.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return ie.or([()=>ie.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class Ih{constructor(e,t){this.persistence=e,this.yi=new ma(r=>cN(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=Ex(this,t)}static fi(e,t){return new Ih(e,t)}di(){}Ai(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}br(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return ie.forEach(this.yi,(r,o)=>this.Dr(e,r,o).next(c=>c?ie.resolve():t(o)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.si(e,h=>this.Dr(e,h,t).next(g=>{g||(r++,c.removeEntry(h,Ce.min()))})).next(()=>c.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),ie.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ih(e.data.value)),t}Dr(e,t,r){return ie.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.yi.get(t);return ie.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.ds=r,this.As=o}static Rs(e,t){let r=Be(),o=Be();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new zp(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return aR()?8:oN(on())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,o){const c={result:null};return this.ws(e,t).next(h=>{c.result=h}).next(()=>{if(!c.result)return this.bs(e,t,o,r).next(h=>{c.result=h})}).next(()=>{if(c.result)return;const h=new Ox;return this.Ss(e,t,h).next(g=>{if(c.result=g,this.fs)return this.Ds(e,t,h,g.size)})}).next(()=>c.result)}Ds(e,t,r,o){return r.documentReadCount<this.gs?(co()<=ze.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",uo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),ie.resolve()):(co()<=ze.DEBUG&&me("QueryEngine","Query:",uo(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ps*o?(co()<=ze.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",uo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ns(t))):ie.resolve())}ws(e,t){if(M0(t))return ie.resolve(null);let r=Ns(t);return this.indexManager.getIndexType(e,r).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Zm(t,null,"F"),r=Ns(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(c=>{const h=Be(...c);return this.ys.getDocuments(e,h).next(g=>this.indexManager.getMinOffset(e,r).next(f=>{const m=this.vs(t,g);return this.Cs(t,m,h,f.readTime)?this.ws(e,Zm(t,null,"F")):this.Fs(e,m,t,f)}))})))}bs(e,t,r,o){return M0(t)||o.isEqual(Ce.min())?ie.resolve(null):this.ys.getDocuments(e,r).next(c=>{const h=this.vs(t,c);return this.Cs(t,h,r,o)?ie.resolve(null):(co()<=ze.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),uo(t)),this.Fs(e,h,t,nN(o,cc)).next(g=>g))})}vs(e,t){let r=new jt(hA(e));return t.forEach((o,c)=>{Zh(e,c)&&(r=r.add(c))}),r}Cs(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,t,r){return co()<=ze.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",uo(t)),this.ys.getDocumentsMatchingQuery(e,t,lr.min(),r)}Fs(e,t,r,o){return this.ys.getDocumentsMatchingQuery(e,r,o).next(c=>(t.forEach(h=>{c=c.insert(h.key,h)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp="LocalStore",jx=3e8;class Vx{constructor(e,t,r,o){this.persistence=e,this.Ms=t,this.serializer=o,this.xs=new ut(Ve),this.Os=new ma(c=>xp(c),Dp),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bx(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function Px(s,e,t,r){return new Vx(s,e,t,r)}async function jA(s,e){const t=xe(s);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(c=>(o=c,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(c=>{const h=[],g=[];let f=Be();for(const m of o){h.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}for(const m of c){g.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}return t.localDocuments.getDocuments(r,f).next(m=>({ks:m,removedBatchIds:h,addedBatchIds:g}))})})}function kx(s,e){const t=xe(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),c=t.Bs.newChangeBuffer({trackRemovals:!0});return function(g,f,m,v){const T=m.batch,b=T.keys();let O=ie.resolve();return b.forEach(k=>{O=O.next(()=>v.getEntry(f,k)).next(U=>{const V=m.docVersions.get(k);Xe(V!==null,48541),U.version.compareTo(V)<0&&(T.applyToRemoteDocument(U,m),U.isValidDocument()&&(U.setReadTime(m.commitVersion),v.addEntry(U)))})}),O.next(()=>g.mutationQueue.removeMutationBatch(f,T))}(t,r,e,c).next(()=>c.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(g){let f=Be();for(let m=0;m<g.mutationResults.length;++m)g.mutationResults[m].transformResults.length>0&&(f=f.add(g.batch.mutations[m].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function VA(s){const e=xe(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function Lx(s,e){const t=xe(s),r=e.snapshotVersion;let o=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const h=t.Bs.newChangeBuffer({trackRemovals:!0});o=t.xs;const g=[];e.targetChanges.forEach((v,T)=>{const b=o.get(T);if(!b)return;g.push(t.Ti.removeMatchingKeys(c,v.removedDocuments,T).next(()=>t.Ti.addMatchingKeys(c,v.addedDocuments,T)));let O=b.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(T)!==null?O=O.withResumeToken(en.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):v.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(v.resumeToken,r)),o=o.insert(T,O),function(U,V,re){return U.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=jx?!0:re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0}(b,O,v)&&g.push(t.Ti.updateTargetData(c,O))});let f=gi(),m=Be();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(c,v))}),g.push(Ux(c,h,e.documentUpdates).next(v=>{f=v.qs,m=v.Qs})),!r.isEqual(Ce.min())){const v=t.Ti.getLastRemoteSnapshotVersion(c).next(T=>t.Ti.setTargetsMetadata(c,c.currentSequenceNumber,r));g.push(v)}return ie.waitFor(g).next(()=>h.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,f,m)).next(()=>f)}).then(c=>(t.xs=o,c))}function Ux(s,e,t){let r=Be(),o=Be();return t.forEach(c=>r=r.add(c)),e.getEntries(s,r).next(c=>{let h=gi();return t.forEach((g,f)=>{const m=c.get(g);f.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(g)),f.isNoDocument()&&f.version.isEqual(Ce.min())?(e.removeEntry(g,f.readTime),h=h.insert(g,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),h=h.insert(g,f)):me(Bp,"Ignoring outdated watch update for ",g,". Current version:",m.version," Watch version:",f.version)}),{qs:h,Qs:o}})}function zx(s,e){const t=xe(s);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ip),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Bx(s,e){const t=xe(s);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Ti.getTargetData(r,e).next(c=>c?(o=c,ie.resolve(o)):t.Ti.allocateTargetId(r).next(h=>(o=new nr(e,h,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.xs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}async function np(s,e,t){const r=xe(s),o=r.xs.get(e),c=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",c,h=>r.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!Do(h))throw h;me(Bp,`Failed to update sequence numbers for target ${e}: ${h}`)}r.xs=r.xs.remove(e),r.Os.delete(o.target)}function $0(s,e,t){const r=xe(s);let o=Ce.min(),c=Be();return r.persistence.runTransaction("Execute query","readwrite",h=>function(f,m,v){const T=xe(f),b=T.Os.get(v);return b!==void 0?ie.resolve(T.xs.get(b)):T.Ti.getTargetData(m,v)}(r,h,Ns(e)).next(g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(h,g.targetId).next(f=>{c=f})}).next(()=>r.Ms.getDocumentsMatchingQuery(h,e,t?o:Ce.min(),t?c:Be())).next(g=>(Fx(r,CN(e),g),{documents:g,$s:c})))}function Fx(s,e,t){let r=s.Ns.get(e)||Ce.min();t.forEach((o,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)}),s.Ns.set(e,r)}class Q0{constructor(){this.activeTargetIds=jN()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Hx{constructor(){this.xo=new Q0,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Q0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="ConnectivityMonitor";class K0{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){me(Y0,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){me(Y0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eh=null;function sp(){return eh===null?eh=function(){return 268435456+Math.round(2147483648*Math.random())}():eh++,"0x"+eh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im="RestConnection",Gx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $x{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${o}`,this.Go=this.databaseId.database===Th?`project_id=${r}`:`project_id=${r}&database_id=${o}`}zo(e,t,r,o,c){const h=sp(),g=this.jo(e,t.toUriEncodedString());me(Im,`Sending RPC '${e}' ${h}:`,g,r);const f={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(f,o,c);const{host:m}=new URL(g),v=ha(m);return this.Jo(e,g,f,r,v).then(T=>(me(Im,`Received RPC '${e}' ${h}: `,T),T),T=>{throw To(Im,`RPC '${e}' ${h} failed with error: `,T,"url: ",g,"request:",r),T})}Yo(e,t,r,o,c,h){return this.zo(e,t,r,o,c)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+No}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,c)=>e[c]=o),r&&r.headers.forEach((o,c)=>e[c]=o)}jo(e,t){const r=Gx[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn="WebChannelConnection";class Yx extends $x{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,o,c){const h=sp();return new Promise((g,f)=>{const m=new LT;m.setWithCredentials(!0),m.listenOnce(UT.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case sh.NO_ERROR:const T=m.getResponseJson();me(sn,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(T)),g(T);break;case sh.TIMEOUT:me(sn,`RPC '${e}' ${h} timed out`),f(new pe(se.DEADLINE_EXCEEDED,"Request time out"));break;case sh.HTTP_ERROR:const b=m.getStatus();if(me(sn,`RPC '${e}' ${h} failed with status:`,b,"response text:",m.getResponseText()),b>0){let O=m.getResponseJson();Array.isArray(O)&&(O=O[0]);const k=O?.error;if(k&&k.status&&k.message){const U=function(re){const J=re.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(J)>=0?J:se.UNKNOWN}(k.status);f(new pe(U,k.message))}else f(new pe(se.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new pe(se.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{h_:e,streamId:h,P_:m.getLastErrorCode(),T_:m.getLastError()})}}finally{me(sn,`RPC '${e}' ${h} completed.`)}});const v=JSON.stringify(o);me(sn,`RPC '${e}' ${h} sending request:`,o),m.send(t,"POST",v,r,15)})}I_(e,t,r){const o=sp(),c=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=FT(),g=BT(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Ho(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const v=c.join("");me(sn,`Creating RPC '${e}' stream ${o}: ${v}`,f);const T=h.createWebChannel(v,f);this.E_(T);let b=!1,O=!1;const k=new Qx({Zo:V=>{O?me(sn,`Not sending because RPC '${e}' stream ${o} is closed:`,V):(b||(me(sn,`Opening RPC '${e}' stream ${o} transport.`),T.open(),b=!0),me(sn,`RPC '${e}' stream ${o} sending:`,V),T.send(V))},Xo:()=>T.close()}),U=(V,re,J)=>{V.listen(re,K=>{try{J(K)}catch(ae){setTimeout(()=>{throw ae},0)}})};return U(T,Kl.EventType.OPEN,()=>{O||(me(sn,`RPC '${e}' stream ${o} transport opened.`),k.__())}),U(T,Kl.EventType.CLOSE,()=>{O||(O=!0,me(sn,`RPC '${e}' stream ${o} transport closed`),k.u_(),this.d_(T))}),U(T,Kl.EventType.ERROR,V=>{O||(O=!0,To(sn,`RPC '${e}' stream ${o} transport errored. Name:`,V.name,"Message:",V.message),k.u_(new pe(se.UNAVAILABLE,"The operation could not be completed")))}),U(T,Kl.EventType.MESSAGE,V=>{var re;if(!O){const J=V.data[0];Xe(!!J,16349);const K=J,ae=K?.error||((re=K[0])===null||re===void 0?void 0:re.error);if(ae){me(sn,`RPC '${e}' stream ${o} received error:`,ae);const le=ae.status;let ye=function(N){const M=St[N];if(M!==void 0)return AA(M)}(le),D=ae.message;ye===void 0&&(ye=se.INTERNAL,D="Unknown error status: "+le+" with message "+ae.message),O=!0,k.u_(new pe(ye,D)),T.close()}else me(sn,`RPC '${e}' stream ${o} received:`,J),k.c_(J)}}),U(g,zT.STAT_EVENT,V=>{V.stat===qm.PROXY?me(sn,`RPC '${e}' stream ${o} detected buffering proxy`):V.stat===qm.NOPROXY&&me(sn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{k.a_()},0),k}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}}function Cm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(s){return new JN(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,t,r=1e3,o=1.5,c=6e4){this.xi=e,this.timerId=t,this.A_=r,this.R_=o,this.V_=c,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const t=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),o=Math.max(0,t-r);o>0&&me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0="PersistentStream";class kA{constructor(e,t,r,o,c,h,g,f){this.xi=e,this.S_=r,this.D_=o,this.connection=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=g,this.listener=f,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new PA(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,t){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===se.RESOURCE_EXHAUSTED?(pi(t.toString()),pi("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.v_===t&&this.z_(r,o)},r=>{e(()=>{const o=new pe(se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(o)})})}z_(e,t){const r=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{r(()=>this.j_(o))}),this.stream.onMessage(o=>{r(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return me(X0,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(me(X0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Kx extends kA{constructor(e,t,r,o,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,h),this.serializer=c}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const t=tx(this.serializer,e),r=function(c){if(!("targetChange"in c))return Ce.min();const h=c.targetChange;return h.targetIds&&h.targetIds.length?Ce.min():h.readTime?xs(h.readTime):Ce.min()}(e);return this.listener.Y_(t,r)}Z_(e){const t={};t.database=tp(this.serializer),t.addTarget=function(c,h){let g;const f=h.target;if(g=Km(f)?{documents:ix(c,f)}:{query:rx(c,f).gt},g.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){g.resumeToken=wA(c,h.resumeToken);const m=Jm(c,h.expectedCount);m!==null&&(g.expectedCount=m)}else if(h.snapshotVersion.compareTo(Ce.min())>0){g.readTime=Rh(c,h.snapshotVersion.toTimestamp());const m=Jm(c,h.expectedCount);m!==null&&(g.expectedCount=m)}return g}(this.serializer,e);const r=ox(this.serializer,e);r&&(t.labels=r),this.Q_(t)}X_(e){const t={};t.database=tp(this.serializer),t.removeTarget=e,this.Q_(t)}}class Xx extends kA{constructor(e,t,r,o,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,h),this.serializer=c}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return Xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){Xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const t=sx(e.writeResults,e.commitTime),r=xs(e.commitTime);return this.listener.ra(r,t)}ia(){const e={};e.database=tp(this.serializer),this.Q_(e)}ta(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>nx(this.serializer,r))};this.Q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{}class Jx extends Zx{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new pe(se.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.zo(e,Wm(t,r),o,c,h)).catch(c=>{throw c.name==="FirebaseError"?(c.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pe(se.UNKNOWN,c.toString())})}Yo(e,t,r,o,c){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,g])=>this.connection.Yo(e,Wm(t,r),o,h,g,c)).catch(h=>{throw h.name==="FirebaseError"?(h.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new pe(se.UNKNOWN,h.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class Wx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(pi(t),this.ua=!1):me("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra="RemoteStore";class e2{constructor(e,t,r,o,c){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=c,this.Ra.No(h=>{r.enqueueAndForget(async()=>{pa(this)&&(me(ra,"Restarting streams for network reachability change."),await async function(f){const m=xe(f);m.da.add(4),await Ac(m),m.Va.set("Unknown"),m.da.delete(4),await nd(m)}(this))})}),this.Va=new Wx(r,o)}}async function nd(s){if(pa(s))for(const e of s.Aa)await e(!0)}async function Ac(s){for(const e of s.Aa)await e(!1)}function LA(s,e){const t=xe(s);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),Gp(t)?qp(t):Mo(t).N_()&&Hp(t,e))}function Fp(s,e){const t=xe(s),r=Mo(t);t.Ea.delete(e),r.N_()&&UA(t,e),t.Ea.size===0&&(r.N_()?r.k_():pa(t)&&t.Va.set("Unknown"))}function Hp(s,e){if(s.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Mo(s).Z_(e)}function UA(s,e){s.ma.Ke(e),Mo(s).X_(e)}function qp(s){s.ma=new YN({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>s.Ea.get(e)||null,Pt:()=>s.datastore.serializer.databaseId}),Mo(s).start(),s.Va.ca()}function Gp(s){return pa(s)&&!Mo(s).O_()&&s.Ea.size>0}function pa(s){return xe(s).da.size===0}function zA(s){s.ma=void 0}async function t2(s){s.Va.set("Online")}async function n2(s){s.Ea.forEach((e,t)=>{Hp(s,e)})}async function s2(s,e){zA(s),Gp(s)?(s.Va.Pa(e),qp(s)):s.Va.set("Unknown")}async function i2(s,e,t){if(s.Va.set("Online"),e instanceof SA&&e.state===2&&e.cause)try{await async function(o,c){const h=c.cause;for(const g of c.targetIds)o.Ea.has(g)&&(await o.remoteSyncer.rejectListen(g,h),o.Ea.delete(g),o.ma.removeTarget(g))}(s,e)}catch(r){me(ra,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ch(s,r)}else if(e instanceof oh?s.ma.Xe(e):e instanceof bA?s.ma.ot(e):s.ma.nt(e),!t.isEqual(Ce.min()))try{const r=await VA(s.localStore);t.compareTo(r)>=0&&await function(c,h){const g=c.ma.It(h);return g.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=c.Ea.get(m);v&&c.Ea.set(m,v.withResumeToken(f.resumeToken,h))}}),g.targetMismatches.forEach((f,m)=>{const v=c.Ea.get(f);if(!v)return;c.Ea.set(f,v.withResumeToken(en.EMPTY_BYTE_STRING,v.snapshotVersion)),UA(c,f);const T=new nr(v.target,f,m,v.sequenceNumber);Hp(c,T)}),c.remoteSyncer.applyRemoteEvent(g)}(s,t)}catch(r){me(ra,"Failed to raise snapshot:",r),await Ch(s,r)}}async function Ch(s,e,t){if(!Do(e))throw e;s.da.add(1),await Ac(s),s.Va.set("Offline"),t||(t=()=>VA(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{me(ra,"Retrying IndexedDB access"),await t(),s.da.delete(1),await nd(s)})}function BA(s,e){return e().catch(t=>Ch(s,t,e))}async function sd(s){const e=xe(s),t=dr(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:Ip;for(;r2(e);)try{const o=await zx(e.localStore,r);if(o===null){e.Ia.length===0&&t.k_();break}r=o.batchId,a2(e,o)}catch(o){await Ch(e,o)}FA(e)&&HA(e)}function r2(s){return pa(s)&&s.Ia.length<10}function a2(s,e){s.Ia.push(e);const t=dr(s);t.N_()&&t.ea&&t.ta(e.mutations)}function FA(s){return pa(s)&&!dr(s).O_()&&s.Ia.length>0}function HA(s){dr(s).start()}async function o2(s){dr(s).ia()}async function l2(s){const e=dr(s);for(const t of s.Ia)e.ta(t.mutations)}async function c2(s,e,t){const r=s.Ia.shift(),o=Vp.from(r,e,t);await BA(s,()=>s.remoteSyncer.applySuccessfulWrite(o)),await sd(s)}async function u2(s,e){e&&dr(s).ea&&await async function(r,o){if(function(h){return $N(h)&&h!==se.ABORTED}(o.code)){const c=r.Ia.shift();dr(r).L_(),await BA(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o)),await sd(r)}}(s,e),FA(s)&&HA(s)}async function Z0(s,e){const t=xe(s);t.asyncQueue.verifyOperationInProgress(),me(ra,"RemoteStore received new credentials");const r=pa(t);t.da.add(3),await Ac(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),await nd(t)}async function h2(s,e){const t=xe(s);e?(t.da.delete(2),await nd(t)):e||(t.da.add(2),await Ac(t),t.Va.set("Unknown"))}function Mo(s){return s.fa||(s.fa=function(t,r,o){const c=xe(t);return c.oa(),new Kx(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(s.datastore,s.asyncQueue,{e_:t2.bind(null,s),n_:n2.bind(null,s),i_:s2.bind(null,s),Y_:i2.bind(null,s)}),s.Aa.push(async e=>{e?(s.fa.L_(),Gp(s)?qp(s):s.Va.set("Unknown")):(await s.fa.stop(),zA(s))})),s.fa}function dr(s){return s.ga||(s.ga=function(t,r,o){const c=xe(t);return c.oa(),new Xx(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(s.datastore,s.asyncQueue,{e_:()=>Promise.resolve(),n_:o2.bind(null,s),i_:u2.bind(null,s),na:l2.bind(null,s),ra:c2.bind(null,s)}),s.Aa.push(async e=>{e?(s.ga.L_(),await sd(s)):(await s.ga.stop(),s.Ia.length>0&&(me(ra,`Stopping write stream with ${s.Ia.length} pending writes`),s.Ia=[]))})),s.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e,t,r,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new fi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,c){const h=Date.now()+r,g=new $p(e,t,h,o,c);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qp(s,e){if(pi("AsyncQueue",`${e}: ${s}`),Do(s))return new pe(se.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{static emptySet(e){return new yo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Te.comparator(t.key,r.key):(t,r)=>Te.comparator(t.key,r.key),this.keyedMap=Xl(),this.sortedSet=new ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof yo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new yo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(){this.pa=new ut(Te.comparator)}track(e){const t=e.doc.key,r=this.pa.get(t);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(t,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(t):e.type===1&&r.type===2?this.pa=this.pa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):Se(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(t,e)}wa(){const e=[];return this.pa.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ro{constructor(e,t,r,o,c,h,g,f,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=g,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,o,c){const h=[];return t.forEach(g=>{h.push({type:0,doc:g})}),new Ro(e,t,yo.emptySet(t),h,r,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class f2{constructor(){this.queries=W0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const o=xe(t),c=o.queries;o.queries=W0(),c.forEach((h,g)=>{for(const f of g.Sa)f.onError(r)})})(this,new pe(se.ABORTED,"Firestore shutting down"))}}function W0(){return new ma(s=>uA(s),Xh)}async function qA(s,e){const t=xe(s);let r=3;const o=e.query;let c=t.queries.get(o);c?!c.Da()&&e.va()&&(r=2):(c=new d2,r=e.va()?0:1);try{switch(r){case 0:c.ba=await t.onListen(o,!0);break;case 1:c.ba=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const g=Qp(h,`Initialization of query '${uo(e.query)}' failed`);return void e.onError(g)}t.queries.set(o,c),c.Sa.push(e),e.Fa(t.onlineState),c.ba&&e.Ma(c.ba)&&Yp(t)}async function GA(s,e){const t=xe(s),r=e.query;let o=3;const c=t.queries.get(r);if(c){const h=c.Sa.indexOf(e);h>=0&&(c.Sa.splice(h,1),c.Sa.length===0?o=e.va()?0:1:!c.Da()&&e.va()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function m2(s,e){const t=xe(s);let r=!1;for(const o of e){const c=o.query,h=t.queries.get(c);if(h){for(const g of h.Sa)g.Ma(o)&&(r=!0);h.ba=o}}r&&Yp(t)}function p2(s,e,t){const r=xe(s),o=r.queries.get(e);if(o)for(const c of o.Sa)c.onError(t);r.queries.delete(e)}function Yp(s){s.Ca.forEach(e=>{e.next()})}var ip,eE;(eE=ip||(ip={})).xa="default",eE.Cache="cache";class $A{constructor(e,t,r){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Ro(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;const r=t!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;const t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=Ro.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==ip.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e){this.key=e}}class YA{constructor(e){this.key=e}}class g2{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Be(),this.mutatedKeys=Be(),this.Za=hA(e),this.Xa=new yo(this.Za)}get eu(){return this.Ha}tu(e,t){const r=t?t.nu:new J0,o=t?t.Xa:this.Xa;let c=t?t.mutatedKeys:this.mutatedKeys,h=o,g=!1;const f=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((v,T)=>{const b=o.get(v),O=Zh(this.query,T)?T:null,k=!!b&&this.mutatedKeys.has(b.key),U=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let V=!1;b&&O?b.data.isEqual(O.data)?k!==U&&(r.track({type:3,doc:O}),V=!0):this.ru(b,O)||(r.track({type:2,doc:O}),V=!0,(f&&this.Za(O,f)>0||m&&this.Za(O,m)<0)&&(g=!0)):!b&&O?(r.track({type:0,doc:O}),V=!0):b&&!O&&(r.track({type:1,doc:b}),V=!0,(f||m)&&(g=!0)),V&&(O?(h=h.add(O),c=U?c.add(v):c.delete(v)):(h=h.delete(v),c=c.delete(v)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const v=this.query.limitType==="F"?h.last():h.first();h=h.delete(v.key),c=c.delete(v.key),r.track({type:1,doc:v})}return{Xa:h,nu:r,Cs:g,mutatedKeys:c}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const c=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const h=e.nu.wa();h.sort((v,T)=>function(O,k){const U=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Vt:V})}};return U(O)-U(k)}(v.type,T.type)||this.Za(v.doc,T.doc)),this.iu(r),o=o!=null&&o;const g=t&&!o?this.su():[],f=this.Ya.size===0&&this.current&&!o?1:0,m=f!==this.Ja;return this.Ja=f,h.length!==0||m?{snapshot:new Ro(this.query,e.Xa,c,h,e.mutatedKeys,f===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:g}:{ou:g}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new J0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Be(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new YA(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new QA(r))}),t}au(e){this.Ha=e.$s,this.Ya=Be();const t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return Ro.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Kp="SyncEngine";class y2{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class v2{constructor(e){this.key=e,this.cu=!1}}class _2{constructor(e,t,r,o,c,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.lu={},this.hu=new ma(g=>uA(g),Xh),this.Pu=new Map,this.Tu=new Set,this.Iu=new ut(Te.comparator),this.Eu=new Map,this.du=new Lp,this.Au={},this.Ru=new Map,this.Vu=wo.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function E2(s,e,t=!0){const r=eb(s);let o;const c=r.hu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.uu()):o=await KA(r,e,t,!0),o}async function T2(s,e){const t=eb(s);await KA(t,e,!0,!1)}async function KA(s,e,t,r){const o=await Bx(s.localStore,Ns(e)),c=o.targetId,h=s.sharedClientState.addLocalQueryTarget(c,t);let g;return r&&(g=await A2(s,e,c,h==="current",o.resumeToken)),s.isPrimaryClient&&t&&LA(s.remoteStore,o),g}async function A2(s,e,t,r,o){s.fu=(T,b,O)=>async function(U,V,re,J){let K=V.view.tu(re);K.Cs&&(K=await $0(U.localStore,V.query,!1).then(({documents:D})=>V.view.tu(D,K)));const ae=J&&J.targetChanges.get(V.targetId),le=J&&J.targetMismatches.get(V.targetId)!=null,ye=V.view.applyChanges(K,U.isPrimaryClient,ae,le);return nE(U,V.targetId,ye.ou),ye.snapshot}(s,T,b,O);const c=await $0(s.localStore,e,!0),h=new g2(e,c.$s),g=h.tu(c.documents),f=Tc.createSynthesizedTargetChangeForCurrentChange(t,r&&s.onlineState!=="Offline",o),m=h.applyChanges(g,s.isPrimaryClient,f);nE(s,t,m.ou);const v=new y2(e,t,h);return s.hu.set(e,v),s.Pu.has(t)?s.Pu.get(t).push(e):s.Pu.set(t,[e]),m.snapshot}async function b2(s,e,t){const r=xe(s),o=r.hu.get(e),c=r.Pu.get(o.targetId);if(c.length>1)return r.Pu.set(o.targetId,c.filter(h=>!Xh(h,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await np(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),t&&Fp(r.remoteStore,o.targetId),rp(r,o.targetId)}).catch(xo)):(rp(r,o.targetId),await np(r.localStore,o.targetId,!0))}async function S2(s,e){const t=xe(s),r=t.hu.get(e),o=t.Pu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Fp(t.remoteStore,r.targetId))}async function w2(s,e,t){const r=O2(s);try{const o=await function(h,g){const f=xe(h),m=Mt.now(),v=g.reduce((O,k)=>O.add(k.key),Be());let T,b;return f.persistence.runTransaction("Locally write mutations","readwrite",O=>{let k=gi(),U=Be();return f.Bs.getEntries(O,v).next(V=>{k=V,k.forEach((re,J)=>{J.isValidDocument()||(U=U.add(re))})}).next(()=>f.localDocuments.getOverlayedDocuments(O,k)).next(V=>{T=V;const re=[];for(const J of g){const K=BN(J,T.get(J.key).overlayedDocument);K!=null&&re.push(new gr(J.key,K,nA(K.value.mapValue),as.exists(!0)))}return f.mutationQueue.addMutationBatch(O,m,re,g)}).next(V=>{b=V;const re=V.applyToLocalDocumentSet(T,U);return f.documentOverlayCache.saveOverlays(O,V.batchId,re)})}).then(()=>({batchId:b.batchId,changes:fA(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(h,g,f){let m=h.Au[h.currentUser.toKey()];m||(m=new ut(Ve)),m=m.insert(g,f),h.Au[h.currentUser.toKey()]=m}(r,o.batchId,t),await bc(r,o.changes),await sd(r.remoteStore)}catch(o){const c=Qp(o,"Failed to persist write");t.reject(c)}}async function XA(s,e){const t=xe(s);try{const r=await Lx(t.localStore,e);e.targetChanges.forEach((o,c)=>{const h=t.Eu.get(c);h&&(Xe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.cu=!0:o.modifiedDocuments.size>0?Xe(h.cu,14607):o.removedDocuments.size>0&&(Xe(h.cu,42227),h.cu=!1))}),await bc(t,r,e)}catch(r){await xo(r)}}function tE(s,e,t){const r=xe(s);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.hu.forEach((c,h)=>{const g=h.view.Fa(e);g.snapshot&&o.push(g.snapshot)}),function(h,g){const f=xe(h);f.onlineState=g;let m=!1;f.queries.forEach((v,T)=>{for(const b of T.Sa)b.Fa(g)&&(m=!0)}),m&&Yp(f)}(r.eventManager,e),o.length&&r.lu.Y_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function R2(s,e,t){const r=xe(s);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Eu.get(e),c=o&&o.key;if(c){let h=new ut(Te.comparator);h=h.insert(c,an.newNoDocument(c,Ce.min()));const g=Be().add(c),f=new ed(Ce.min(),new Map,new ut(Ve),h,g);await XA(r,f),r.Iu=r.Iu.remove(c),r.Eu.delete(e),Xp(r)}else await np(r.localStore,e,!1).then(()=>rp(r,e,t)).catch(xo)}async function I2(s,e){const t=xe(s),r=e.batch.batchId;try{const o=await kx(t.localStore,e);JA(t,r,null),ZA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await bc(t,o)}catch(o){await xo(o)}}async function C2(s,e,t){const r=xe(s);try{const o=await function(h,g){const f=xe(h);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return f.mutationQueue.lookupMutationBatch(m,g).next(T=>(Xe(T!==null,37113),v=T.keys(),f.mutationQueue.removeMutationBatch(m,T))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,g)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>f.localDocuments.getDocuments(m,v))})}(r.localStore,e);JA(r,e,t),ZA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await bc(r,o)}catch(o){await xo(o)}}function ZA(s,e){(s.Ru.get(e)||[]).forEach(t=>{t.resolve()}),s.Ru.delete(e)}function JA(s,e,t){const r=xe(s);let o=r.Au[r.currentUser.toKey()];if(o){const c=o.get(e);c&&(t?c.reject(t):c.resolve(),o=o.remove(e)),r.Au[r.currentUser.toKey()]=o}}function rp(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Pu.get(e))s.hu.delete(r),t&&s.lu.gu(r,t);s.Pu.delete(e),s.isPrimaryClient&&s.du.Hr(e).forEach(r=>{s.du.containsKey(r)||WA(s,r)})}function WA(s,e){s.Tu.delete(e.path.canonicalString());const t=s.Iu.get(e);t!==null&&(Fp(s.remoteStore,t),s.Iu=s.Iu.remove(e),s.Eu.delete(t),Xp(s))}function nE(s,e,t){for(const r of t)r instanceof QA?(s.du.addReference(r.key,e),N2(s,r)):r instanceof YA?(me(Kp,"Document no longer in limbo: "+r.key),s.du.removeReference(r.key,e),s.du.containsKey(r.key)||WA(s,r.key)):Se(19791,{pu:r})}function N2(s,e){const t=e.key,r=t.path.canonicalString();s.Iu.get(t)||s.Tu.has(r)||(me(Kp,"New document in limbo: "+t),s.Tu.add(r),Xp(s))}function Xp(s){for(;s.Tu.size>0&&s.Iu.size<s.maxConcurrentLimboResolutions;){const e=s.Tu.values().next().value;s.Tu.delete(e);const t=new Te(at.fromString(e)),r=s.Vu.next();s.Eu.set(r,new v2(t)),s.Iu=s.Iu.insert(t,r),LA(s.remoteStore,new nr(Ns(Op(t.path)),r,"TargetPurposeLimboResolution",Qh.le))}}async function bc(s,e,t){const r=xe(s),o=[],c=[],h=[];r.hu.isEmpty()||(r.hu.forEach((g,f)=>{h.push(r.fu(f,e,t).then(m=>{var v;if((m||t)&&r.isPrimaryClient){const T=m?!m.fromCache:(v=t?.targetChanges.get(f.targetId))===null||v===void 0?void 0:v.current;r.sharedClientState.updateQueryState(f.targetId,T?"current":"not-current")}if(m){o.push(m);const T=zp.Rs(f.targetId,m);c.push(T)}}))}),await Promise.all(h),r.lu.Y_(o),await async function(f,m){const v=xe(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>ie.forEach(m,b=>ie.forEach(b.ds,O=>v.persistence.referenceDelegate.addReference(T,b.targetId,O)).next(()=>ie.forEach(b.As,O=>v.persistence.referenceDelegate.removeReference(T,b.targetId,O)))))}catch(T){if(!Do(T))throw T;me(Bp,"Failed to update sequence numbers: "+T)}for(const T of m){const b=T.targetId;if(!T.fromCache){const O=v.xs.get(b),k=O.snapshotVersion,U=O.withLastLimboFreeSnapshotVersion(k);v.xs=v.xs.insert(b,U)}}}(r.localStore,c))}async function x2(s,e){const t=xe(s);if(!t.currentUser.isEqual(e)){me(Kp,"User change. New user:",e.toKey());const r=await jA(t.localStore,e);t.currentUser=e,function(c,h){c.Ru.forEach(g=>{g.forEach(f=>{f.reject(new pe(se.CANCELLED,h))})}),c.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await bc(t,r.ks)}}function D2(s,e){const t=xe(s),r=t.Eu.get(e);if(r&&r.cu)return Be().add(r.key);{let o=Be();const c=t.Pu.get(e);if(!c)return o;for(const h of c){const g=t.hu.get(h);o=o.unionWith(g.view.eu)}return o}}function eb(s){const e=xe(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=XA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=D2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=R2.bind(null,e),e.lu.Y_=m2.bind(null,e.eventManager),e.lu.gu=p2.bind(null,e.eventManager),e}function O2(s){const e=xe(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=I2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=C2.bind(null,e),e}class Nh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=td(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,t){return null}Cu(e,t){return null}Du(e){return Px(this.persistence,new Mx,e.initialUser,this.serializer)}Su(e){return new MA(Up.fi,this.serializer)}bu(e){return new Hx}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nh.provider={build:()=>new Nh};class M2 extends Nh{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){Xe(this.persistence.referenceDelegate instanceof Ih,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new vx(r,e.asyncQueue,t)}Su(e){const t=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new MA(r=>Ih.fi(r,t),this.serializer)}}class ap{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>tE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=x2.bind(null,this.syncEngine),await h2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new f2}()}createDatastore(e){const t=td(e.databaseInfo.databaseId),r=function(c){return new Yx(c)}(e.databaseInfo);return function(c,h,g,f){return new Jx(c,h,g,f)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,o,c,h,g){return new e2(r,o,c,h,g)}(this.localStore,this.datastore,e.asyncQueue,t=>tE(this.syncEngine,t,0),function(){return K0.C()?new K0:new qx}())}createSyncEngine(e,t){return function(o,c,h,g,f,m,v){const T=new _2(o,c,h,g,f,m);return v&&(T.mu=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const c=xe(o);me(ra,"RemoteStore shutting down."),c.da.add(5),await Ac(c),c.Ra.shutdown(),c.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}ap.provider={build:()=>new ap};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):pi("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr="FirestoreClient";class j2{constructor(e,t,r,o,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=rn.UNAUTHENTICATED,this.clientId=$T.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,async h=>{me(fr,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(r,h=>(me(fr,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Qp(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Nm(s,e){s.asyncQueue.verifyOperationInProgress(),me(fr,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let r=t.initialUser;s.setCredentialChangeListener(async o=>{r.isEqual(o)||(await jA(e.localStore,o),r=o)}),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}async function sE(s,e){s.asyncQueue.verifyOperationInProgress();const t=await V2(s);me(fr,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener(r=>Z0(e.remoteStore,r)),s.setAppCheckTokenChangeListener((r,o)=>Z0(e.remoteStore,o)),s._onlineComponents=e}async function V2(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){me(fr,"Using user provided OfflineComponentProvider");try{await Nm(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===se.FAILED_PRECONDITION||o.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;To("Error using user provided cache. Falling back to memory cache: "+t),await Nm(s,new Nh)}}else me(fr,"Using default OfflineComponentProvider"),await Nm(s,new M2(void 0));return s._offlineComponents}async function nb(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(me(fr,"Using user provided OnlineComponentProvider"),await sE(s,s._uninitializedComponentsProvider._online)):(me(fr,"Using default OnlineComponentProvider"),await sE(s,new ap))),s._onlineComponents}function P2(s){return nb(s).then(e=>e.syncEngine)}async function sb(s){const e=await nb(s),t=e.eventManager;return t.onListen=E2.bind(null,e.syncEngine),t.onUnlisten=b2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=T2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=S2.bind(null,e.syncEngine),t}function k2(s,e,t={}){const r=new fi;return s.asyncQueue.enqueueAndForget(async()=>function(c,h,g,f,m){const v=new tb({next:b=>{v.xu(),h.enqueueAndForget(()=>GA(c,T));const O=b.docs.has(g);!O&&b.fromCache?m.reject(new pe(se.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&b.fromCache&&f&&f.source==="server"?m.reject(new pe(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(b)},error:b=>m.reject(b)}),T=new $A(Op(g.path),v,{includeMetadataChanges:!0,Qa:!0});return qA(c,T)}(await sb(s),s.asyncQueue,e,t,r)),r.promise}function L2(s,e,t={}){const r=new fi;return s.asyncQueue.enqueueAndForget(async()=>function(c,h,g,f,m){const v=new tb({next:b=>{v.xu(),h.enqueueAndForget(()=>GA(c,T)),b.fromCache&&f.source==="server"?m.reject(new pe(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(b)},error:b=>m.reject(b)}),T=new $A(g,v,{includeMetadataChanges:!0,Qa:!0});return qA(c,T)}(await sb(s),s.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(s,e,t){if(!t)throw new pe(se.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function U2(s,e,t,r){if(e===!0&&r===!0)throw new pe(se.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function rE(s){if(!Te.isDocumentKey(s))throw new pe(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function aE(s){if(Te.isDocumentKey(s))throw new pe(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function id(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Se(12329,{type:typeof s})}function yi(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new pe(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=id(s);throw new pe(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab="firestore.googleapis.com",oE=!0;class lE{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new pe(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ab,this.ssl=oE}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:oE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=OA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<gx)throw new pe(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}U2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ib((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new pe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new pe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new pe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rd{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new QC;switch(r.type){case"firstParty":return new ZC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pe(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=iE.get(t);r&&(me("ComponentProvider","Removing Datastore"),iE.delete(t),r.terminate())}(this),Promise.resolve()}}function z2(s,e,t,r={}){var o;s=yi(s,rd);const c=ha(e),h=s._getSettings(),g=Object.assign(Object.assign({},h),{emulatorOptions:s._getEmulatorOptions()}),f=`${e}:${t}`;c&&(vp(`https://${f}`),_p("Firestore",!0)),h.host!==ab&&h.host!==f&&To("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},h),{host:f,ssl:c,emulatorOptions:r});if(!or(m,g)&&(s._setSettings(m),r.mockUserToken)){let v,T;if(typeof r.mockUserToken=="string")v=r.mockUserToken,T=rn.MOCK_USER;else{v=rT(r.mockUserToken,(o=s._app)===null||o===void 0?void 0:o.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new pe(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new rn(b)}s._authCredentials=new YC(new qT(v,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ga(this.firestore,e,this._query)}}class Sn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ar(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Sn(this.firestore,e,this._key)}}class ar extends ga{constructor(e,t,r){super(e,t,Op(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Sn(this.firestore,null,new Te(e))}withConverter(e){return new ar(this.firestore,e,this._path)}}function jo(s,e,...t){if(s=Ft(s),rb("collection","path",e),s instanceof rd){const r=at.fromString(e,...t);return aE(r),new ar(s,null,r)}{if(!(s instanceof Sn||s instanceof ar))throw new pe(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(at.fromString(e,...t));return aE(r),new ar(s.firestore,null,r)}}function Cs(s,e,...t){if(s=Ft(s),arguments.length===1&&(e=$T.newId()),rb("doc","path",e),s instanceof rd){const r=at.fromString(e,...t);return rE(r),new Sn(s,null,new Te(r))}{if(!(s instanceof Sn||s instanceof ar))throw new pe(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(at.fromString(e,...t));return rE(r),new Sn(s.firestore,s instanceof ar?s.converter:null,new Te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="AsyncQueue";class uE{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new PA(this,"async_queue_retry"),this.rc=()=>{const r=Cm();r&&me(cE,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const t=Cm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const t=Cm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const t=new fi;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Do(e))throw e;me(cE,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const t=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,pi("INTERNAL UNHANDLED ERROR: ",hE(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=t,t}enqueueAfterDelay(e,t,r){this.oc(),this.nc.indexOf(e)>-1&&(t=0);const o=$p.createAndSchedule(this,e,t,r,c=>this.uc(c));return this.Zu.push(o),o}oc(){this.Xu&&Se(47125,{cc:hE(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const t=this.Zu.indexOf(e);this.Zu.splice(t,1)}}function hE(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Vo extends rd{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new uE,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new uE(e),this._firestoreClient=void 0,await e}}}function B2(s,e){const t=typeof s=="object"?s:qh(),r=typeof s=="string"?s:Th,o=mr(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const c=nT("firestore");c&&z2(o,...c)}return o}function Zp(s){if(s._terminated)throw new pe(se.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||F2(s),s._firestoreClient}function F2(s){var e,t,r;const o=s._freezeSettings(),c=function(g,f,m,v){return new dN(g,f,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,ib(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)}(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,o);s._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(s._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),s._firestoreClient=new j2(s._authCredentials,s._appCheckCredentials,s._queue,c,s._componentsProvider&&function(g){const f=g?._online.build();return{_offline:g?._offline.build(f),_online:f}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Io(en.fromBase64String(e))}catch(t){throw new pe(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Io(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,o){if(r.length!==o.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==o[c])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2=/^__.*__$/;class q2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new gr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ec(e,this.data,t,this.fieldTransforms)}}class ob{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new gr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function lb(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ic:s})}}class tg{constructor(e,t,r,o,c,h){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,c===void 0&&this.Ec(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new tg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.dc({path:r,Rc:!1});return o.Vc(e),o}mc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.dc({path:r,Rc:!1});return o.Ec(),o}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return xh(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(lb(this.Ic)&&H2.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class G2{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||td(e)}bc(e,t,r,o=!1){return new tg({Ic:e,methodName:t,wc:r,path:Zt.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ng(s){const e=s._freezeSettings(),t=td(s._databaseId);return new G2(s._databaseId,!!e.ignoreUndefinedProperties,t)}function $2(s,e,t,r,o,c={}){const h=s.bc(c.merge||c.mergeFields?2:0,e,t,o);sg("Data must be an object, but it was:",h,r);const g=cb(r,h);let f,m;if(c.merge)f=new jn(h.fieldMask),m=h.fieldTransforms;else if(c.mergeFields){const v=[];for(const T of c.mergeFields){const b=op(e,T,t);if(!h.contains(b))throw new pe(se.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);hb(v,b)||v.push(b)}f=new jn(v),m=h.fieldTransforms.filter(T=>f.covers(T.field))}else f=null,m=h.fieldTransforms;return new q2(new Tn(g),f,m)}class od extends Jp{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof od}}function Q2(s,e,t,r){const o=s.bc(1,e,t);sg("Data must be an object, but it was:",o,r);const c=[],h=Tn.empty();pr(r,(f,m)=>{const v=ig(e,f,t);m=Ft(m);const T=o.mc(v);if(m instanceof od)c.push(v);else{const b=Sc(m,T);b!=null&&(c.push(v),h.set(v,b))}});const g=new jn(c);return new ob(h,g,o.fieldTransforms)}function Y2(s,e,t,r,o,c){const h=s.bc(1,e,t),g=[op(e,r,t)],f=[o];if(c.length%2!=0)throw new pe(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<c.length;b+=2)g.push(op(e,c[b])),f.push(c[b+1]);const m=[],v=Tn.empty();for(let b=g.length-1;b>=0;--b)if(!hb(m,g[b])){const O=g[b];let k=f[b];k=Ft(k);const U=h.mc(O);if(k instanceof od)m.push(O);else{const V=Sc(k,U);V!=null&&(m.push(O),v.set(O,V))}}const T=new jn(m);return new ob(v,T,h.fieldTransforms)}function K2(s,e,t,r=!1){return Sc(t,s.bc(r?4:3,e))}function Sc(s,e){if(ub(s=Ft(s)))return sg("Unsupported field value:",e,s),cb(s,e);if(s instanceof Jp)return function(r,o){if(!lb(o.Ic))throw o.gc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.gc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(o);c&&o.fieldTransforms.push(c)}(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,o){const c=[];let h=0;for(const g of r){let f=Sc(g,o.fc(h));f==null&&(f={nullValue:"NULL_VALUE"}),c.push(f),h++}return{arrayValue:{values:c}}}(s,e)}return function(r,o){if((r=Ft(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return VN(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=Mt.fromDate(r);return{timestampValue:Rh(o.serializer,c)}}if(r instanceof Mt){const c=new Mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Rh(o.serializer,c)}}if(r instanceof Wp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Io)return{bytesValue:wA(o.serializer,r._byteString)};if(r instanceof Sn){const c=o.databaseId,h=r.firestore._databaseId;if(!h.isEqual(c))throw o.gc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:kp(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof eg)return function(h,g){return{mapValue:{fields:{[eA]:{stringValue:tA},[Ah]:{arrayValue:{values:h.toArray().map(m=>{if(typeof m!="number")throw g.gc("VectorValues must only contain numeric values.");return Mp(g.serializer,m)})}}}}}}(r,o);throw o.gc(`Unsupported field value: ${id(r)}`)}(s,e)}function cb(s,e){const t={};return YT(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pr(s,(r,o)=>{const c=Sc(o,e.Ac(r));c!=null&&(t[r]=c)}),{mapValue:{fields:t}}}function ub(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Mt||s instanceof Wp||s instanceof Io||s instanceof Sn||s instanceof Jp||s instanceof eg)}function sg(s,e,t){if(!ub(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const r=id(t);throw r==="an object"?e.gc(s+" a custom object"):e.gc(s+" "+r)}}function op(s,e,t){if((e=Ft(e))instanceof ad)return e._internalPath;if(typeof e=="string")return ig(s,e);throw xh("Field path arguments must be of type string or ",s,!1,void 0,t)}const X2=new RegExp("[~\\*/\\[\\]]");function ig(s,e,t){if(e.search(X2)>=0)throw xh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new ad(...e.split("."))._internalPath}catch{throw xh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function xh(s,e,t,r,o){const c=r&&!r.isEmpty(),h=o!==void 0;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let f="";return(c||h)&&(f+=" (found",c&&(f+=` in field ${r}`),h&&(f+=` in document ${o}`),f+=")"),new pe(se.INVALID_ARGUMENT,g+s+f)}function hb(s,e){return s.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e,t,r,o,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Z2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ld("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Z2 extends db{data(){return super.data()}}function ld(s,e){return typeof e=="string"?ig(s,e):e instanceof ad?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new pe(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rg{}class fb extends rg{}function mo(s,e,...t){let r=[];e instanceof rg&&r.push(e),r=r.concat(t),function(c){const h=c.filter(f=>f instanceof ag).length,g=c.filter(f=>f instanceof cd).length;if(h>1||h>0&&g>0)throw new pe(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)s=o._apply(s);return s}class cd extends fb{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new cd(e,t,r)}_apply(e){const t=this._parse(e);return mb(e._query,t),new ga(e.firestore,e.converter,Xm(e._query,t))}_parse(e){const t=ng(e.firestore);return function(c,h,g,f,m,v,T){let b;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new pe(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){mE(T,v);const k=[];for(const U of T)k.push(fE(f,c,U));b={arrayValue:{values:k}}}else b=fE(f,c,T)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||mE(T,v),b=K2(g,h,T,v==="in"||v==="not-in");return Rt.create(m,v,b)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Zr(s,e,t){const r=e,o=ld("where",s);return cd._create(o,r,t)}class ag extends rg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ag(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ls.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,c){let h=o;const g=c.getFlattenedFilters();for(const f of g)mb(h,f),h=Xm(h,f)}(e._query,t),new ga(e.firestore,e.converter,Xm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class og extends fb{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new og(e,t)}_apply(e){const t=function(o,c,h){if(o.startAt!==null)throw new pe(se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new pe(se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fc(c,h)}(e._query,this._field,this._direction);return new ga(e.firestore,e.converter,function(o,c){const h=o.explicitOrderBy.concat([c]);return new Oo(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function dE(s,e="asc"){const t=e,r=ld("orderBy",s);return og._create(r,t)}function fE(s,e,t){if(typeof(t=Ft(t))=="string"){if(t==="")throw new pe(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cA(e)&&t.indexOf("/")!==-1)throw new pe(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(at.fromString(t));if(!Te.isDocumentKey(r))throw new pe(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return I0(s,new Te(r))}if(t instanceof Sn)return I0(s,t._key);throw new pe(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${id(t)}.`)}function mE(s,e){if(!Array.isArray(s)||s.length===0)throw new pe(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mb(s,e){const t=function(o,c){for(const h of o)for(const g of h.getFlattenedFilters())if(c.indexOf(g.op)>=0)return g.op;return null}(s.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new pe(se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class W2{convertValue(e,t="none"){switch(hr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ur(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return pr(e,(o,c)=>{r[o]=this.convertValue(c,t)}),r}convertVectorValue(e){var t,r,o;const c=(o=(r=(t=e.fields)===null||t===void 0?void 0:t[Ah].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(h=>yt(h.doubleValue));return new eg(c)}convertGeoPoint(e){return new Wp(yt(e.latitude),yt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Kh(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(uc(e));default:return null}}convertTimestamp(e){const t=cr(e);return new Mt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=at.fromString(e);Xe(DA(r),9688,{name:e});const o=new hc(r.get(1),r.get(3)),c=new Te(r.popFirst(5));return o.isEqual(t)||pi(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(s,e,t){let r;return r=s?s.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pb extends db{constructor(e,t,r,o,c,h){super(e,t,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new lh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ld("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class lh extends pb{data(e={}){return super.data(e)}}class tD{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Jl(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new lh(this._firestore,this._userDataWriter,r.key,r,new Jl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,c){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(g=>{const f=new lh(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Jl(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:f,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(g=>c||g.type!==3).map(g=>{const f=new lh(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Jl(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,v=-1;return g.type!==0&&(m=h.indexOf(g.doc.key),h=h.delete(g.doc.key)),g.type!==1&&(h=h.add(g.doc),v=h.indexOf(g.doc.key)),{type:nD(g.type),doc:f,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function nD(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(s){s=yi(s,Sn);const e=yi(s.firestore,Vo);return k2(Zp(e),s._key).then(t=>sD(e,s,t))}class gb extends W2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Io(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Sn(this.firestore,null,t)}}function En(s){s=yi(s,ga);const e=yi(s.firestore,Vo),t=Zp(e),r=new gb(e);return J2(s._query),L2(t,s._query).then(o=>new tD(e,r,s,o))}function xm(s,e,t,...r){s=yi(s,Sn);const o=yi(s.firestore,Vo),c=ng(o);let h;return h=typeof(e=Ft(e))=="string"||e instanceof ad?Y2(c,"updateDoc",s._key,e,t,r):Q2(c,"updateDoc",s._key,e),lg(o,[h.toMutation(s._key,as.exists(!0))])}function ch(s){return lg(yi(s.firestore,Vo),[new jp(s._key,as.none())])}function uh(s,e){const t=yi(s.firestore,Vo),r=Cs(s),o=eD(s.converter,e);return lg(t,[$2(ng(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,as.exists(!1))]).then(()=>r)}function lg(s,e){return function(r,o){const c=new fi;return r.asyncQueue.enqueueAndForget(async()=>w2(await P2(r),o,c)),c.promise}(Zp(s),e)}function sD(s,e,t){const r=t.docs.get(e._key),o=new gb(s);return new pb(s,o,e._key,r,new Jl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){No=o})(fa),os(new Kn("firestore",(r,{instanceIdentifier:o,options:c})=>{const h=r.getProvider("app").getImmediate(),g=new Vo(new KC(r.getProvider("auth-internal")),new JC(h,r.getProvider("app-check-internal")),function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new pe(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hc(m.options.projectId,v)}(h,o),h);return c=Object.assign({useFetchStreams:t},c),g._setSettings(c),g},"PUBLIC").setMultipleInstances(!0)),An(p0,g0,e),An(p0,g0,"esm2017")})();function cg(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(s);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(s,r[o])&&(t[r[o]]=s[r[o]]);return t}function yb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const iD=yb,vb=new da("auth","Firebase",yb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh=new Hh("@firebase/auth");function rD(s,...e){Dh.logLevel<=ze.WARN&&Dh.warn(`Auth (${fa}): ${s}`,...e)}function hh(s,...e){Dh.logLevel<=ze.ERROR&&Dh.error(`Auth (${fa}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(s,...e){throw ug(s,...e)}function Ds(s,...e){return ug(s,...e)}function _b(s,e,t){const r=Object.assign(Object.assign({},iD()),{[e]:t});return new da("auth","Firebase",r).create(e,{appName:s.name})}function ta(s){return _b(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ug(s,...e){if(typeof s!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(t,...r)}return vb.create(s,...e)}function Ie(s,e,...t){if(!s)throw ug(e,...t)}function hi(s){const e="INTERNAL ASSERTION FAILED: "+s;throw hh(e),new Error(e)}function _i(s,e){s||hi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function aD(){return pE()==="http:"||pE()==="https:"}function pE(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aD()||aT()||"connection"in navigator)?navigator.onLine:!0}function lD(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,t){this.shortDelay=e,this.longDelay=t,_i(t>e,"Short delay should be less than long delay!"),this.isMobile=tR()||iR()}get(){return oD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(s,e){_i(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hD=new wc(3e4,6e4);function dg(s,e){return s.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:s.tenantId}):e}async function Po(s,e,t,r,o={}){return Tb(s,o,async()=>{let c={},h={};r&&(e==="GET"?h=r:c={body:JSON.stringify(r)});const g=_c(Object.assign({key:s.config.apiKey},h)).slice(1),f=await s._getAdditionalHeaders();f["Content-Type"]="application/json",s.languageCode&&(f["X-Firebase-Locale"]=s.languageCode);const m=Object.assign({method:e,headers:f},c);return sR()||(m.referrerPolicy="no-referrer"),s.emulatorConfig&&ha(s.emulatorConfig.host)&&(m.credentials="include"),Eb.fetch()(await Ab(s,s.config.apiHost,t,g),m)})}async function Tb(s,e,t){s._canInitEmulator=!1;const r=Object.assign(Object.assign({},cD),e);try{const o=new fD(s),c=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await c.json();if("needConfirmation"in h)throw th(s,"account-exists-with-different-credential",h);if(c.ok&&!("errorMessage"in h))return h;{const g=c.ok?h.errorMessage:h.error.message,[f,m]=g.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw th(s,"credential-already-in-use",h);if(f==="EMAIL_EXISTS")throw th(s,"email-already-in-use",h);if(f==="USER_DISABLED")throw th(s,"user-disabled",h);const v=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw _b(s,v,m);vi(s,v)}}catch(o){if(o instanceof Xn)throw o;vi(s,"network-request-failed",{message:String(o)})}}async function dD(s,e,t,r,o={}){const c=await Po(s,e,t,r,o);return"mfaPendingCredential"in c&&vi(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function Ab(s,e,t,r){const o=`${e}${t}?${r}`,c=s,h=c.config.emulator?hg(s.config,o):`${s.config.apiScheme}://${o}`;return uD.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(h).toString():h}class fD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ds(this.auth,"network-request-failed")),hD.get())})}}function th(s,e,t){const r={appName:s.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=Ds(s,e,r);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mD(s,e){return Po(s,"POST","/v1/accounts:delete",e)}async function Oh(s,e){return Po(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pD(s,e=!1){const t=Ft(s),r=await t.getIdToken(e),o=fg(r);Ie(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,h=c?.sign_in_provider;return{claims:o,token:r,authTime:rc(Dm(o.auth_time)),issuedAtTime:rc(Dm(o.iat)),expirationTime:rc(Dm(o.exp)),signInProvider:h||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Dm(s){return Number(s)*1e3}function fg(s){const[e,t,r]=s.split(".");if(e===void 0||t===void 0||r===void 0)return hh("JWT malformed, contained fewer than 3 sections"),null;try{const o=eT(t);return o?JSON.parse(o):(hh("Failed to decode base64 JWT payload"),null)}catch(o){return hh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function gE(s){const e=fg(s);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gc(s,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Xn&&gD(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function gD({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=rc(this.lastLoginAt),this.creationTime=rc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mh(s){var e;const t=s.auth,r=await s.getIdToken(),o=await gc(s,Oh(t,{idToken:r}));Ie(o?.users.length,t,"internal-error");const c=o.users[0];s._notifyReloadListener(c);const h=!((e=c.providerUserInfo)===null||e===void 0)&&e.length?bb(c.providerUserInfo):[],g=_D(s.providerData,h),f=s.isAnonymous,m=!(s.email&&c.passwordHash)&&!g?.length,v=f?m:!1,T={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:g,metadata:new up(c.createdAt,c.lastLoginAt),isAnonymous:v};Object.assign(s,T)}async function vD(s){const e=Ft(s);await Mh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function _D(s,e){return[...s.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function bb(s){return s.map(e=>{var{providerId:t}=e,r=cg(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ED(s,e){const t=await Tb(s,{},async()=>{const r=_c({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=s.config,h=await Ab(s,o,"/v1/token",`key=${c}`),g=await s._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:g,body:r};return s.emulatorConfig&&ha(s.emulatorConfig.host)&&(f.credentials="include"),Eb.fetch()(h,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function TD(s,e){return Po(s,"POST","/v2/accounts:revokeToken",dg(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):gE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=gE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:c}=await ED(e,t);this.updateTokensAndExpiration(r,o,Number(c))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:c}=t,h=new vo;return r&&(Ie(typeof r=="string","internal-error",{appName:e}),h.refreshToken=r),o&&(Ie(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),c&&(Ie(typeof c=="number","internal-error",{appName:e}),h.expirationTime=c),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vo,this.toJSON())}_performRefresh(){return hi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xi(s,e){Ie(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class is{constructor(e){var{uid:t,auth:r,stsTokenManager:o}=e,c=cg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new up(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){const t=await gc(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return pD(this,e)}reload(){return vD(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new is(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Mh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ns(this.auth.app))return Promise.reject(ta(this.auth));const e=await this.getIdToken();return await gc(this,mD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,o,c,h,g,f,m,v;const T=(r=t.displayName)!==null&&r!==void 0?r:void 0,b=(o=t.email)!==null&&o!==void 0?o:void 0,O=(c=t.phoneNumber)!==null&&c!==void 0?c:void 0,k=(h=t.photoURL)!==null&&h!==void 0?h:void 0,U=(g=t.tenantId)!==null&&g!==void 0?g:void 0,V=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,re=(m=t.createdAt)!==null&&m!==void 0?m:void 0,J=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:K,emailVerified:ae,isAnonymous:le,providerData:ye,stsTokenManager:D}=t;Ie(K&&D,e,"internal-error");const R=vo.fromJSON(this.name,D);Ie(typeof K=="string",e,"internal-error"),Xi(T,e.name),Xi(b,e.name),Ie(typeof ae=="boolean",e,"internal-error"),Ie(typeof le=="boolean",e,"internal-error"),Xi(O,e.name),Xi(k,e.name),Xi(U,e.name),Xi(V,e.name),Xi(re,e.name),Xi(J,e.name);const N=new is({uid:K,auth:e,email:b,emailVerified:ae,displayName:T,isAnonymous:le,photoURL:k,phoneNumber:O,tenantId:U,stsTokenManager:R,createdAt:re,lastLoginAt:J});return ye&&Array.isArray(ye)&&(N.providerData=ye.map(M=>Object.assign({},M))),V&&(N._redirectEventId=V),N}static async _fromIdTokenResponse(e,t,r=!1){const o=new vo;o.updateFromServerResponse(t);const c=new is({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Mh(c),c}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];Ie(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?bb(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!c?.length,g=new vo;g.updateFromIdToken(r);const f=new is({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:h}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new up(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE=new Map;function di(s){_i(s instanceof Function,"Expected a class definition");let e=yE.get(s);return e?(_i(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,yE.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Sb.type="NONE";const vE=Sb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(s,e,t){return`firebase:${s}:${e}:${t}`}class _o{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:c}=this.auth;this.fullUserKey=dh(this.userKey,o.apiKey,c),this.fullPersistenceKey=dh("persistence",o.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Oh(this.auth,{idToken:e}).catch(()=>{});return t?is._fromGetAccountInfoResponse(this.auth,t,e):null}return is._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new _o(di(vE),e,r);const o=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let c=o[0]||di(vE);const h=dh(r,e.config.apiKey,e.name);let g=null;for(const m of t)try{const v=await m._get(h);if(v){let T;if(typeof v=="string"){const b=await Oh(e,{idToken:v}).catch(()=>{});if(!b)break;T=await is._fromGetAccountInfoResponse(e,b,v)}else T=is._fromJSON(e,v);m!==c&&(g=T),c=m;break}}catch{}const f=o.filter(m=>m._shouldAllowMigration);return!c._shouldAllowMigration||!f.length?new _o(c,e,r):(c=f[0],g&&await c._set(h,g.toJSON()),await Promise.all(t.map(async m=>{if(m!==c)try{await m._remove(h)}catch{}})),new _o(c,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Cb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xb(e))return"Blackberry";if(Db(e))return"Webos";if(Rb(e))return"Safari";if((e.includes("chrome/")||Ib(e))&&!e.includes("edge/"))return"Chrome";if(Nb(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(t);if(r?.length===2)return r[1]}return"Other"}function wb(s=on()){return/firefox\//i.test(s)}function Rb(s=on()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ib(s=on()){return/crios\//i.test(s)}function Cb(s=on()){return/iemobile/i.test(s)}function Nb(s=on()){return/android/i.test(s)}function xb(s=on()){return/blackberry/i.test(s)}function Db(s=on()){return/webos/i.test(s)}function mg(s=on()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function AD(s=on()){var e;return mg(s)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function bD(){return rR()&&document.documentMode===10}function Ob(s=on()){return mg(s)||Nb(s)||Db(s)||xb(s)||/windows phone/i.test(s)||Cb(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(s,e=[]){let t;switch(s){case"Browser":t=_E(on());break;case"Worker":t=`${_E(on())}-${s}`;break;default:t=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${fa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=c=>new Promise((h,g)=>{try{const f=e(c);h(f)}catch(f){g(f)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wD(s,e={}){return Po(s,"GET","/v2/passwordPolicy",dg(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD=6;class ID{constructor(e){var t,r,o,c;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:RD,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(c=e.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,o,c,h,g;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(o=f.containsLowercaseLetter)!==null&&o!==void 0?o:!0),f.isValid&&(f.isValid=(c=f.containsUppercaseLetter)!==null&&c!==void 0?c:!0),f.isValid&&(f.isValid=(h=f.containsNumericCharacter)!==null&&h!==void 0?h:!0),f.isValid&&(f.isValid=(g=f.containsNonAlphanumericCharacter)!==null&&g!==void 0?g:!0),f}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new EE(this),this.idTokenSubscription=new EE(this),this.beforeStateQueue=new SD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=di(t)),this._initializationPromise=this.queue(async()=>{var r,o,c;if(!this._deleted&&(this.persistenceManager=await _o.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Oh(this,{idToken:e}),r=await is._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ns(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(g,g))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,g=o?._redirectEventId,f=await this.tryRedirectSignIn(e);(!h||h===g)&&f?.user&&(o=f.user,c=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Mh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ns(this.app))return Promise.reject(ta(this));const t=e?Ft(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ns(this.app)?Promise.reject(ta(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ns(this.app)?Promise.reject(ta(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(di(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wD(this),t=new ID(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new da("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await TD(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&di(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await _o.create(this,[di(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let h=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(g,this,"internal-error"),g.then(()=>{h||c(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,o);return()=>{h=!0,f()}}else{const f=e.addObserver(t);return()=>{h=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Mb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(ns(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&rD(`Error while retrieving App Check token: ${t.error}`),t?.token}}function pg(s){return Ft(s)}class EE{constructor(e){this.auth=e,this.observer=null,this.addObserver=dR(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ND(s){gg=s}function xD(s){return gg.loadJS(s)}function DD(){return gg.gapiScript}function OD(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(s,e){const t=mr(s,"auth");if(t.isInitialized()){const o=t.getImmediate(),c=t.getOptions();if(or(c,e??{}))return o;vi(o,"already-initialized")}return t.initialize({options:e})}function jD(s,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(di);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function VD(s,e,t){const r=pg(s);Ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,c=jb(e),{host:h,port:g}=PD(e),f=g===null?"":`:${g}`,m={url:`${c}//${h}${f}/`},v=Object.freeze({host:h,port:g,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Ie(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ie(or(m,r.config.emulator)&&or(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,ha(h)?(vp(`${c}//${h}${f}`),_p("Auth",!0)):kD()}function jb(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function PD(s){const e=jb(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const c=o[1];return{host:c,port:TE(r.substr(c.length+1))}}else{const[c,h]=r.split(":");return{host:c,port:TE(h)}}}function TE(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function kD(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return hi("not implemented")}_getIdTokenResponse(e){return hi("not implemented")}_linkToIdToken(e,t){return hi("not implemented")}_getReauthenticationResolver(e){return hi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eo(s,e){return dD(s,"POST","/v1/accounts:signInWithIdp",dg(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD="http://localhost";class aa extends Vb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new aa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):vi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o}=t,c=cg(t,["providerId","signInMethod"]);if(!r||!o)return null;const h=new aa(r,o);return h.idToken=c.idToken||void 0,h.accessToken=c.accessToken||void 0,h.secret=c.secret,h.nonce=c.nonce,h.pendingToken=c.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Eo(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Eo(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Eo(e,t)}buildRequest(){const e={requestUri:LD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=_c(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc extends Pb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends Rc{constructor(){super("facebook.com")}static credential(e){return aa._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zi.credential(e.oauthAccessToken)}catch{return null}}}Zi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends Rc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return aa._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ji.credential(t,r)}catch{return null}}}Ji.GOOGLE_SIGN_IN_METHOD="google.com";Ji.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends Rc{constructor(){super("github.com")}static credential(e){return aa._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wi.credential(e.oauthAccessToken)}catch{return null}}}Wi.GITHUB_SIGN_IN_METHOD="github.com";Wi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends Rc{constructor(){super("twitter.com")}static credential(e,t){return aa._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return er.credential(t,r)}catch{return null}}}er.TWITTER_SIGN_IN_METHOD="twitter.com";er.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const c=await is._fromIdTokenResponse(e,r,o),h=AE(r);return new Co({user:c,providerId:h,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=AE(r);return new Co({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function AE(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh extends Xn{constructor(e,t,r,o){var c;super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,jh.prototype),this.customData={appName:e.name,tenantId:(c=e.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new jh(e,t,r,o)}}function kb(s,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?jh._fromErrorAndOperation(s,c,e,r):c})}async function UD(s,e,t=!1){const r=await gc(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return Co._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zD(s,e,t=!1){const{auth:r}=s;if(ns(r.app))return Promise.reject(ta(r));const o="reauthenticate";try{const c=await gc(s,kb(r,o,e,s),t);Ie(c.idToken,r,"internal-error");const h=fg(c.idToken);Ie(h,r,"internal-error");const{sub:g}=h;return Ie(s.uid===g,r,"user-mismatch"),Co._forOperation(s,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&vi(r,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BD(s,e,t=!1){if(ns(s.app))return Promise.reject(ta(s));const r="signIn",o=await kb(s,r,e),c=await Co._fromIdTokenResponse(s,r,o);return t||await s._updateCurrentUser(c.user),c}function FD(s,e,t,r){return Ft(s).onIdTokenChanged(e,t,r)}function HD(s,e,t){return Ft(s).beforeAuthStateChanged(e,t)}const Vh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Vh,"1"),this.storage.removeItem(Vh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=1e3,GD=10;class Ub extends Lb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ob(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,g,f)=>{this.notifyListeners(h,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(r);!t&&this.localCache[r]===h||this.notifyListeners(r,h)},c=this.storage.getItem(r);bD()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,GD):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},qD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ub.type="LOCAL";const $D=Ub;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb extends Lb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}zb.type="SESSION";const Bb=zb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new ud(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:c}=t.data,h=this.handlersMap[o];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const g=Array.from(h).map(async m=>m(t.origin,c)),f=await QD(g);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ud.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(s="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,h;return new Promise((g,f)=>{const m=yg("",20);o.port1.start();const v=setTimeout(()=>{f(new Error("unsupported_event"))},r);h={messageChannel:o,onMessage(T){const b=T;if(b.data.eventId===m)switch(b.data.status){case"ack":clearTimeout(v),c=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),g(b.data.response);break;default:clearTimeout(v),clearTimeout(c),f(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(){return window}function KD(s){Os().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(){return typeof Os().WorkerGlobalScope<"u"&&typeof Os().importScripts=="function"}async function XD(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ZD(){var s;return((s=navigator?.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function JD(){return Fb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb="firebaseLocalStorageDb",WD=1,Ph="firebaseLocalStorage",qb="fbase_key";class Ic{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function hd(s,e){return s.transaction([Ph],e?"readwrite":"readonly").objectStore(Ph)}function eO(){const s=indexedDB.deleteDatabase(Hb);return new Ic(s).toPromise()}function hp(){const s=indexedDB.open(Hb,WD);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(Ph,{keyPath:qb})}catch(o){t(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(Ph)?e(r):(r.close(),await eO(),e(await hp()))})})}async function bE(s,e,t){const r=hd(s,!0).put({[qb]:e,value:t});return new Ic(r).toPromise()}async function tO(s,e){const t=hd(s,!1).get(e),r=await new Ic(t).toPromise();return r===void 0?null:r.value}function SE(s,e){const t=hd(s,!0).delete(e);return new Ic(t).toPromise()}const nO=800,sO=3;class Gb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>sO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Fb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ud._getInstance(JD()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await XD(),!this.activeServiceWorker)return;this.sender=new YD(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ZD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hp();return await bE(e,Vh,"1"),await SE(e,Vh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>bE(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>tO(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>SE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=hd(o,!1).getAll();return new Ic(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),nO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Gb.type="LOCAL";const iO=Gb;new wc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rO(s,e){return e?di(e):(Ie(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg extends Vb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Eo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Eo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Eo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function aO(s){return BD(s.auth,new vg(s),s.bypassAuthState)}function oO(s){const{auth:e,user:t}=s;return Ie(t,e,"internal-error"),zD(t,new vg(s),s.bypassAuthState)}async function lO(s){const{auth:e,user:t}=s;return Ie(t,e,"internal-error"),UD(t,new vg(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e,t,r,o,c=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:c,error:h,type:g}=e;if(h){this.reject(h);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return aO;case"linkViaPopup":case"linkViaRedirect":return lO;case"reauthViaPopup":case"reauthViaRedirect":return oO;default:vi(this.auth,"internal-error")}}resolve(e){_i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO=new wc(2e3,1e4);class po extends $b{constructor(e,t,r,o,c){super(e,t,o,c),this.provider=r,this.authWindow=null,this.pollId=null,po.currentPopupAction&&po.currentPopupAction.cancel(),po.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){_i(this.filter.length===1,"Popup operations only handle one event");const e=yg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ds(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ds(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,po.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ds(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,cO.get())};e()}}po.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO="pendingRedirect",fh=new Map;class hO extends $b{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=fh.get(this.auth._key());if(!e){try{const r=await dO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}fh.set(this.auth._key(),e)}return this.bypassAuthState||fh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function dO(s,e){const t=pO(e),r=mO(s);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function fO(s,e){fh.set(s._key(),e)}function mO(s){return di(s._redirectPersistence)}function pO(s){return dh(uO,s.config.apiKey,s.name)}async function gO(s,e,t=!1){if(ns(s.app))return Promise.reject(ta(s));const r=pg(s),o=rO(r,e),h=await new hO(r,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await r._persistUserIfCurrent(h.user),await r._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO=10*60*1e3;class vO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_O(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Qb(e)){const o=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ds(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=yO&&this.cachedEventUids.clear(),this.cachedEventUids.has(wE(e))}saveEventToCache(e){this.cachedEventUids.add(wE(e)),this.lastProcessedEventTime=Date.now()}}function wE(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function Qb({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function _O(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Qb(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EO(s,e={}){return Po(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,AO=/^https?/;async function bO(s){if(s.config.emulator)return;const{authorizedDomains:e}=await EO(s);for(const t of e)try{if(SO(t))return}catch{}vi(s,"unauthorized-domain")}function SO(s){const e=cp(),{protocol:t,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&r===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===r}if(!AO.test(t))return!1;if(TO.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO=new wc(3e4,6e4);function RE(){const s=Os().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function RO(s){return new Promise((e,t)=>{var r,o,c;function h(){RE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{RE(),t(Ds(s,"network-request-failed"))},timeout:wO.get()})}if(!((o=(r=Os().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((c=Os().gapi)===null||c===void 0)&&c.load)h();else{const g=OD("iframefcb");return Os()[g]=()=>{gapi.load?h():t(Ds(s,"network-request-failed"))},xD(`${DD()}?onload=${g}`).catch(f=>t(f))}}).catch(e=>{throw mh=null,e})}let mh=null;function IO(s){return mh=mh||RO(s),mh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=new wc(5e3,15e3),NO="__/auth/iframe",xO="emulator/auth/iframe",DO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},OO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function MO(s){const e=s.config;Ie(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?hg(e,xO):`https://${s.config.authDomain}/${NO}`,r={apiKey:e.apiKey,appName:s.name,v:fa},o=OO.get(s.config.apiHost);o&&(r.eid=o);const c=s._getFrameworks();return c.length&&(r.fw=c.join(",")),`${t}?${_c(r).slice(1)}`}async function jO(s){const e=await IO(s),t=Os().gapi;return Ie(t,s,"internal-error"),e.open({where:document.body,url:MO(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DO,dontclear:!0},r=>new Promise(async(o,c)=>{await r.restyle({setHideOnLeave:!1});const h=Ds(s,"network-request-failed"),g=Os().setTimeout(()=>{c(h)},CO.get());function f(){Os().clearTimeout(g),o(r)}r.ping(f).then(f,()=>{c(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},PO=500,kO=600,LO="_blank",UO="http://localhost";class IE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zO(s,e,t,r=PO,o=kO){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-r)/2,0).toString();let g="";const f=Object.assign(Object.assign({},VO),{width:r.toString(),height:o.toString(),top:c,left:h}),m=on().toLowerCase();t&&(g=Ib(m)?LO:t),wb(m)&&(e=e||UO,f.scrollbars="yes");const v=Object.entries(f).reduce((b,[O,k])=>`${b}${O}=${k},`,"");if(AD(m)&&g!=="_self")return BO(e||"",g),new IE(null);const T=window.open(e||"",g,v);Ie(T,s,"popup-blocked");try{T.focus()}catch{}return new IE(T)}function BO(s,e){const t=document.createElement("a");t.href=s,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO="__/auth/handler",HO="emulator/auth/handler",qO=encodeURIComponent("fac");async function CE(s,e,t,r,o,c){Ie(s.config.authDomain,s,"auth-domain-config-required"),Ie(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:r,v:fa,eventId:o};if(e instanceof Pb){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",hR(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,T]of Object.entries({}))h[v]=T}if(e instanceof Rc){const v=e.getScopes().filter(T=>T!=="");v.length>0&&(h.scopes=v.join(","))}s.tenantId&&(h.tid=s.tenantId);const g=h;for(const v of Object.keys(g))g[v]===void 0&&delete g[v];const f=await s._getAppCheckToken(),m=f?`#${qO}=${encodeURIComponent(f)}`:"";return`${GO(s)}?${_c(g).slice(1)}${m}`}function GO({config:s}){return s.emulator?hg(s,HO):`https://${s.authDomain}/${FO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="webStorageSupport";class $O{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Bb,this._completeRedirectFn=gO,this._overrideRedirectResult=fO}async _openPopup(e,t,r,o){var c;_i((c=this.eventManagers[e._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const h=await CE(e,t,r,cp(),o);return zO(e,h,yg())}async _openRedirect(e,t,r,o){await this._originValidation(e);const c=await CE(e,t,r,cp(),o);return KD(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:c}=this.eventManagers[t];return o?Promise.resolve(o):(_i(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await jO(e),r=new vO(e);return t.register("authEvent",o=>(Ie(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Om,{type:Om},o=>{var c;const h=(c=o?.[0])===null||c===void 0?void 0:c[Om];h!==void 0&&t(!!h),vi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=bO(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ob()||Rb()||mg()}}const QO=$O;var NE="@firebase/auth",xE="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KO(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function XO(s){os(new Kn("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:h,authDomain:g}=r.options;Ie(h&&!h.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:h,authDomain:g,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Mb(s)},m=new CD(r,o,c,f);return jD(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),os(new Kn("auth-internal",e=>{const t=pg(e.getProvider("auth").getImmediate());return(r=>new YO(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),An(NE,xE,KO(s)),An(NE,xE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO=5*60,JO=iT("authIdTokenMaxAge")||ZO;let DE=null;const WO=s=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>JO)return;const o=t?.token;DE!==o&&(DE=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function eM(s=qh()){const e=mr(s,"auth");if(e.isInitialized())return e.getImmediate();const t=MD(s,{popupRedirectResolver:QO,persistence:[iO,$D,Bb]}),r=iT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const h=WO(c.toString());HD(t,h,()=>h(t.currentUser)),FD(t,g=>h(g))}}const o=tT("auth");return o&&VD(t,`http://${o}`),t}function tM(){var s,e;return(e=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&e!==void 0?e:document}ND({loadJS(s){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=o=>{const c=Ds("internal-error");c.customData=o,t(c)},r.type="text/javascript",r.charset="UTF-8",tM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});XO("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="firebasestorage.googleapis.com",nM="storageBucket",sM=2*60*1e3,iM=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends Xn{constructor(e,t,r=0){super(Mm(e),`Firebase Storage: ${t} (${Mm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Vs.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Mm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var js;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(js||(js={}));function Mm(s){return"storage/"+s}function rM(){const s="An unknown error occurred, please check the error payload for server response.";return new Vs(js.UNKNOWN,s)}function aM(){return new Vs(js.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function oM(){return new Vs(js.CANCELED,"User canceled the upload/download.")}function lM(s){return new Vs(js.INVALID_URL,"Invalid URL '"+s+"'.")}function cM(s){return new Vs(js.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function OE(s){return new Vs(js.INVALID_ARGUMENT,s)}function Kb(){return new Vs(js.APP_DELETED,"The Firebase app was deleted.")}function uM(s){return new Vs(js.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=rs.makeFromUrl(e,t)}catch{return new rs(e,"")}if(r.path==="")return r;throw cM(e)}static makeFromUrl(e,t){let r=null;const o="([A-Za-z0-9.\\-_]+)";function c(ae){ae.path.charAt(ae.path.length-1)==="/"&&(ae.path_=ae.path_.slice(0,-1))}const h="(/(.*))?$",g=new RegExp("^gs://"+o+h,"i"),f={bucket:1,path:3};function m(ae){ae.path_=decodeURIComponent(ae.path)}const v="v[A-Za-z0-9_]+",T=t.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",O=new RegExp(`^https?://${T}/${v}/b/${o}/o${b}`,"i"),k={bucket:1,path:3},U=t===Yb?"(?:storage.googleapis.com|storage.cloud.google.com)":t,V="([^?#]*)",re=new RegExp(`^https?://${U}/${o}/${V}`,"i"),K=[{regex:g,indices:f,postModify:c},{regex:O,indices:k,postModify:m},{regex:re,indices:{bucket:1,path:2},postModify:m}];for(let ae=0;ae<K.length;ae++){const le=K[ae],ye=le.regex.exec(e);if(ye){const D=ye[le.indices.bucket];let R=ye[le.indices.path];R||(R=""),r=new rs(D,R),le.postModify(r);break}}if(r==null)throw lM(e);return r}}class hM{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dM(s,e,t){let r=1,o=null,c=null,h=!1,g=0;function f(){return g===2}let m=!1;function v(...V){m||(m=!0,e.apply(null,V))}function T(V){o=setTimeout(()=>{o=null,s(O,f())},V)}function b(){c&&clearTimeout(c)}function O(V,...re){if(m){b();return}if(V){b(),v.call(null,V,...re);return}if(f()||h){b(),v.call(null,V,...re);return}r<64&&(r*=2);let K;g===1?(g=2,K=0):K=(r+Math.random())*1e3,T(K)}let k=!1;function U(V){k||(k=!0,b(),!m&&(o!==null?(V||(g=2),clearTimeout(o),T(0)):V||(g=1)))}return T(0),c=setTimeout(()=>{h=!0,U(!0)},t),U}function fM(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mM(s){return s!==void 0}function ME(s,e,t,r){if(r<e)throw OE(`Invalid value for '${s}'. Expected ${e} or greater.`);if(r>t)throw OE(`Invalid value for '${s}'. Expected ${t} or less.`)}function pM(s){const e=encodeURIComponent;let t="?";for(const r in s)if(s.hasOwnProperty(r)){const o=e(r)+"="+e(s[r]);t=t+o+"&"}return t=t.slice(0,-1),t}var kh;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(kh||(kh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gM(s,e){const t=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,c=e.indexOf(s)!==-1;return t||o||c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(e,t,r,o,c,h,g,f,m,v,T,b=!0,O=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=h,this.callback_=g,this.errorCallback_=f,this.timeout_=m,this.progressCallback_=v,this.connectionFactory_=T,this.retry=b,this.isUsingEmulator=O,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,U)=>{this.resolve_=k,this.reject_=U,this.start_()})}start_(){const e=(r,o)=>{if(o){r(!1,new nh(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const h=g=>{const f=g.loaded,m=g.lengthComputable?g.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,m)};this.progressCallback_!==null&&c.addUploadProgressListener(h),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(h),this.pendingConnection_=null;const g=c.getErrorCode()===kh.NO_ERROR,f=c.getStatus();if(!g||gM(f,this.additionalRetryCodes_)&&this.retry){const v=c.getErrorCode()===kh.ABORT;r(!1,new nh(!1,null,v));return}const m=this.successCodes_.indexOf(f)!==-1;r(!0,new nh(m,c))})},t=(r,o)=>{const c=this.resolve_,h=this.reject_,g=o.connection;if(o.wasSuccessCode)try{const f=this.callback_(g,g.getResponse());mM(f)?c(f):c()}catch(f){h(f)}else if(g!==null){const f=rM();f.serverResponse=g.getErrorText(),this.errorCallback_?h(this.errorCallback_(g,f)):h(f)}else if(o.canceled){const f=this.appDelete_?Kb():oM();h(f)}else{const f=aM();h(f)}};this.canceled_?t(!1,new nh(!1,null,!0)):this.backoffId_=dM(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&fM(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class nh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function vM(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function _M(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function EM(s,e){e&&(s["X-Firebase-GMPID"]=e)}function TM(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function AM(s,e,t,r,o,c,h=!0,g=!1){const f=pM(s.urlParams),m=s.url+f,v=Object.assign({},s.headers);return EM(v,e),vM(v,t),_M(v,c),TM(v,r),new yM(m,s.method,v,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,h,g)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bM(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function SM(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,t){this._service=e,t instanceof rs?this._location=t:this._location=rs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Lh(e,t)}get root(){const e=new rs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return SM(this._location.path)}get storage(){return this._service}get parent(){const e=bM(this._location.path);if(e===null)return null;const t=new rs(this._location.bucket,e);return new Lh(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw uM(e)}}function jE(s,e){const t=e?.[nM];return t==null?null:rs.makeFromBucketSpec(t,s)}function wM(s,e,t,r={}){s.host=`${e}:${t}`;const o=ha(e);o&&(vp(`https://${s.host}/b`),_p("Storage",!0)),s._isUsingEmulator=!0,s._protocol=o?"https":"http";const{mockUserToken:c}=r;c&&(s._overrideAuthToken=typeof c=="string"?c:rT(c,s.app.options.projectId))}class RM{constructor(e,t,r,o,c,h=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=o,this._firebaseVersion=c,this._isUsingEmulator=h,this._bucket=null,this._host=Yb,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=sM,this._maxUploadRetryTime=iM,this._requests=new Set,o!=null?this._bucket=rs.makeFromBucketSpec(o,this._host):this._bucket=jE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=rs.makeFromBucketSpec(this._url,e):this._bucket=jE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ME("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ME("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(ns(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Lh(this,e)}_makeRequest(e,t,r,o,c=!0){if(this._deleted)return new hM(Kb());{const h=AM(e,this._appId,r,o,t,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,t){const[r,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,o).getPromise()}}const VE="@firebase/storage",PE="0.13.13";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb="storage";function IM(s=qh(),e){s=Ft(s);const r=mr(s,Xb).getImmediate({identifier:e}),o=nT("storage");return o&&CM(r,...o),r}function CM(s,e,t,r={}){wM(s,e,t,r)}function NM(s,{instanceIdentifier:e}){const t=s.getProvider("app").getImmediate(),r=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new RM(t,r,o,e,fa)}function xM(){os(new Kn(Xb,NM,"PUBLIC").setMultipleInstances(!0)),An(VE,PE,""),An(VE,PE,"esm2017")}xM();const DM={apiKey:"AIzaSyA8wrGSCkuKf3IjUmQZOCG_3qFctdfMRbk",authDomain:"oprosnik-app.firebaseapp.com",projectId:"oprosnik-app",storageBucket:"oprosnik-app.firebasestorage.app",messagingSenderId:"1062081910335",appId:"1:1062081910335:web:d0e696a3d6e741c9720a8a",measurementId:"G-EHX71KZ0DY"},dd=dT(DM);HC(dd);const ko=B2(dd);eM(dd);IM(dd);const Kr=jo(ko,"admins");class OM{constructor(){this.currentAdmin=null,this.firebaseAvailable=!0,this.initializeDefaultAdmin()}async checkFirebaseConnection(){try{return await En(Kr),this.firebaseAvailable=!0,!0}catch(e){return console.warn("Firebase недоступен, используем localStorage:",e.message),this.firebaseAvailable=!1,!1}}async initializeDefaultAdmin(){try{if(!await this.checkFirebaseConnection()){this.initializeLocalAdmin();return}const t={login:"admin",password:this.hashPassword("admin123"),name:"Главный администратор",role:"super_admin",createdAt:"2024-01-01T00:00:00.000Z",isActive:!0};await this.getAdminByLogin("admin")||await this.createAdmin(t)}catch(e){console.error("Ошибка инициализации админа:",e),this.initializeLocalAdmin()}}initializeLocalAdmin(){const e=localStorage.getItem("survey_admins");let t=e?JSON.parse(e):[];if(!t.find(o=>o.role==="super_admin")){const o={id:"super-admin-001",login:"admin",password:this.hashPassword("admin123"),name:"Главный администратор",role:"super_admin",createdAt:"2024-01-01T00:00:00.000Z",isActive:!0};t.push(o),localStorage.setItem("survey_admins",JSON.stringify(t))}}async createAdmin(e){if(!this.firebaseAvailable)throw new Error("Firebase недоступен");try{return{success:!0,admin:{id:(await uh(Kr,e)).id,...e,password:void 0}}}catch(t){throw new Error("Ошибка создания администратора: "+t.message)}}async getAdminByLogin(e){if(!this.firebaseAvailable){const t=localStorage.getItem("survey_admins");return(t?JSON.parse(t):[]).find(o=>o.login===e.toLowerCase())}try{const t=mo(Kr,Zr("login","==",e.toLowerCase())),r=await En(t);if(r.empty)return null;const o=r.docs[0];return{id:o.id,...o.data()}}catch(t){return console.error("Ошибка получения админа:",t),null}}async getAdminById(e){if(!this.firebaseAvailable){const t=localStorage.getItem("survey_admins");return(t?JSON.parse(t):[]).find(o=>o.id===e)}try{const t=Cs(Kr,e),r=await lp(t);return r.exists()?{id:r.id,...r.data()}:null}catch(t){return console.error("Ошибка получения админа по ID:",t),null}}async registerOrganizer(e,t,r,o){try{const c=await this.getAdminById(o);if(!c||c.role!=="super_admin")throw new Error("Только главный администратор может создавать организаторов");if(await this.getAdminByLogin(e))throw new Error("Организатор с таким логином уже существует");if(t.length<6)throw new Error("Пароль должен содержать минимум 6 символов");const g={login:e.toLowerCase(),password:this.hashPassword(t),name:r,role:"organizer",createdAt:new Date().toISOString(),createdBy:o,isActive:!0};return await this.createAdmin(g)}catch(c){throw new Error("Ошибка регистрации организатора: "+c.message)}}async loginAdmin(e,t){try{const r=await this.getAdminByLogin(e);if(!r||!r.isActive)throw new Error("Администратор не найден");if(r.password!==this.hashPassword(t))throw new Error("Неверный пароль");const o={adminId:r.id,login:r.login,name:r.name,role:r.role,loginTime:new Date().toISOString(),token:this.generateToken()};return localStorage.setItem("admin_session",JSON.stringify(o)),this.currentAdmin=r,{success:!0,admin:{...r,password:void 0},session:o}}catch(r){throw new Error("Ошибка авторизации: "+r.message)}}isAdminLoggedIn(){const e=localStorage.getItem("admin_session");if(!e)return!1;try{const t=JSON.parse(e);return t&&t.adminId}catch{return!1}}getCurrentAdmin(){const e=localStorage.getItem("admin_session");if(!e)return null;try{const t=JSON.parse(e);return t?{id:t.adminId,login:t.login,name:t.name,role:t.role}:null}catch{return null}}isCurrentUserSuperAdmin(){const e=this.getCurrentAdmin();return e&&e.role==="super_admin"}logoutAdmin(){localStorage.removeItem("admin_session"),this.currentAdmin=null}logout(){this.logoutAdmin()}async getAllAdmins(){if(!this.firebaseAvailable){const e=localStorage.getItem("survey_admins");return e?JSON.parse(e):[]}try{return(await En(Kr)).docs.map(t=>({id:t.id,...t.data(),password:void 0}))}catch(e){throw new Error("Ошибка получения списка администраторов: "+e.message)}}async getOrganizers(){try{const e=this.getCurrentAdmin();if(!e||e.role!=="super_admin")throw new Error("Доступ запрещен");return(await this.getAllAdmins()).filter(r=>r.role==="organizer")}catch(e){throw new Error("Ошибка получения организаторов: "+e.message)}}async getOrganizersWithPasswords(){try{const e=this.getCurrentAdmin();if(!e||e.role!=="super_admin")throw new Error("Доступ запрещен");if(!this.firebaseAvailable){const r=localStorage.getItem("survey_admins");return(r?JSON.parse(r):[]).filter(c=>c.role==="organizer").map(c=>({...c,password:this.dehashPassword(c.password)}))}return(await En(Kr)).docs.map(r=>({id:r.id,...r.data(),password:this.dehashPassword(r.data().password)})).filter(r=>r.role==="organizer")}catch(e){throw new Error("Ошибка получения организаторов: "+e.message)}}async deleteAdmin(e){try{const t=this.getCurrentAdmin();if(!t||t.role!=="super_admin")throw new Error("Только главный администратор может удалять организаторов");if(!this.firebaseAvailable){const r=localStorage.getItem("survey_admins");let o=r?JSON.parse(r):[];return o=o.filter(c=>c.id!==e),localStorage.setItem("survey_admins",JSON.stringify(o)),{success:!0}}return await ch(Cs(Kr,e)),{success:!0}}catch(t){throw new Error("Ошибка удаления администратора: "+t.message)}}hashPassword(e){return btoa("survey_salt_2024"+e)}dehashPassword(e){try{return atob(e).replace("survey_salt_2024","")}catch{return"Ошибка расшифровки"}}generateToken(){return Math.random().toString(36).substring(2)+Date.now().toString(36)}validateLogin(e){return e.length>=3&&/^[a-zA-Z0-9_]+$/.test(e)}validatePassword(e){return e.length>=6}}const Jt=new OM,MM=({onOpenModal:s})=>{const e=ua(),[t,r]=Y.useState(null),[o,c]=Y.useState(!1),h=()=>{const v=Jt.getCurrentAdmin(),T=Jt.isAdminLoggedIn();r(v),c(T),console.log("Header: Проверка авторизации",{admin:v,loggedIn:T})};Y.useEffect(()=>{h();const v=b=>{(b.key==="current_admin"||b.key===null)&&h()};window.addEventListener("storage",v),window.addEventListener("focus",h);const T=setInterval(h,1e3);return()=>{window.removeEventListener("storage",v),window.removeEventListener("focus",h),clearInterval(T)}},[]);const g=()=>{Jt.logout(),c(!1),r(null),e("/")},f=()=>{e("/dashboard")},m=()=>{Jt.getCurrentAdmin()&&Jt.isAdminLoggedIn()?e("/dashboard"):s()};return y.jsx("header",{className:"header",children:y.jsxs("div",{className:"header-content",children:[y.jsxs("a",{href:"/",className:"logo",children:[y.jsx("div",{className:"logo-icon-wrapper",children:y.jsx("img",{src:"src\\assets\\img\\logo.png",alt:"#",className:"logo-icon"})}),"Oprosnik"]}),y.jsx("div",{className:"nav-buttons",children:o?y.jsxs(y.Fragment,{children:[y.jsx("button",{className:"btn btn-outline",onClick:f,children:"Личный кабинет"}),y.jsx("button",{className:"btn btn-primary",onClick:g,children:"Выйти"})]}):y.jsxs(y.Fragment,{children:[y.jsx("button",{className:"btn btn-outline",onClick:s,children:"Войти"}),y.jsx("button",{className:"btn btn-primary",onClick:m,children:"Начать"})]})})]})})},jM=({onOpenModal:s,onJoinClick:e})=>y.jsx("section",{className:"hero",children:y.jsxs("div",{className:"hero-content",children:[y.jsx("h1",{children:"Создавайте опросы легко и быстро"}),y.jsx("p",{children:"Профессиональная платформа для создания интерактивных опросов с мгновенными результатами и детальной аналитикой"}),y.jsxs("div",{className:"hero-buttons",children:[y.jsx("a",{href:"#",className:"btn-hero btn-hero-primary",onClick:s,children:"Создать опрос"}),y.jsx("a",{href:"#",className:"btn-hero btn-hero-secondary",onClick:t=>{t.preventDefault(),e&&e()},children:"Принять участие"})]})]})}),VM=()=>{const s=[{icon:"📊",title:"Простое создание",description:"Создавайте опросы из вопросов вариантами ответов. Интуитивный интерфейс для быстрой настройки."},{icon:"📱",title:"QR-код доступ",description:"Участники могут легко присоединиться к опросу, отсканировав или введя код. Никаких сложных регистраций."},{icon:"📈",title:"Мгновенные результаты",description:"Получайте результаты в реальном времени с подробной статистикой и аналитикой по каждому участнику."},{icon:"👥",title:"Управление участниками",description:"Отслеживайте участников, их ответы и результаты в удобном личном кабинете организатора."},{icon:"🔒",title:"Безопасность",description:"Защищенная авторизация для организаторов и простой вход по имени для участников."},{icon:"📋",title:"Детальная отчетность",description:"Таблицы с результатами, статистика в процентах и анализ правильных/неправильных ответов."}];return y.jsx("section",{className:"features",children:y.jsxs("div",{className:"features-content",children:[y.jsx("h2",{className:"section-title",children:"Возможности платформы"}),y.jsx("p",{className:"section-subtitle",children:"Все необходимые инструменты для создания и проведения опросов"}),y.jsx("div",{className:"features-grid",children:s.map((e,t)=>y.jsxs("div",{className:"feature-card",children:[y.jsx("div",{className:"feature-icon",children:e.icon}),y.jsx("h3",{children:e.title}),y.jsx("p",{children:e.description})]},t))})]})})},PM=()=>{const s=[{number:1,title:"Создание опроса",description:"Создайте опрос вопросами и вариантами ответов на любую тему"},{number:2,title:"Генерация QR-кода",description:"Система автоматически создает уникальный код для каждого опроса"},{number:3,title:"Участие",description:"Участники сканируют или вводят код, вводят имя и отвечают на вопросы"},{number:4,title:"Результаты",description:"Получайте детальную статистику и аналитику по всем участникам"}];return y.jsx("section",{className:"how-it-works",children:y.jsxs("div",{className:"how-content",children:[y.jsx("h2",{className:"section-title",children:"Как это работает"}),y.jsx("p",{className:"section-subtitle",children:"Простой процесс в несколько шагов"}),y.jsx("div",{className:"steps",children:s.map((e,t)=>y.jsxs("div",{className:"step",children:[y.jsx("div",{className:"step-number",children:e.number}),y.jsx("h3",{children:e.title}),y.jsx("p",{children:e.description})]},t))})]})})},kM=()=>y.jsx("footer",{className:"footer",children:y.jsx("div",{className:"footer-content",children:y.jsx("p",{children:"© 2025 SurveyPro. Все права защищены."})})}),LM="/oprosnik-design/assets/logo-CuY56trB.png",UM=({isOpen:s,onClose:e,onLogin:t})=>{const[r,o]=Y.useState(null),[c,h]=Y.useState(!1),[g,f]=Y.useState(!1),[m,v]=Y.useState(""),[T,b]=Y.useState({login:"",password:"",name:""});Y.useEffect(()=>{s||(o(null),h(!1),b({login:"",password:"",name:""}),v(""))},[s]);const O=ae=>{o(ae),h(!0),v("")},k=()=>{h(!1),o(null),b({login:"",password:"",name:""}),v("")},U=ae=>{const{name:le,value:ye}=ae.target;b(D=>({...D,[le]:ye})),m&&v("")},V=async ae=>{ae.preventDefault(),f(!0),v("");try{if(r==="organizer"){const{login:le,password:ye}=T;if(!le.trim()||!ye.trim())throw new Error("Пожалуйста, заполните все поля");const D=Jt.loginAdmin(le,ye);console.log("Organizer login successful:",D.admin),t&&t({role:"organizer",login:le,admin:D.admin,session:D.session})}else{const{name:le}=T;if(!le.trim())throw new Error("Пожалуйста, введите ваше имя");if(le.trim().length<2)throw new Error("Имя должно содержать минимум 2 символа");console.log("Participant login:",{name:le}),t&&t({role:"participant",name:le.trim()})}e()}catch(le){console.error("Login error:",le),v(le.message)}finally{f(!1)}};Y.useEffect(()=>{const ae=le=>{le.key==="Escape"&&s&&(r?k():e())};return s&&(document.addEventListener("keydown",ae),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",ae),document.body.style.overflow="unset"}},[s,r]);const re=ae=>{ae.target===ae.currentTarget&&(c||e())},J=()=>r==="organizer"?y.jsxs("div",{className:"role-info",children:[y.jsx("strong",{children:"Организатор:"})," Войдите с помощью логина и пароля для доступа к административной панели"]}):y.jsxs("div",{className:"role-info",children:[y.jsx("strong",{children:"Участник:"})," Введите ваше имя для быстрого входа в систему"]}),K=()=>r==="organizer"?y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"login",children:"Логин"}),y.jsx("input",{type:"text",id:"login",name:"login",className:"form-input",placeholder:"Введите ваш логин",value:T.login,onChange:U,required:!0})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"password",children:"Пароль"}),y.jsx("input",{type:"password",id:"password",name:"password",className:"form-input",placeholder:"Введите пароль",value:T.password,onChange:U,required:!0})]})]}):y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"name",children:"Имя"}),y.jsx("input",{type:"text",id:"name",name:"name",className:"form-input",placeholder:"Введите ваше имя",value:T.name,onChange:U,required:!0})]});return s?y.jsx("div",{className:"auth-modal-overlay",onClick:re,children:y.jsxs("div",{className:"auth-container",children:[y.jsx("button",{className:"auth-close-btn",onClick:e,children:"×"}),y.jsx("div",{className:"logo-img-wrapper",children:y.jsx("img",{src:LM,alt:"Logo",className:"logo-img"})}),c?y.jsxs("div",{className:"form-container fade-in",children:[J(),m&&y.jsx("div",{className:"auth-error-message",children:m}),y.jsxs("form",{onSubmit:V,children:[K(),y.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Вход...":`Войти как ${r==="organizer"?"организатор":"участник"}`})]}),y.jsx("button",{onClick:k,className:"back-btn",children:"← Вернуться к выбору роли"})]}):y.jsxs("div",{className:"welcome-screen fade-in",children:[y.jsx("h1",{className:"title",children:"Добро пожаловать!"}),y.jsx("p",{className:"subtitle",children:"Выберите свою роль для входа в систему"}),y.jsx("div",{className:"role-selection",children:y.jsxs("div",{className:"role-buttons",children:[y.jsx("button",{className:"role-btn",onClick:()=>O("organizer"),children:"Организатор"}),y.jsx("button",{className:"role-btn",onClick:()=>O("participant"),children:"Участник"})]})})]})]})}):null},Rs=jo(ko,"surveys"),jm=jo(ko,"responses"),Ql=jo(ko,"admins");class zM{constructor(){this.surveys=[],this.responses=[],this.firebaseAvailable=!0,this.checkFirebaseConnection()}async checkFirebaseConnection(){try{return await En(Rs),this.firebaseAvailable=!0,console.log("✅ Firebase SurveyManager подключен"),!0}catch(e){return console.warn("Firebase недоступен для опросов, используем localStorage:",e.message),this.firebaseAvailable=!1,!1}}async getAllSurveys(){return(await En(Rs)).docs.map(t=>({id:t.id,...t.data()}))}async getSurveyById(e){if(console.log("🔍 getSurveyById вызван с surveyId:",e),!this.firebaseAvailable){const t=localStorage.getItem("survey_surveys"),o=(t?JSON.parse(t):[]).find(c=>c.id===e)||null;return console.log("💾 Опрос из localStorage:",o),o}try{console.log("🔥 Запрос к Firebase для surveyId:",e);const t=Cs(Rs,e),r=await lp(t),o=r.exists()?{id:r.id,...r.data()}:null;return console.log("🔥 Опрос из Firebase:",o),o}catch(t){return console.error("❌ Ошибка получения опроса по ID:",t),null}}async getSurveyByCode(e){if(console.log("🔍 getSurveyByCode вызван с code:",e),!this.firebaseAvailable){const t=localStorage.getItem("survey_surveys"),o=(t?JSON.parse(t):[]).find(c=>c.code===e&&c.isActive)||null;return console.log("💾 Опрос по коду из localStorage:",o),o}try{console.log("🔥 Запрос к Firebase для кода:",e);const t=mo(Rs,Zr("code","==",e),Zr("isActive","==",!0)),r=await En(t);if(r.empty)return console.log("❌ Опрос с кодом не найден в Firebase"),null;const o=r.docs[0],c={id:o.id,...o.data()};return console.log("🔥 Опрос по коду из Firebase:",c),c}catch(t){return console.error("❌ Ошибка получения опроса по коду:",t),null}}async createSurvey(e,t){try{console.log("📝 createSurvey вызван с данными:",{surveyData:e,createdBy:t});const r={code:this.generateSurveyCode(),title:e.title,description:e.description,timeLimit:e.timeLimit||0,questions:e.questions,isActive:!0,createdBy:t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),participants:0,responses:[]};if(console.log("📋 Создаваемый опрос:",r),this.firebaseAvailable){console.log("🔥 Сохраняем в Firebase...");const c={id:(await uh(Rs,r)).id,...r};return console.log("✅ Опрос сохранен в Firebase:",c),{success:!0,survey:c}}else{console.log("💾 Сохраняем в localStorage...");const o={id:this.generateSurveyId(),...r},c=localStorage.getItem("survey_surveys");let h=c?JSON.parse(c):[];return h.push(o),localStorage.setItem("survey_surveys",JSON.stringify(h)),console.log("✅ Опрос сохранен в localStorage:",o),{success:!0,survey:o}}}catch(r){throw console.error("❌ Ошибка создания опроса:",r),new Error("Ошибка создания опроса: "+r.message)}}async updateSurvey(e,t){try{const r={...t,updatedAt:new Date().toISOString()};if(this.firebaseAvailable){const o=Cs(Rs,e);return await xm(o,r),await this.getSurveyById(e)}else{const o=localStorage.getItem("survey_surveys");let c=o?JSON.parse(o):[];const h=c.findIndex(g=>g.id===e);if(h!==-1)return c[h]={...c[h],...r},localStorage.setItem("survey_surveys",JSON.stringify(c)),c[h];throw new Error("Опрос не найден")}}catch(r){throw new Error("Ошибка обновления опроса: "+r.message)}}async deleteSurvey(e){try{if(console.log("🗑️ deleteSurvey вызван с surveyId:",e),this.firebaseAvailable){console.log("🔥 Удаляем опрос из Firebase...");const t=Cs(Rs,e);await ch(t),console.log("✅ Опрос удален из Firebase"),console.log("🗑️ Удаляем ответы на опрос...");const r=mo(jm,Zr("surveyId","==",e)),o=await En(r);if(o.empty)console.log("ℹ️ Ответов для удаления не найдено");else{const c=o.docs.map(h=>ch(h.ref));await Promise.all(c),console.log(`✅ Удалено ${o.size} ответов`)}}else{console.log("💾 Удаляем опрос из localStorage...");const t=localStorage.getItem("survey_surveys");let r=t?JSON.parse(t):[];const o=r.length;r=r.filter(f=>f.id!==e),localStorage.setItem("survey_surveys",JSON.stringify(r)),console.log(`✅ Удален опрос из localStorage (было: ${o}, стало: ${r.length})`);const c=localStorage.getItem("survey_responses");let h=c?JSON.parse(c):[];const g=h.length;h=h.filter(f=>f.surveyId!==e),localStorage.setItem("survey_responses",JSON.stringify(h)),console.log(`✅ Удалены ответы из localStorage (было: ${g}, стало: ${h.length})`)}return{success:!0}}catch(t){throw console.error("❌ Ошибка удаления опроса:",t),new Error("Ошибка удаления опроса: "+t.message)}}async getSurveyResponses(e){if(!this.firebaseAvailable){const t=localStorage.getItem("survey_responses");return(t?JSON.parse(t):[]).filter(o=>o.surveyId===e).sort((o,c)=>new Date(c.submittedAt)-new Date(o.submittedAt))}try{const t=mo(jm,Zr("surveyId","==",e),dE("submittedAt","desc"));return(await En(t)).docs.map(o=>({id:o.id,...o.data()}))}catch(t){return console.error("Ошибка получения ответов:",t),[]}}async submitResponse(e,t,r,o=null){try{console.log("📤 submitResponse вызван с данными:",{surveyId:e,participantName:t,answers:r,startedAt:o});const c=await this.getSurveyById(e);if(console.log("🔍 Найденный опрос для ответа:",c),!c)throw console.error("❌ Опрос не найден для ID:",e),new Error("Опрос не найден");if(!c.isActive)throw console.error("❌ Опрос неактивен:",c),new Error("Опрос неактивен");const h=c.questions.filter(m=>m.required),g=Object.keys(r);for(const m of h)if(!g.includes(m.id)||Array.isArray(r[m.id])&&r[m.id].length===0||!Array.isArray(r[m.id])&&!r[m.id])throw new Error(`Вопрос "${m.text}" обязателен для заполнения`);const f={id:this.generateResponseId(),surveyId:e,participantName:t,answers:r,submittedAt:new Date().toISOString(),startedAt:o||null,score:this.calculateScore(c,r)};if(console.log("📝 Создаваемый ответ:",f),this.firebaseAvailable){console.log("🔥 Сохраняем ответ в Firebase...");const v={id:(await uh(jm,f)).id,...f};console.log("✅ Ответ сохранен в Firebase:",v);const T=c.participants+1;return console.log("📊 Обновляем статистику опроса:",{surveyId:e,newParticipants:T}),await xm(Cs(Rs,e),{participants:T,updatedAt:new Date().toISOString()}),{success:!0,response:v}}else{console.log("💾 Сохраняем ответ в localStorage...");const m=localStorage.getItem("survey_responses");let v=m?JSON.parse(m):[];v.push(f),localStorage.setItem("survey_responses",JSON.stringify(v));const T=localStorage.getItem("survey_surveys");let b=T?JSON.parse(T):[];const O=b.findIndex(k=>k.id===e);return O!==-1&&(b[O].participants+=1,b[O].updatedAt=new Date().toISOString(),localStorage.setItem("survey_surveys",JSON.stringify(b))),{success:!0,response:f}}}catch(c){throw console.error("❌ Ошибка отправки ответа:",c),new Error("Ошибка отправки ответа: "+c.message)}}async getAllAdmins(){return(await En(Ql)).docs.map(t=>({id:t.id,...t.data()}))}async getAdminByLogin(e){const t=mo(Ql,Zr("login","==",e)),r=await En(t);if(r.empty)return null;const o=r.docs[0];return{id:o.id,...o.data()}}async createAdmin(e){return{id:(await uh(Ql,e)).id,...e}}async updateAdmin(e,t){const r=Cs(Ql,e);return await xm(r,t),this.getAdminById(e)}async deleteAdmin(e){await ch(Cs(Ql,e))}generateSurveyId(){return"survey_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}generateSurveyCode(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let t="";for(let r=0;r<6;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}generateResponseId(){return"response_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}calculateScore(e,t){let r=0;return e.questions.forEach(o=>{if(o.hasCorrectAnswer&&o.correctAnswer){const c=t[o.id];if(c){let h=!1;if(o.type==="single_choice")h=c===o.correctAnswer;else if(o.type==="multiple_choice"){const g=Array.isArray(c)?c:[c],f=Array.isArray(o.correctAnswer)?o.correctAnswer:[o.correctAnswer];h=g.length===f.length&&g.every(m=>f.includes(m))}h&&(r+=o.points||1)}}}),r}validateSurveyData(e){const t=[];return(!e.title||e.title.trim().length<3)&&t.push("Название опроса должно содержать минимум 3 символа"),(!e.description||e.description.trim().length<10)&&t.push("Описание опроса должно содержать минимум 10 символов"),(!e.questions||e.questions.length===0)&&t.push("Опрос должен содержать хотя бы один вопрос"),e.questions.forEach((r,o)=>{(!r.text||r.text.trim().length<3)&&t.push(`Вопрос ${o+1}: текст вопроса должен содержать минимум 3 символа`),(r.type==="single_choice"||r.type==="multiple_choice")&&((!r.options||r.options.length<2)&&t.push(`Вопрос ${o+1}: должно быть минимум 2 варианта ответа`),r.options.forEach((c,h)=>{(!c.text||c.text.trim().length===0)&&t.push(`Вопрос ${o+1}, вариант ${h+1}: текст варианта не может быть пустым`)}))}),t}async getUserSurveys(e){if(console.log("🔍 getUserSurveys вызван с userId:",e),console.log("🔍 Firebase доступен:",this.firebaseAvailable),!this.firebaseAvailable){const t=localStorage.getItem("survey_surveys"),r=t?JSON.parse(t):[];console.log("📦 Все опросы в localStorage:",r);const o=r.filter(c=>c.createdBy===e).sort((c,h)=>new Date(h.createdAt)-new Date(c.createdAt));return console.log("👤 Опросы пользователя из localStorage:",o),o}try{console.log("🔥 Запрос к Firebase для пользователя:",e);const t=mo(Rs,Zr("createdBy","==",e),dE("createdAt","desc")),o=(await En(t)).docs.map(h=>({id:h.id,...h.data()}));console.log("🔥 Опросы из Firebase:",o),console.log("🔍 Проверяем существование опросов...");const c=[];for(const h of o)try{const g=Cs(Rs,h.id);(await lp(g)).exists()?(c.push(h),console.log(`✅ Опрос ${h.id} существует`)):console.log(`❌ Опрос ${h.id} не существует, пропускаем`)}catch(g){console.log(`❌ Ошибка проверки опроса ${h.id}:`,g.message)}return console.log(`📊 Валидных опросов: ${c.length} из ${o.length}`),c}catch(t){return console.error("❌ Ошибка получения опросов пользователя:",t),[]}}async getSurveyStats(e){try{const t=await this.getSurveyById(e),r=await this.getSurveyResponses(e);if(!t)return null;let o=0;t.questions.forEach(h=>{h.hasCorrectAnswer&&h.correctAnswer&&(o+=h.points||1)});const c={totalParticipants:r.length,averageScore:0,maxScore:o,questionStats:{},recentResponses:r.slice(0,5)};if(r.length>0){const h=r.reduce((g,f)=>g+(f.score||0),0);c.averageScore=Math.round(h/r.length*100)/100}return t.questions.forEach(h=>{if(h.type==="multiple_choice"||h.type==="single_choice"){const g=r.map(m=>m.answers[h.id]).filter(Boolean),f={};h.options.forEach(m=>{f[m.id]=0}),g.forEach(m=>{Array.isArray(m)?m.forEach(v=>{f[v]!==void 0&&f[v]++}):f[m]!==void 0&&f[m]++}),c.questionStats[h.id]={type:h.type,text:h.text,optionCounts:f,totalResponses:g.length}}}),c}catch(t){return console.error("Ошибка получения статистики:",t),null}}async clearCacheAndReload(){console.log("🧹 Очистка кэша и перезагрузка данных..."),this.firebaseAvailable?(await this.checkFirebaseConnection(),console.log("✅ Кэш очищен, Firebase переподключен")):(localStorage.removeItem("survey_surveys"),localStorage.removeItem("survey_responses"),console.log("✅ localStorage очищен"))}async forceDeleteSurvey(e){console.log("💥 Принудительное удаление опроса:",e);try{return await this.deleteSurvey(e),await this.clearCacheAndReload(),console.log("✅ Опрос принудительно удален и кэш очищен"),{success:!0}}catch(t){throw console.error("❌ Ошибка принудительного удаления:",t),new Error("Ошибка принудительного удаления: "+t.message)}}}const Wt=new zM,BM=()=>{const s=ua(),[e,t]=Y.useState(!1),[r,o]=Y.useState(!1),[c,h]=Y.useState(""),[g,f]=Y.useState(""),[m,v]=Y.useState(!1),T=()=>{t(!0)},b=()=>{t(!1)},O=()=>{Jt.getCurrentAdmin()&&Jt.isAdminLoggedIn()?s("/dashboard"):t(!0)},k=J=>{J.role==="organizer"?s("/dashboard"):o(!0)},U=()=>{o(!0)},V=()=>{o(!1),h(""),f("")},re=async J=>{if(J.preventDefault(),!c.trim()){f("Введите код опроса");return}v(!0),f("");try{const K=await Wt.getSurveyByCode(c.toUpperCase());if(!K){f("Опрос с таким кодом не найден");return}if(!K.isActive){f("Этот опрос неактивен");return}s(`/participant?code=${c.toUpperCase()}`)}catch(K){f("Ошибка при проверке кода: "+K.message)}finally{v(!1)}};return y.jsxs("div",{className:"App",children:[y.jsx(MM,{onOpenModal:T}),y.jsx(jM,{onOpenModal:O,onJoinClick:U}),y.jsx(VM,{}),y.jsx(PM,{}),y.jsx(kM,{}),y.jsx(UM,{isOpen:e,onClose:b,onLogin:k}),r&&y.jsx("div",{className:"code-modal-overlay",children:y.jsxs("div",{className:"code-modal",onClick:J=>J.stopPropagation(),children:[y.jsx("button",{className:"code-modal-close",onClick:V,children:"×"}),y.jsx("h2",{children:"Ввести код опроса"}),y.jsxs("form",{onSubmit:re,children:[y.jsx("input",{type:"text",className:"code-input",placeholder:"Введите код опроса",value:c,onChange:J=>h(J.target.value),autoFocus:!0,required:!0,style:{textTransform:"uppercase"}}),g&&y.jsx("div",{className:"error-message",style:{color:"red",marginTop:8,fontSize:14},children:g}),y.jsx("button",{type:"submit",className:"btn btn-primary",style:{marginTop:16},disabled:m,children:m?"Проверка...":"Присоединиться"})]})]})})]})},Zb=(s,e=50)=>!s||typeof s!="string"?"":s.length<=e?s:s.substring(0,e)+"...",Jb=s=>Zb(s,25),dp=s=>Zb(s,80),ss=({text:s,maxLength:e=50,className:t=""})=>{if(!s||typeof s!="string")return y.jsx("span",{className:t});const r=s.length>e,o=r?s.substring(0,e)+"...":s;return y.jsx("span",{className:t,title:r?s:void 0,style:{cursor:r?"help":"default",display:"inline-block",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:o})},FM=({isOpen:s,onClose:e,onSurveyCreated:t})=>{const[r,o]=Y.useState(1),[c,h]=Y.useState(!1),[g,f]=Y.useState([]),[m,v]=Y.useState({title:"",description:"",timeLimit:0,questions:[]}),T=[{id:"single_choice",name:"Один ответ",icon:"🔘",description:"Выберите один вариант ответа"},{id:"multiple_choice",name:"Несколько ответов",icon:"☑️",description:"Выберите несколько вариантов ответа"},{id:"text",name:"Текстовый ответ",icon:"📝",description:"Введите текстовый ответ"},{id:"rating",name:"Оценка",icon:"⭐",description:"Оцените по шкале от 1 до 10"}],b=I=>{const{name:x,value:S,type:W,checked:ue}=I.target;v(B=>({...B,[x]:W==="checkbox"?ue:S}))},O=(I,x)=>{v(S=>({...S,[I]:x}))},k=()=>{const I={id:`q_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,text:"",type:"single_choice",required:!0,hasCorrectAnswer:!0,correctAnswer:null,points:1,options:[{id:`opt_${Date.now()}_1`,text:""},{id:`opt_${Date.now()}_2`,text:""}]};v(x=>({...x,questions:[...x.questions,I]}))},U=(I,x)=>{v(S=>({...S,questions:S.questions.map(W=>W.id===I?{...W,...x}:W)}))},V=I=>{v(x=>({...x,questions:x.questions.filter(S=>S.id!==I)}))},re=I=>{v(x=>({...x,questions:x.questions.map(S=>{if(S.id===I){const W={id:`opt_${Date.now()}_${Math.random().toString(36).substr(2,5)}`,text:""};return{...S,options:[...S.options,W]}}return S})}))},J=(I,x,S)=>{v(W=>({...W,questions:W.questions.map(ue=>ue.id===I?{...ue,options:ue.options.map(B=>B.id===x?{...B,text:S}:B)}:ue)}))},K=(I,x)=>{v(S=>({...S,questions:S.questions.map(W=>W.id===I?{...W,options:W.options.filter(ue=>ue.id!==x)}:W)}))},ae=(I,x,S)=>{v(W=>({...W,questions:W.questions.map(ue=>{if(ue.id===I){let B;if(ue.type==="single_choice")B=S?x:null;else{const ee=Array.isArray(ue.correctAnswer)?ue.correctAnswer:[];S?B=[...ee,x]:B=ee.filter(fe=>fe!==x)}return{...ue,correctAnswer:B}}return ue})}))},le=I=>{const x=[];return I===1?(m.title.trim()||x.push("Введите название опроса"),m.description.trim()||x.push("Введите описание опроса")):I===2&&(m.questions.length===0?x.push("Добавьте хотя бы один вопрос"):m.questions.forEach((S,W)=>{S.text.trim()||x.push(`Вопрос ${W+1}: введите текст вопроса`),(S.type==="single_choice"||S.type==="multiple_choice")&&(S.options.length<2&&x.push(`Вопрос ${W+1}: добавьте минимум 2 варианта ответа`),S.options.forEach((ue,B)=>{ue.text.trim()||x.push(`Вопрос ${W+1}, вариант ${B+1}: введите текст варианта`)}))})),f(x),x.length===0},ye=()=>{le(r)&&(o(I=>I+1),f([]))},D=()=>{o(I=>I-1),f([])},R=async()=>{if(le(r)&&!c){h(!0),f([]);try{const I=Jt.getCurrentAdmin();if(!I)throw new Error("Необходимо войти в систему");console.log("Создаем опрос...",m);const x=await Wt.createSurvey(m,I.id);console.log("Опрос создан успешно:",x),t&&t(x.survey)}catch(I){console.error("Ошибка создания опроса:",I),f([I.message])}finally{h(!1)}}},N=()=>{c||(o(1),v({title:"",description:"",timeLimit:0,questions:[]}),f([]),e())},M=(I,x)=>y.jsxs("div",{className:"question-card",children:[y.jsxs("div",{className:"question-header",children:[y.jsxs("span",{className:"question-number",children:["Вопрос ",x+1]}),y.jsx("button",{className:"remove-question-btn",onClick:()=>V(I.id),type:"button",title:"Удалить вопрос",children:"×"})]}),y.jsxs("div",{className:"question-content",children:[y.jsx("div",{className:"question-text-section",children:y.jsx("input",{type:"text",className:"question-text-input",placeholder:"Введите текст вопроса",value:I.text,onChange:S=>U(I.id,{text:S.target.value})})}),y.jsx("div",{className:"question-settings",children:y.jsx("div",{className:"setting-group",children:y.jsxs("label",{className:"setting-label",children:["Баллы за правильный ответ:",y.jsx("input",{type:"number",min:"1",max:"10",value:I.points,onChange:S=>U(I.id,{points:parseInt(S.target.value)||1}),className:"points-input"})]})})}),y.jsxs("div",{className:"question-type-selector",children:[y.jsx("label",{children:"Тип вопроса:"}),y.jsx("div",{className:"type-options",children:T.map(S=>y.jsxs("button",{type:"button",className:`type-option ${I.type===S.id?"active":""}`,onClick:()=>U(I.id,{type:S.id,correctAnswer:null,hasCorrectAnswer:!0,required:!0,options:S.id==="text"||S.id==="rating"?[]:I.options}),children:[y.jsx("span",{className:"type-icon",children:S.icon}),y.jsx("span",{className:"type-name",children:S.name})]},S.id))})]}),(I.type==="single_choice"||I.type==="multiple_choice")&&y.jsxs("div",{className:"options-section",children:[y.jsxs("div",{className:"options-header",children:[y.jsx("label",{children:"Варианты ответов:"}),y.jsx("button",{type:"button",className:"add-option-btn",onClick:()=>re(I.id),children:"+ Добавить вариант"})]}),y.jsx("div",{className:"options-list",children:I.options.map((S,W)=>{const ue=I.type==="single_choice"?I.correctAnswer===S.id:Array.isArray(I.correctAnswer)&&I.correctAnswer.includes(S.id);return y.jsxs("div",{className:"option-item",children:[y.jsxs("div",{className:"option-main",children:[y.jsxs("div",{className:"option-checkbox-wrapper",children:[y.jsx("input",{type:I.type==="multiple_choice"?"checkbox":"radio",name:`correct_${I.id}`,id:`correct_${I.id}_${S.id}`,checked:ue,onChange:B=>ae(I.id,S.id,B.target.checked),className:"correct-answer-checkbox"}),y.jsx("label",{htmlFor:`correct_${I.id}_${S.id}`,className:"checkbox-label-text",children:"Правильный"})]}),y.jsx("input",{type:"text",className:"option-input",placeholder:`Вариант ${W+1}`,value:S.text,onChange:B=>J(I.id,S.id,B.target.value)})]}),y.jsx("button",{type:"button",className:"remove-option-btn",onClick:()=>K(I.id,S.id),disabled:I.options.length<=2,title:"Удалить вариант",children:"×"})]},S.id)})})]}),I.type==="rating"&&y.jsxs("div",{className:"rating-settings",children:[y.jsx("label",{children:"Максимальная оценка:"}),y.jsx("input",{type:"number",min:"3",max:"10",value:I.maxRating||5,onChange:S=>U(I.id,{maxRating:parseInt(S.target.value)||5}),className:"rating-input"})]})]})]},I.id);return s?y.jsx("div",{className:"create-survey-overlay",children:y.jsxs("div",{className:"create-survey-modal",children:[y.jsx("button",{className:"create-survey-close",onClick:N,children:"×"}),y.jsxs("div",{className:"create-survey-content",children:[y.jsxs("div",{className:"survey-header",children:[y.jsx("h2",{children:"Создание опроса"}),y.jsxs("div",{className:"step-indicator",children:[y.jsx("span",{className:`step ${r>=1?"active":""}`,children:"1. Основная информация"}),y.jsx("span",{className:`step ${r>=2?"active":""}`,children:"2. Вопросы"}),y.jsx("span",{className:`step ${r>=3?"active":""}`,children:"3. Завершение"})]})]}),g.length>0&&y.jsx("div",{className:"error-messages",children:g.map((I,x)=>y.jsx("div",{className:"error-message",children:I},x))}),r===1&&y.jsxs("div",{className:"step-content",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"title",children:"Название опроса *"}),y.jsx("input",{type:"text",id:"title",name:"title",className:"form-input",placeholder:"Введите название опроса",value:m.title,onChange:b,maxLength:"100"}),y.jsx("small",{className:"form-hint",children:"Максимум 100 символов"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"description",children:"Описание опроса:"}),y.jsx("textarea",{id:"description",className:"form-textarea",value:m.description,onChange:I=>O("description",I.target.value),placeholder:"Введите описание опроса...",rows:"3",maxLength:"200"}),y.jsx("small",{className:"form-hint",children:"Максимум 200 символов"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"timeLimit",children:"Ограничение времени (в минутах):"}),y.jsxs("div",{className:"time-limit-container",children:[y.jsx("input",{type:"number",id:"timeLimit",className:"form-input",value:m.timeLimit,onChange:I=>O("timeLimit",parseInt(I.target.value)||0),placeholder:"0 = без ограничения",min:"0",max:"1440"}),y.jsx("span",{className:"time-limit-hint",children:m.timeLimit>0?m.timeLimit>=60?`(${Math.floor(m.timeLimit/60)}ч ${m.timeLimit%60}мин)`:`(${m.timeLimit} мин)`:"Без ограничения времени"})]})]})]}),r===2&&y.jsxs("div",{className:"step-content",children:[y.jsxs("div",{className:"questions-header",children:[y.jsx("h3",{children:"Вопросы опроса"}),y.jsx("button",{type:"button",className:"add-question-btn",onClick:k,children:"+ Добавить вопрос"})]}),y.jsx("div",{className:"questions-list",children:m.questions.length===0?y.jsxs("div",{className:"empty-questions",children:[y.jsx("p",{children:"Вопросы не добавлены"}),y.jsx("p",{children:'Нажмите "Добавить вопрос" для создания первого вопроса'})]}):m.questions.map((I,x)=>M(I,x))})]}),r===3&&y.jsx("div",{className:"step-content",children:y.jsxs("div",{className:"survey-preview",children:[y.jsx("h3",{children:"Предварительный просмотр"}),y.jsxs("div",{className:"preview-survey",children:[y.jsx("h4",{children:m.title}),m.description&&y.jsx("p",{children:m.description}),y.jsx("div",{className:"preview-questions",children:m.questions.map((I,x)=>y.jsxs("div",{className:"preview-question",children:[y.jsxs("p",{children:[y.jsxs("strong",{children:[x+1,". ",I.text]})," ",I.required&&y.jsx("span",{className:"required",children:"*"})]}),I.type==="single_choice"&&y.jsx("div",{className:"preview-options",children:I.options.map(S=>y.jsxs("div",{className:"preview-option",children:[y.jsx("input",{type:"radio",disabled:!0}),y.jsx("span",{children:S.text}),I.hasCorrectAnswer&&I.correctAnswer===S.id&&y.jsx("span",{className:"correct-indicator",children:"✓"})]},S.id))}),I.type==="multiple_choice"&&y.jsx("div",{className:"preview-options",children:I.options.map(S=>y.jsxs("div",{className:"preview-option",children:[y.jsx("input",{type:"checkbox",disabled:!0}),y.jsx("span",{children:S.text}),I.hasCorrectAnswer&&Array.isArray(I.correctAnswer)&&I.correctAnswer.includes(S.id)&&y.jsx("span",{className:"correct-indicator",children:"✓"})]},S.id))}),I.type==="text"&&y.jsx("div",{className:"preview-text-input",children:y.jsx("input",{type:"text",placeholder:"Текстовый ответ",disabled:!0})}),I.type==="rating"&&y.jsx("div",{className:"preview-rating",children:[...Array(I.maxRating||5)].map((S,W)=>y.jsx("span",{className:"star",children:"⭐"},W))})]},I.id))})]})]})}),y.jsxs("div",{className:"step-actions",children:[r>1&&y.jsx("button",{type:"button",className:"btn btn-secondary",onClick:D,disabled:c,children:"Назад"}),r<3?y.jsx("button",{type:"button",className:"btn btn-primary",onClick:ye,disabled:c,children:"Далее"}):y.jsx("button",{type:"button",className:"btn btn-primary",onClick:R,disabled:c,children:c?"Создание...":"Создать опрос"})]})]})]})}):null};var ph={exports:{}},HM=ph.exports,kE;function qM(){return kE||(kE=1,function(s,e){(function(t,r){r()})(HM,function(){function t(m,v){return typeof v>"u"?v={autoBom:!1}:typeof v!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),v={autoBom:!v}),v.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(m.type)?new Blob(["\uFEFF",m],{type:m.type}):m}function r(m,v,T){var b=new XMLHttpRequest;b.open("GET",m),b.responseType="blob",b.onload=function(){f(b.response,v,T)},b.onerror=function(){console.error("could not download file")},b.send()}function o(m){var v=new XMLHttpRequest;v.open("HEAD",m,!1);try{v.send()}catch{}return 200<=v.status&&299>=v.status}function c(m){try{m.dispatchEvent(new MouseEvent("click"))}catch{var v=document.createEvent("MouseEvents");v.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),m.dispatchEvent(v)}}var h=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Ku=="object"&&Ku.global===Ku?Ku:void 0,g=h.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=h.saveAs||(typeof window!="object"||window!==h?function(){}:"download"in HTMLAnchorElement.prototype&&!g?function(m,v,T){var b=h.URL||h.webkitURL,O=document.createElement("a");v=v||m.name||"download",O.download=v,O.rel="noopener",typeof m=="string"?(O.href=m,O.origin===location.origin?c(O):o(O.href)?r(m,v,T):c(O,O.target="_blank")):(O.href=b.createObjectURL(m),setTimeout(function(){b.revokeObjectURL(O.href)},4e4),setTimeout(function(){c(O)},0))}:"msSaveOrOpenBlob"in navigator?function(m,v,T){if(v=v||m.name||"download",typeof m!="string")navigator.msSaveOrOpenBlob(t(m,T),v);else if(o(m))r(m,v,T);else{var b=document.createElement("a");b.href=m,b.target="_blank",setTimeout(function(){c(b)})}}:function(m,v,T,b){if(b=b||open("","_blank"),b&&(b.document.title=b.document.body.innerText="downloading..."),typeof m=="string")return r(m,v,T);var O=m.type==="application/octet-stream",k=/constructor/i.test(h.HTMLElement)||h.safari,U=/CriOS\/[\d]+/.test(navigator.userAgent);if((U||O&&k||g)&&typeof FileReader<"u"){var V=new FileReader;V.onloadend=function(){var K=V.result;K=U?K:K.replace(/^data:[^;]*;/,"data:attachment/file;"),b?b.location.href=K:location=K,b=null},V.readAsDataURL(m)}else{var re=h.URL||h.webkitURL,J=re.createObjectURL(m);b?b.location=J:location.href=J,b=null,setTimeout(function(){re.revokeObjectURL(J)},4e4)}});h.saveAs=f.saveAs=f,s.exports=f})}(ph)),ph.exports}var Wb=qM();const GM=({survey:s,onClose:e})=>{const[t,r]=Y.useState("overview"),[o,c]=Y.useState([]),[h,g]=Y.useState(null),[f,m]=Y.useState(!1),[v,T]=Y.useState(!0);Y.useEffect(()=>{b()},[s]);const b=async()=>{try{T(!0);const[D,R]=await Promise.all([Wt.getSurveyResponses(s.id),Wt.getSurveyStats(s.id)]);c(D),g(R)}catch(D){console.error("Ошибка загрузки данных опроса:",D)}finally{T(!1)}},O=D=>new Date(D).toLocaleString("ru-RU"),k=D=>{const R=s.questions.find(N=>N.id===D);return R?R.text:"Неизвестный вопрос"},U=(D,R)=>{const N=s.questions.find(I=>I.id===D);if(!N||!N.options)return"Неизвестный вариант";const M=N.options.find(I=>I.id===R);return M?M.text:"Неизвестный вариант"},V=()=>{if(!o.length||!h)return null;const D={questionDifficulty:{},errorAnalysis:{},timeAnalysis:{},recommendations:[]};s.questions.forEach((x,S)=>{const W=h.questionStats[x.id];if(!W)return;let ue=0,B=W.totalResponses;x.hasCorrectAnswer&&(x.type==="single_choice"?ue=W.optionCounts[x.correctAnswer]||0:x.type==="multiple_choice"&&Array.isArray(x.correctAnswer)&&(ue=o.filter(fe=>{const Ee=fe.answers[x.id];if(!Array.isArray(Ee))return!1;const P=new Set(x.correctAnswer),te=new Set(Ee);return P.size===te.size&&[...P].every(he=>te.has(he))}).length));const ee=B>0?ue/B*100:0;D.questionDifficulty[x.id]={questionIndex:S+1,questionText:x.text,difficultyScore:Math.round(ee*100)/100,correctAnswers:ue,totalAnswers:B,type:x.type,hasCorrectAnswer:x.hasCorrectAnswer}}),s.questions.forEach(x=>{const S=h.questionStats[x.id];if(!S||!x.hasCorrectAnswer)return;const W={mostCommonErrors:[],errorRate:0,confusionMatrix:{}};if(x.type==="single_choice"){const ue=x.correctAnswer,B=S.optionCounts[ue]||0,ee=S.totalResponses;W.errorRate=ee>0?(ee-B)/ee*100:0;const fe=Object.entries(S.optionCounts).filter(([Ee])=>Ee!==ue).sort(([,Ee],[,P])=>P-Ee).slice(0,3);W.mostCommonErrors=fe.map(([Ee,P])=>({optionText:U(x.id,Ee),count:P,percentage:Math.round(P/ee*100)}))}D.errorAnalysis[x.id]=W});const R=o.filter(x=>x.submittedAt&&x.startedAt).map(x=>{const S=new Date(x.startedAt);return(new Date(x.submittedAt)-S)/1e3});R.length>0&&(D.timeAnalysis={averageTime:Math.round(R.reduce((x,S)=>x+S,0)/R.length),minTime:Math.round(Math.min(...R)),maxTime:Math.round(Math.max(...R)),totalResponses:R.length});const N=[],M=Object.values(D.questionDifficulty).filter(x=>x.hasCorrectAnswer&&x.difficultyScore<50).sort((x,S)=>x.difficultyScore-S.difficultyScore);M.length>0&&N.push({type:"difficulty",title:"Сложные вопросы",description:`Найдено ${M.length} вопросов с низким процентом правильных ответов`,questions:M.slice(0,3),priority:"high"});const I=Object.entries(D.errorAnalysis).filter(([,x])=>x.errorRate>60).map(([x,S])=>({questionId:x,questionText:k(x),errorRate:S.errorRate,mostCommonErrors:S.mostCommonErrors})).sort((x,S)=>S.errorRate-x.errorRate);return I.length>0&&N.push({type:"errors",title:"Вопросы с высоким процентом ошибок",description:`Найдено ${I.length} вопросов с процентом ошибок более 60%`,questions:I.slice(0,3),priority:"high"}),D.timeAnalysis&&D.timeAnalysis.averageTime>300&&N.push({type:"time",title:"Долгое время прохождения",description:`Среднее время прохождения опроса составляет ${Math.round(D.timeAnalysis.averageTime/60)} минут`,priority:"medium"}),D.recommendations=N,D},re=h?.maxScore||s.questions?.reduce((D,R)=>R.hasCorrectAnswer&&R.correctAnswer?D+(R.points||1):D,0),J=()=>y.jsxs("div",{className:"results-overview",children:[y.jsxs("div",{className:"stats-grid",children:[y.jsxs("div",{className:"stat-card",children:[y.jsx("div",{className:"stat-icon",children:"👥"}),y.jsxs("div",{className:"stat-content",children:[y.jsx("h3",{children:"Участников"}),y.jsx("p",{className:"stat-value",children:h?.totalParticipants})]})]}),h?.averageScore!==void 0&&y.jsxs("div",{className:"stat-card",children:[y.jsx("div",{className:"stat-icon",children:"📊"}),y.jsxs("div",{className:"stat-content",children:[y.jsx("h3",{children:"Средний балл"}),y.jsxs("p",{className:"stat-value",children:[h?.averageScore," / ",re]})]})]}),y.jsxs("div",{className:"stat-card",children:[y.jsx("div",{className:"stat-icon",children:"❓"}),y.jsxs("div",{className:"stat-content",children:[y.jsx("h3",{children:"Вопросов"}),y.jsx("p",{className:"stat-value",children:s.questions.length})]})]}),y.jsxs("div",{className:"stat-card",children:[y.jsx("div",{className:"stat-icon",children:"⏱️"}),y.jsxs("div",{className:"stat-content",children:[y.jsx("h3",{children:"Время"}),y.jsx("p",{className:"stat-value",children:s.timeLimit>0?`${Math.floor(s.timeLimit/60)}ч ${s.timeLimit%60}мин`:"Без ограничения"})]})]}),y.jsxs("div",{className:"stat-card",children:[y.jsx("div",{className:"stat-icon",children:"📅"}),y.jsxs("div",{className:"stat-content",children:[y.jsx("h3",{children:"Создан"}),y.jsx("p",{className:"stat-value",children:O(s.createdAt).split(",")[0]})]})]})]}),o.length>0&&y.jsxs("div",{className:"recent-responses-section",children:[y.jsx("h3",{children:"Последние ответы"}),y.jsx("div",{className:"recent-responses-list",children:o.slice(-5).reverse().map(D=>y.jsxs("div",{className:"response-card",children:[y.jsxs("div",{className:"response-header",children:[y.jsx("span",{className:"participant-name",children:y.jsx(ss,{text:D.participantName,maxLength:25})}),y.jsx("span",{className:"response-date",children:O(D.submittedAt)})]}),D.score!==null&&y.jsxs("div",{className:"response-score",children:["Результат: ",D.score," баллов"]})]},D.id))})]})]}),K=()=>y.jsx("div",{className:"questions-analysis",children:s.questions.map((D,R)=>{const N=h?.questionStats[D.id];return y.jsxs("div",{className:"question-analysis",children:[y.jsxs("div",{className:"question-header",children:[y.jsxs("h3",{children:["Вопрос ",R+1,": ",y.jsx(ss,{text:D.text,maxLength:40})]}),D.required&&y.jsx("span",{className:"required-badge",children:"Обязательный"})]}),D.type==="single_choice"&&N&&y.jsx("div",{className:"choice-analysis",children:y.jsx("div",{className:"options-chart",children:D.options.map(M=>{const I=N.optionCounts[M.id]||0,x=N.totalResponses>0?Math.round(I/N.totalResponses*100):0;return y.jsxs("div",{className:"option-bar",children:[y.jsxs("div",{className:"option-info",children:[y.jsx("span",{className:"option-text",children:M.text}),y.jsxs("span",{className:"option-count",children:[I," (",x,"%)"]})]}),y.jsx("div",{className:"progress-bar",children:y.jsx("div",{className:"progress-fill",style:{width:`${x}%`}})}),D.hasCorrectAnswer&&D.correctAnswer===M.id&&y.jsx("span",{className:"correct-indicator",children:"✓ Правильный ответ"})]},M.id)})})}),D.type==="multiple_choice"&&N&&y.jsx("div",{className:"choice-analysis",children:y.jsx("div",{className:"options-chart",children:D.options.map(M=>{const I=N.optionCounts[M.id]||0,x=N.totalResponses>0?Math.round(I/N.totalResponses*100):0;return y.jsxs("div",{className:"option-bar",children:[y.jsxs("div",{className:"option-info",children:[y.jsx("span",{className:"option-text",children:M.text}),y.jsxs("span",{className:"option-count",children:[I," (",x,"%)"]})]}),y.jsx("div",{className:"progress-bar",children:y.jsx("div",{className:"progress-fill",style:{width:`${x}%`}})}),D.hasCorrectAnswer&&Array.isArray(D.correctAnswer)&&D.correctAnswer.includes(M.id)&&y.jsx("span",{className:"correct-indicator",children:"✓ Правильный ответ"})]},M.id)})})}),D.type==="text"&&y.jsxs("div",{className:"text-responses",children:[y.jsxs("h4",{children:["Текстовые ответы (",o.length,")"]}),y.jsx("div",{className:"text-responses-list",children:o.map(M=>{const I=M.answers[D.id];return I?y.jsxs("div",{className:"text-response",children:[y.jsxs("div",{className:"text-response-header",children:[y.jsx("span",{className:"participant-name",children:y.jsx(ss,{text:M.participantName,maxLength:25})}),y.jsx("span",{className:"response-date",children:O(M.submittedAt)})]}),y.jsx("p",{className:"text-answer",children:I})]},M.id):null})})]}),D.type==="rating"&&y.jsxs("div",{className:"rating-analysis",children:[y.jsx("h4",{children:"Распределение оценок"}),y.jsx("div",{className:"rating-chart",children:[...Array(D.maxRating||5)].map((M,I)=>{const x=I+1,S=o.filter(ue=>ue.answers[D.id]===x).length,W=o.length>0?Math.round(S/o.length*100):0;return y.jsxs("div",{className:"rating-bar",children:[y.jsxs("div",{className:"rating-label",children:[y.jsx("span",{className:"stars",children:"⭐".repeat(x)}),y.jsx("span",{className:"rating-count",children:S})]}),y.jsx("div",{className:"progress-bar",children:y.jsx("div",{className:"progress-fill",style:{width:`${W}%`}})}),y.jsxs("span",{className:"rating-percentage",children:[W,"%"]})]},x)})})]})]},D.id)})}),ae=()=>{const D=V();return D?y.jsxs("div",{className:"advanced-analytics",children:[y.jsxs("div",{className:"recommendations-section",children:[y.jsx("h3",{children:"🔍 Рекомендации по улучшению"}),y.jsx("div",{className:"recommendations-grid",children:D.recommendations.map((R,N)=>y.jsxs("div",{className:`recommendation-card ${R.priority}`,children:[y.jsxs("div",{className:"recommendation-header",children:[y.jsx("h4",{children:R.title}),y.jsx("span",{className:`priority-badge ${R.priority}`,children:R.priority==="high"?"🔴 Высокий":R.priority==="medium"?"🟡 Средний":"🟢 Низкий"})]}),y.jsx("p",{className:"recommendation-description",children:R.description}),R.questions&&y.jsx("div",{className:"recommendation-questions",children:R.questions.map((M,I)=>y.jsxs("div",{className:"recommendation-question",children:[y.jsxs("strong",{children:["Вопрос ",M.questionIndex||I+1,":"]})," ",M.questionText||M.questionId,M.difficultyScore!==void 0&&y.jsxs("span",{className:"difficulty-score",children:["Сложность: ",M.difficultyScore,"%"]}),M.errorRate!==void 0&&y.jsxs("span",{className:"error-rate",children:["Ошибок: ",Math.round(M.errorRate),"%"]})]},I))})]},N))})]}),y.jsxs("div",{className:"difficulty-analysis",children:[y.jsx("h3",{children:"📊 Анализ сложности вопросов"}),y.jsx("div",{className:"difficulty-chart",children:Object.values(D.questionDifficulty).filter(R=>R.hasCorrectAnswer).sort((R,N)=>R.difficultyScore-N.difficultyScore).map((R,N)=>y.jsxs("div",{className:"difficulty-item",children:[y.jsxs("div",{className:"difficulty-header",children:[y.jsxs("span",{className:"question-number",children:["Вопрос ",R.questionIndex]}),y.jsx("span",{className:`difficulty-badge ${R.difficultyScore<30?"very-hard":R.difficultyScore<50?"hard":R.difficultyScore<70?"medium":"easy"}`,children:R.difficultyScore<30?"🔴 Очень сложный":R.difficultyScore<50?"🟠 Сложный":R.difficultyScore<70?"🟡 Средний":"🟢 Легкий"})]}),y.jsxs("div",{className:"difficulty-progress",children:[y.jsx("div",{className:"progress-bar",children:y.jsx("div",{className:`progress-fill ${R.difficultyScore<30?"very-hard":R.difficultyScore<50?"hard":R.difficultyScore<70?"medium":"easy"}`,style:{width:`${R.difficultyScore}%`}})}),y.jsxs("span",{className:"difficulty-percentage",children:[R.difficultyScore,"%"]})]}),y.jsx("p",{className:"question-text",children:R.questionText}),y.jsx("div",{className:"difficulty-stats",children:y.jsxs("span",{children:["Правильных: ",R.correctAnswers,"/",R.totalAnswers]})})]},R.questionIndex))})]}),y.jsxs("div",{className:"error-analysis",children:[y.jsx("h3",{children:"❌ Анализ ошибок"}),y.jsx("div",{className:"error-chart",children:Object.entries(D.errorAnalysis).filter(([,R])=>R.errorRate>0).sort(([,R],[,N])=>N.errorRate-R.errorRate).map(([R,N])=>y.jsxs("div",{className:"error-item",children:[y.jsxs("div",{className:"error-header",children:[y.jsx("h4",{children:k(R)}),y.jsxs("span",{className:"error-rate-badge",children:[Math.round(N.errorRate),"% ошибок"]})]}),N.mostCommonErrors.length>0&&y.jsxs("div",{className:"common-errors",children:[y.jsx("h5",{children:"Самые частые ошибки:"}),N.mostCommonErrors.map((M,I)=>y.jsxs("div",{className:"common-error",children:[y.jsx("span",{className:"error-option",children:M.optionText}),y.jsxs("span",{className:"error-count",children:[M.count," (",M.percentage,"%)"]})]},I))]})]},R))})]}),D.timeAnalysis&&y.jsxs("div",{className:"time-analysis",children:[y.jsx("h3",{children:"⏱️ Временной анализ"}),y.jsxs("div",{className:"time-stats",children:[y.jsxs("div",{className:"time-stat",children:[y.jsx("span",{className:"time-label",children:"Среднее время:"}),y.jsxs("span",{className:"time-value",children:[D.timeAnalysis.averageTime," сек"]})]}),y.jsxs("div",{className:"time-stat",children:[y.jsx("span",{className:"time-label",children:"Минимальное время:"}),y.jsxs("span",{className:"time-value",children:[D.timeAnalysis.minTime," сек"]})]}),y.jsxs("div",{className:"time-stat",children:[y.jsx("span",{className:"time-label",children:"Максимальное время:"}),y.jsxs("span",{className:"time-value",children:[D.timeAnalysis.maxTime," сек"]})]})]})]}),y.jsxs("div",{className:"conclusions",children:[y.jsx("h3",{children:"📋 Общие выводы"}),y.jsxs("div",{className:"conclusions-content",children:[y.jsxs("div",{className:"conclusion-item",children:[y.jsx("strong",{children:"Самый сложный вопрос:"}),(()=>{const R=Object.values(D.questionDifficulty).filter(N=>N.hasCorrectAnswer).sort((N,M)=>N.difficultyScore-M.difficultyScore)[0];return R?` Вопрос ${R.questionIndex} (${R.difficultyScore}% правильных ответов)`:" Нет данных"})()]}),y.jsxs("div",{className:"conclusion-item",children:[y.jsx("strong",{children:"Самый легкий вопрос:"}),(()=>{const R=Object.values(D.questionDifficulty).filter(N=>N.hasCorrectAnswer).sort((N,M)=>M.difficultyScore-N.difficultyScore)[0];return R?` Вопрос ${R.questionIndex} (${R.difficultyScore}% правильных ответов)`:" Нет данных"})()]}),y.jsxs("div",{className:"conclusion-item",children:[y.jsx("strong",{children:"Вопросы требующие внимания:"}),` ${Object.values(D.questionDifficulty).filter(N=>N.hasCorrectAnswer&&N.difficultyScore<50).length} вопросов с процентом правильных ответов менее 50%`]})]})]})]}):y.jsx("div",{className:"no-data",children:"Нет данных для анализа"})},le=()=>{if(!o.length)return;const D=["Имя участника",...s.questions.map((I,x)=>`${x+1}. ${I.text}`),"Баллы","Время (сек)","Дата"],R=o.map(I=>{const x=s.questions.map(W=>{const ue=I.answers[W.id];return W.type==="single_choice"?U(W.id,ue):W.type==="multiple_choice"?Array.isArray(ue)?ue.map(B=>U(W.id,B)).join(", "):"":W.type==="text"?ue||"":W.type==="rating"&&ue?`${ue} из ${W.maxRating||5}`:""});let S="";if(I.startedAt&&I.submittedAt){const W=new Date(I.startedAt),ue=new Date(I.submittedAt);S=Math.round((ue-W)/1e3)}return[I.participantName,...x,`${I.score} / ${re}`,S,O(I.submittedAt)]}),N=[D,...R].map(I=>I.map(x=>`"${String(x).replace(/"/g,'""')}"`).join(",")).join(`
`),M=new Blob([N],{type:"text/csv;charset=utf-8;"});Wb.saveAs(M,`survey_results_${s.id}.csv`)},ye=()=>y.jsxs("div",{className:"all-responses",children:[y.jsx("div",{className:"responses-header",children:y.jsxs("h3",{children:["Все ответы (",o.length,")"]})}),y.jsx("div",{className:"responses-list",children:o.map(D=>{let R="";if(D.startedAt&&D.submittedAt){const N=new Date(D.startedAt),M=new Date(D.submittedAt);R=Math.round((M-N)/1e3)}return y.jsxs("div",{className:"response-detail",children:[y.jsxs("div",{className:"response-detail-header",children:[y.jsx("span",{className:"participant-name",children:y.jsx(ss,{text:D.participantName,maxLength:25})}),y.jsx("span",{className:"response-date",children:O(D.submittedAt)}),D.score!==null&&y.jsxs("span",{className:"response-score",children:[D.score," / ",re," баллов"]}),R!==""&&y.jsxs("span",{className:"response-score",style:{color:"#007bff"},children:["⏱️ ",R," сек"]})]}),y.jsx("div",{className:"response-answers",children:s.questions.map((N,M)=>{const I=D.answers[N.id];if(!I)return null;let x=null;if(N.hasCorrectAnswer&&N.correctAnswer)if(N.type==="single_choice")x=I===N.correctAnswer;else if(N.type==="multiple_choice"){const S=Array.isArray(I)?I:[I],W=Array.isArray(N.correctAnswer)?N.correctAnswer:[N.correctAnswer];x=S.length===W.length&&S.every(ue=>W.includes(ue))}else N.type==="text"&&(x=I.toLowerCase().trim()===N.correctAnswer.toLowerCase().trim());return y.jsxs("div",{className:`answer-item${x===!0?" correct":x===!1?" incorrect":""}`,children:[y.jsxs("div",{className:"answer-question",children:[y.jsxs("strong",{children:[M+1,". ",N.text]}),x===!0&&y.jsx("span",{style:{color:"#28a745",marginLeft:8},children:"✔"}),x===!1&&y.jsx("span",{style:{color:"#dc3545",marginLeft:8},children:"✘"})]}),y.jsxs("div",{className:"answer-content",children:[N.type==="single_choice"&&y.jsx("span",{children:U(N.id,I)}),N.type==="multiple_choice"&&y.jsx("span",{children:Array.isArray(I)?I.map(S=>U(N.id,S)).join(", "):I}),N.type==="text"&&y.jsx("span",{children:I}),N.type==="rating"&&y.jsxs("span",{children:["⭐".repeat(I)," (",I," из ",N.maxRating||5,")"]})]})]},N.id)})})]},D.id)})})]});return s?y.jsx("div",{className:"survey-results-overlay",children:y.jsxs("div",{className:"survey-results-modal",children:[y.jsx("button",{className:"results-close",onClick:e,title:"Закрыть",children:"×"}),y.jsx("div",{className:"results-header",children:y.jsxs("div",{className:"results-header-content",children:[y.jsxs("div",{children:[y.jsx("h2",{children:"Результаты опроса"}),y.jsx("p",{children:y.jsx(ss,{text:s.title,maxLength:40})})]}),y.jsx("button",{className:"btn btn-outline",onClick:le,title:"Экспорт в CSV",children:"🗎 Экспорт в CSV"})]})}),y.jsxs("div",{className:"results-tabs",children:[y.jsx("button",{className:`tab-btn ${t==="overview"?"active":""}`,onClick:()=>r("overview"),children:"📊 Обзор"}),y.jsx("button",{className:`tab-btn ${t==="questions"?"active":""}`,onClick:()=>r("questions"),children:"❓ Анализ вопросов"}),y.jsx("button",{className:`tab-btn ${t==="analytics"?"active":""}`,onClick:()=>r("analytics"),children:"🔍 Расширенная аналитика"}),y.jsx("button",{className:`tab-btn ${t==="responses"?"active":""}`,onClick:()=>r("responses"),children:"👥 Все ответы"})]}),y.jsxs("div",{className:"results-content",children:[t==="overview"&&J(),t==="questions"&&K(),t==="analytics"&&ae(),t==="responses"&&ye()]})]})}):null},$M=({isOpen:s,onClose:e,onSuccess:t})=>{const[r,o]=Y.useState({login:"",password:"",confirmPassword:"",name:""}),[c,h]=Y.useState([]),[g,f]=Y.useState(!1),[m,v]=Y.useState(""),T=U=>{const{name:V,value:re}=U.target;o(J=>({...J,[V]:re})),c.length>0&&h([])},b=()=>{const U=[];return r.login.trim()?r.login.trim().length<3?U.push("Логин должен содержать минимум 3 символа"):/^[a-zA-Z0-9_]+$/.test(r.login)||U.push("Логин может содержать только буквы, цифры и знак подчеркивания"):U.push("Введите логин"),r.password?r.password.length<6&&U.push("Пароль должен содержать минимум 6 символов"):U.push("Введите пароль"),r.password!==r.confirmPassword&&U.push("Пароли не совпадают"),r.name.trim()?r.name.trim().length<2&&U.push("Имя должно содержать минимум 2 символа"):U.push("Введите имя организатора"),h(U),U.length===0},O=async U=>{if(U.preventDefault(),!!b()){f(!0),h([]);try{const V=Jt.getCurrentAdmin();if(!V)throw new Error("Необходимо войти в систему");const re=await Jt.registerOrganizer(r.login,r.password,r.name,V.id);v("Организатор успешно создан!"),o({login:"",password:"",confirmPassword:"",name:""}),t&&t(re.admin),setTimeout(()=>{e(),v("")},2e3)}catch(V){h([V.message])}finally{f(!1)}}},k=()=>{g||(o({login:"",password:"",confirmPassword:"",name:""}),h([]),v(""),e())};return s?y.jsx("div",{className:"admin-registration-overlay",children:y.jsxs("div",{className:"admin-registration-modal",children:[y.jsx("button",{className:"admin-registration-close",onClick:k,children:"×"}),y.jsxs("div",{className:"admin-registration-content",children:[y.jsx("h2",{children:"Создание организатора"}),y.jsx("p",{className:"admin-registration-subtitle",children:"Создайте нового организатора для управления опросами"}),m&&y.jsx("div",{className:"success-message",children:m}),c.length>0&&y.jsx("div",{className:"error-message",children:c.map((U,V)=>y.jsx("p",{children:U},V))}),y.jsxs("form",{onSubmit:O,className:"admin-registration-form",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"name",children:"Имя организатора *"}),y.jsx("input",{type:"text",id:"name",name:"name",className:`form-input ${c.includes("Введите имя организатора")?"error":""}`,placeholder:"Введите имя организатора",value:r.name,onChange:T,disabled:g}),c.includes("Введите имя организатора")&&y.jsx("span",{className:"error-text",children:"Введите имя организатора"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"login",children:"Логин *"}),y.jsx("input",{type:"text",id:"login",name:"login",className:`form-input ${c.includes("Введите логин")?"error":""}`,placeholder:"Введите логин (минимум 3 символа)",value:r.login,onChange:T,disabled:g}),c.includes("Введите логин")&&y.jsx("span",{className:"error-text",children:"Введите логин"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"password",children:"Пароль *"}),y.jsx("input",{type:"password",id:"password",name:"password",className:`form-input ${c.includes("Введите пароль")?"error":""}`,placeholder:"Минимум 6 символов",value:r.password,onChange:T,disabled:g}),c.includes("Введите пароль")&&y.jsx("span",{className:"error-text",children:"Введите пароль"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"confirmPassword",children:"Подтвердите пароль *"}),y.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",className:`form-input ${c.includes("Пароли не совпадают")?"error":""}`,placeholder:"Повторите пароль",value:r.confirmPassword,onChange:T,disabled:g}),c.includes("Пароли не совпадают")&&y.jsx("span",{className:"error-text",children:"Пароли не совпадают"})]}),y.jsxs("div",{className:"form-actions",children:[y.jsx("button",{type:"button",className:"btn btn-secondary",onClick:k,disabled:g,children:"Отмена"}),y.jsx("button",{type:"submit",className:"btn btn-primary",disabled:g,children:g?"Создание...":"Создать организатора"})]})]})]})]})}):null};var QM=Object.defineProperty,Uh=Object.getOwnPropertySymbols,eS=Object.prototype.hasOwnProperty,tS=Object.prototype.propertyIsEnumerable,LE=(s,e,t)=>e in s?QM(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,fp=(s,e)=>{for(var t in e||(e={}))eS.call(e,t)&&LE(s,t,e[t]);if(Uh)for(var t of Uh(e))tS.call(e,t)&&LE(s,t,e[t]);return s},mp=(s,e)=>{var t={};for(var r in s)eS.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&Uh)for(var r of Uh(s))e.indexOf(r)<0&&tS.call(s,r)&&(t[r]=s[r]);return t};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var oa;(s=>{const e=class Ue{constructor(f,m,v,T){if(this.version=f,this.errorCorrectionLevel=m,this.modules=[],this.isFunction=[],f<Ue.MIN_VERSION||f>Ue.MAX_VERSION)throw new RangeError("Version value out of range");if(T<-1||T>7)throw new RangeError("Mask value out of range");this.size=f*4+17;let b=[];for(let k=0;k<this.size;k++)b.push(!1);for(let k=0;k<this.size;k++)this.modules.push(b.slice()),this.isFunction.push(b.slice());this.drawFunctionPatterns();const O=this.addEccAndInterleave(v);if(this.drawCodewords(O),T==-1){let k=1e9;for(let U=0;U<8;U++){this.applyMask(U),this.drawFormatBits(U);const V=this.getPenaltyScore();V<k&&(T=U,k=V),this.applyMask(U)}}o(0<=T&&T<=7),this.mask=T,this.applyMask(T),this.drawFormatBits(T),this.isFunction=[]}static encodeText(f,m){const v=s.QrSegment.makeSegments(f);return Ue.encodeSegments(v,m)}static encodeBinary(f,m){const v=s.QrSegment.makeBytes(f);return Ue.encodeSegments([v],m)}static encodeSegments(f,m,v=1,T=40,b=-1,O=!0){if(!(Ue.MIN_VERSION<=v&&v<=T&&T<=Ue.MAX_VERSION)||b<-1||b>7)throw new RangeError("Invalid value");let k,U;for(k=v;;k++){const K=Ue.getNumDataCodewords(k,m)*8,ae=h.getTotalBits(f,k);if(ae<=K){U=ae;break}if(k>=T)throw new RangeError("Data too long")}for(const K of[Ue.Ecc.MEDIUM,Ue.Ecc.QUARTILE,Ue.Ecc.HIGH])O&&U<=Ue.getNumDataCodewords(k,K)*8&&(m=K);let V=[];for(const K of f){t(K.mode.modeBits,4,V),t(K.numChars,K.mode.numCharCountBits(k),V);for(const ae of K.getData())V.push(ae)}o(V.length==U);const re=Ue.getNumDataCodewords(k,m)*8;o(V.length<=re),t(0,Math.min(4,re-V.length),V),t(0,(8-V.length%8)%8,V),o(V.length%8==0);for(let K=236;V.length<re;K^=253)t(K,8,V);let J=[];for(;J.length*8<V.length;)J.push(0);return V.forEach((K,ae)=>J[ae>>>3]|=K<<7-(ae&7)),new Ue(k,m,J,b)}getModule(f,m){return 0<=f&&f<this.size&&0<=m&&m<this.size&&this.modules[m][f]}getModules(){return this.modules}drawFunctionPatterns(){for(let v=0;v<this.size;v++)this.setFunctionModule(6,v,v%2==0),this.setFunctionModule(v,6,v%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const f=this.getAlignmentPatternPositions(),m=f.length;for(let v=0;v<m;v++)for(let T=0;T<m;T++)v==0&&T==0||v==0&&T==m-1||v==m-1&&T==0||this.drawAlignmentPattern(f[v],f[T]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(f){const m=this.errorCorrectionLevel.formatBits<<3|f;let v=m;for(let b=0;b<10;b++)v=v<<1^(v>>>9)*1335;const T=(m<<10|v)^21522;o(T>>>15==0);for(let b=0;b<=5;b++)this.setFunctionModule(8,b,r(T,b));this.setFunctionModule(8,7,r(T,6)),this.setFunctionModule(8,8,r(T,7)),this.setFunctionModule(7,8,r(T,8));for(let b=9;b<15;b++)this.setFunctionModule(14-b,8,r(T,b));for(let b=0;b<8;b++)this.setFunctionModule(this.size-1-b,8,r(T,b));for(let b=8;b<15;b++)this.setFunctionModule(8,this.size-15+b,r(T,b));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let f=this.version;for(let v=0;v<12;v++)f=f<<1^(f>>>11)*7973;const m=this.version<<12|f;o(m>>>18==0);for(let v=0;v<18;v++){const T=r(m,v),b=this.size-11+v%3,O=Math.floor(v/3);this.setFunctionModule(b,O,T),this.setFunctionModule(O,b,T)}}drawFinderPattern(f,m){for(let v=-4;v<=4;v++)for(let T=-4;T<=4;T++){const b=Math.max(Math.abs(T),Math.abs(v)),O=f+T,k=m+v;0<=O&&O<this.size&&0<=k&&k<this.size&&this.setFunctionModule(O,k,b!=2&&b!=4)}}drawAlignmentPattern(f,m){for(let v=-2;v<=2;v++)for(let T=-2;T<=2;T++)this.setFunctionModule(f+T,m+v,Math.max(Math.abs(T),Math.abs(v))!=1)}setFunctionModule(f,m,v){this.modules[m][f]=v,this.isFunction[m][f]=!0}addEccAndInterleave(f){const m=this.version,v=this.errorCorrectionLevel;if(f.length!=Ue.getNumDataCodewords(m,v))throw new RangeError("Invalid argument");const T=Ue.NUM_ERROR_CORRECTION_BLOCKS[v.ordinal][m],b=Ue.ECC_CODEWORDS_PER_BLOCK[v.ordinal][m],O=Math.floor(Ue.getNumRawDataModules(m)/8),k=T-O%T,U=Math.floor(O/T);let V=[];const re=Ue.reedSolomonComputeDivisor(b);for(let K=0,ae=0;K<T;K++){let le=f.slice(ae,ae+U-b+(K<k?0:1));ae+=le.length;const ye=Ue.reedSolomonComputeRemainder(le,re);K<k&&le.push(0),V.push(le.concat(ye))}let J=[];for(let K=0;K<V[0].length;K++)V.forEach((ae,le)=>{(K!=U-b||le>=k)&&J.push(ae[K])});return o(J.length==O),J}drawCodewords(f){if(f.length!=Math.floor(Ue.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let m=0;for(let v=this.size-1;v>=1;v-=2){v==6&&(v=5);for(let T=0;T<this.size;T++)for(let b=0;b<2;b++){const O=v-b,U=(v+1&2)==0?this.size-1-T:T;!this.isFunction[U][O]&&m<f.length*8&&(this.modules[U][O]=r(f[m>>>3],7-(m&7)),m++)}}o(m==f.length*8)}applyMask(f){if(f<0||f>7)throw new RangeError("Mask value out of range");for(let m=0;m<this.size;m++)for(let v=0;v<this.size;v++){let T;switch(f){case 0:T=(v+m)%2==0;break;case 1:T=m%2==0;break;case 2:T=v%3==0;break;case 3:T=(v+m)%3==0;break;case 4:T=(Math.floor(v/3)+Math.floor(m/2))%2==0;break;case 5:T=v*m%2+v*m%3==0;break;case 6:T=(v*m%2+v*m%3)%2==0;break;case 7:T=((v+m)%2+v*m%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[m][v]&&T&&(this.modules[m][v]=!this.modules[m][v])}}getPenaltyScore(){let f=0;for(let b=0;b<this.size;b++){let O=!1,k=0,U=[0,0,0,0,0,0,0];for(let V=0;V<this.size;V++)this.modules[b][V]==O?(k++,k==5?f+=Ue.PENALTY_N1:k>5&&f++):(this.finderPenaltyAddHistory(k,U),O||(f+=this.finderPenaltyCountPatterns(U)*Ue.PENALTY_N3),O=this.modules[b][V],k=1);f+=this.finderPenaltyTerminateAndCount(O,k,U)*Ue.PENALTY_N3}for(let b=0;b<this.size;b++){let O=!1,k=0,U=[0,0,0,0,0,0,0];for(let V=0;V<this.size;V++)this.modules[V][b]==O?(k++,k==5?f+=Ue.PENALTY_N1:k>5&&f++):(this.finderPenaltyAddHistory(k,U),O||(f+=this.finderPenaltyCountPatterns(U)*Ue.PENALTY_N3),O=this.modules[V][b],k=1);f+=this.finderPenaltyTerminateAndCount(O,k,U)*Ue.PENALTY_N3}for(let b=0;b<this.size-1;b++)for(let O=0;O<this.size-1;O++){const k=this.modules[b][O];k==this.modules[b][O+1]&&k==this.modules[b+1][O]&&k==this.modules[b+1][O+1]&&(f+=Ue.PENALTY_N2)}let m=0;for(const b of this.modules)m=b.reduce((O,k)=>O+(k?1:0),m);const v=this.size*this.size,T=Math.ceil(Math.abs(m*20-v*10)/v)-1;return o(0<=T&&T<=9),f+=T*Ue.PENALTY_N4,o(0<=f&&f<=2568888),f}getAlignmentPatternPositions(){if(this.version==1)return[];{const f=Math.floor(this.version/7)+2,m=this.version==32?26:Math.ceil((this.version*4+4)/(f*2-2))*2;let v=[6];for(let T=this.size-7;v.length<f;T-=m)v.splice(1,0,T);return v}}static getNumRawDataModules(f){if(f<Ue.MIN_VERSION||f>Ue.MAX_VERSION)throw new RangeError("Version number out of range");let m=(16*f+128)*f+64;if(f>=2){const v=Math.floor(f/7)+2;m-=(25*v-10)*v-55,f>=7&&(m-=36)}return o(208<=m&&m<=29648),m}static getNumDataCodewords(f,m){return Math.floor(Ue.getNumRawDataModules(f)/8)-Ue.ECC_CODEWORDS_PER_BLOCK[m.ordinal][f]*Ue.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][f]}static reedSolomonComputeDivisor(f){if(f<1||f>255)throw new RangeError("Degree out of range");let m=[];for(let T=0;T<f-1;T++)m.push(0);m.push(1);let v=1;for(let T=0;T<f;T++){for(let b=0;b<m.length;b++)m[b]=Ue.reedSolomonMultiply(m[b],v),b+1<m.length&&(m[b]^=m[b+1]);v=Ue.reedSolomonMultiply(v,2)}return m}static reedSolomonComputeRemainder(f,m){let v=m.map(T=>0);for(const T of f){const b=T^v.shift();v.push(0),m.forEach((O,k)=>v[k]^=Ue.reedSolomonMultiply(O,b))}return v}static reedSolomonMultiply(f,m){if(f>>>8||m>>>8)throw new RangeError("Byte out of range");let v=0;for(let T=7;T>=0;T--)v=v<<1^(v>>>7)*285,v^=(m>>>T&1)*f;return o(v>>>8==0),v}finderPenaltyCountPatterns(f){const m=f[1];o(m<=this.size*3);const v=m>0&&f[2]==m&&f[3]==m*3&&f[4]==m&&f[5]==m;return(v&&f[0]>=m*4&&f[6]>=m?1:0)+(v&&f[6]>=m*4&&f[0]>=m?1:0)}finderPenaltyTerminateAndCount(f,m,v){return f&&(this.finderPenaltyAddHistory(m,v),m=0),m+=this.size,this.finderPenaltyAddHistory(m,v),this.finderPenaltyCountPatterns(v)}finderPenaltyAddHistory(f,m){m[0]==0&&(f+=this.size),m.pop(),m.unshift(f)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],s.QrCode=e;function t(g,f,m){if(f<0||f>31||g>>>f)throw new RangeError("Value out of range");for(let v=f-1;v>=0;v--)m.push(g>>>v&1)}function r(g,f){return(g>>>f&1)!=0}function o(g){if(!g)throw new Error("Assertion error")}const c=class ft{constructor(f,m,v){if(this.mode=f,this.numChars=m,this.bitData=v,m<0)throw new RangeError("Invalid argument");this.bitData=v.slice()}static makeBytes(f){let m=[];for(const v of f)t(v,8,m);return new ft(ft.Mode.BYTE,f.length,m)}static makeNumeric(f){if(!ft.isNumeric(f))throw new RangeError("String contains non-numeric characters");let m=[];for(let v=0;v<f.length;){const T=Math.min(f.length-v,3);t(parseInt(f.substring(v,v+T),10),T*3+1,m),v+=T}return new ft(ft.Mode.NUMERIC,f.length,m)}static makeAlphanumeric(f){if(!ft.isAlphanumeric(f))throw new RangeError("String contains unencodable characters in alphanumeric mode");let m=[],v;for(v=0;v+2<=f.length;v+=2){let T=ft.ALPHANUMERIC_CHARSET.indexOf(f.charAt(v))*45;T+=ft.ALPHANUMERIC_CHARSET.indexOf(f.charAt(v+1)),t(T,11,m)}return v<f.length&&t(ft.ALPHANUMERIC_CHARSET.indexOf(f.charAt(v)),6,m),new ft(ft.Mode.ALPHANUMERIC,f.length,m)}static makeSegments(f){return f==""?[]:ft.isNumeric(f)?[ft.makeNumeric(f)]:ft.isAlphanumeric(f)?[ft.makeAlphanumeric(f)]:[ft.makeBytes(ft.toUtf8ByteArray(f))]}static makeEci(f){let m=[];if(f<0)throw new RangeError("ECI assignment value out of range");if(f<128)t(f,8,m);else if(f<16384)t(2,2,m),t(f,14,m);else if(f<1e6)t(6,3,m),t(f,21,m);else throw new RangeError("ECI assignment value out of range");return new ft(ft.Mode.ECI,0,m)}static isNumeric(f){return ft.NUMERIC_REGEX.test(f)}static isAlphanumeric(f){return ft.ALPHANUMERIC_REGEX.test(f)}getData(){return this.bitData.slice()}static getTotalBits(f,m){let v=0;for(const T of f){const b=T.mode.numCharCountBits(m);if(T.numChars>=1<<b)return 1/0;v+=4+b+T.bitData.length}return v}static toUtf8ByteArray(f){f=encodeURI(f);let m=[];for(let v=0;v<f.length;v++)f.charAt(v)!="%"?m.push(f.charCodeAt(v)):(m.push(parseInt(f.substring(v+1,v+3),16)),v+=2);return m}};c.NUMERIC_REGEX=/^[0-9]*$/,c.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,c.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let h=c;s.QrSegment=c})(oa||(oa={}));(s=>{(e=>{const t=class{constructor(o,c){this.ordinal=o,this.formatBits=c}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})(s.QrCode||(s.QrCode={}))})(oa||(oa={}));(s=>{(e=>{const t=class{constructor(o,c){this.modeBits=o,this.numBitsCharCount=c}numCharCountBits(o){return this.numBitsCharCount[Math.floor((o+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})(s.QrSegment||(s.QrSegment={}))})(oa||(oa={}));var go=oa;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var YM={L:go.QrCode.Ecc.LOW,M:go.QrCode.Ecc.MEDIUM,Q:go.QrCode.Ecc.QUARTILE,H:go.QrCode.Ecc.HIGH},nS=128,sS="L",iS="#FFFFFF",rS="#000000",aS=!1,oS=1,KM=4,XM=0,ZM=.1;function lS(s,e=0){const t=[];return s.forEach(function(r,o){let c=null;r.forEach(function(h,g){if(!h&&c!==null){t.push(`M${c+e} ${o+e}h${g-c}v1H${c+e}z`),c=null;return}if(g===r.length-1){if(!h)return;c===null?t.push(`M${g+e},${o+e} h1v1H${g+e}z`):t.push(`M${c+e},${o+e} h${g+1-c}v1H${c+e}z`);return}h&&c===null&&(c=g)})}),t.join("")}function cS(s,e){return s.slice().map((t,r)=>r<e.y||r>=e.y+e.h?t:t.map((o,c)=>c<e.x||c>=e.x+e.w?o:!1))}function JM(s,e,t,r){if(r==null)return null;const o=s.length+t*2,c=Math.floor(e*ZM),h=o/e,g=(r.width||c)*h,f=(r.height||c)*h,m=r.x==null?s.length/2-g/2:r.x*h,v=r.y==null?s.length/2-f/2:r.y*h,T=r.opacity==null?1:r.opacity;let b=null;if(r.excavate){let k=Math.floor(m),U=Math.floor(v),V=Math.ceil(g+m-k),re=Math.ceil(f+v-U);b={x:k,y:U,w:V,h:re}}const O=r.crossOrigin;return{x:m,y:v,h:f,w:g,excavation:b,opacity:T,crossOrigin:O}}function WM(s,e){return e!=null?Math.max(Math.floor(e),0):s?KM:XM}function uS({value:s,level:e,minVersion:t,includeMargin:r,marginSize:o,imageSettings:c,size:h,boostLevel:g}){let f=wt.useMemo(()=>{const k=(Array.isArray(s)?s:[s]).reduce((U,V)=>(U.push(...go.QrSegment.makeSegments(V)),U),[]);return go.QrCode.encodeSegments(k,YM[e],t,void 0,void 0,g)},[s,e,t,g]);const{cells:m,margin:v,numCells:T,calculatedImageSettings:b}=wt.useMemo(()=>{let O=f.getModules();const k=WM(r,o),U=O.length+k*2,V=JM(O,h,k,c);return{cells:O,margin:k,numCells:U,calculatedImageSettings:V}},[f,h,c,r,o]);return{qrcode:f,margin:v,cells:m,numCells:T,calculatedImageSettings:b}}var ej=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),tj=wt.forwardRef(function(e,t){const r=e,{value:o,size:c=nS,level:h=sS,bgColor:g=iS,fgColor:f=rS,includeMargin:m=aS,minVersion:v=oS,boostLevel:T,marginSize:b,imageSettings:O}=r,U=mp(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:V}=U,re=mp(U,["style"]),J=O?.src,K=wt.useRef(null),ae=wt.useRef(null),le=wt.useCallback(W=>{K.current=W,typeof t=="function"?t(W):t&&(t.current=W)},[t]),[ye,D]=wt.useState(!1),{margin:R,cells:N,numCells:M,calculatedImageSettings:I}=uS({value:o,level:h,minVersion:v,boostLevel:T,includeMargin:m,marginSize:b,imageSettings:O,size:c});wt.useEffect(()=>{if(K.current!=null){const W=K.current,ue=W.getContext("2d");if(!ue)return;let B=N;const ee=ae.current,fe=I!=null&&ee!==null&&ee.complete&&ee.naturalHeight!==0&&ee.naturalWidth!==0;fe&&I.excavation!=null&&(B=cS(N,I.excavation));const Ee=window.devicePixelRatio||1;W.height=W.width=c*Ee;const P=c/M*Ee;ue.scale(P,P),ue.fillStyle=g,ue.fillRect(0,0,M,M),ue.fillStyle=f,ej?ue.fill(new Path2D(lS(B,R))):N.forEach(function(te,he){te.forEach(function(oe,ve){oe&&ue.fillRect(ve+R,he+R,1,1)})}),I&&(ue.globalAlpha=I.opacity),fe&&ue.drawImage(ee,I.x+R,I.y+R,I.w,I.h)}}),wt.useEffect(()=>{D(!1)},[J]);const x=fp({height:c,width:c},V);let S=null;return J!=null&&(S=wt.createElement("img",{src:J,key:J,style:{display:"none"},onLoad:()=>{D(!0)},ref:ae,crossOrigin:I?.crossOrigin})),wt.createElement(wt.Fragment,null,wt.createElement("canvas",fp({style:x,height:c,width:c,ref:le,role:"img"},re)),S)});tj.displayName="QRCodeCanvas";var hS=wt.forwardRef(function(e,t){const r=e,{value:o,size:c=nS,level:h=sS,bgColor:g=iS,fgColor:f=rS,includeMargin:m=aS,minVersion:v=oS,boostLevel:T,title:b,marginSize:O,imageSettings:k}=r,U=mp(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:V,cells:re,numCells:J,calculatedImageSettings:K}=uS({value:o,level:h,minVersion:v,boostLevel:T,includeMargin:m,marginSize:O,imageSettings:k,size:c});let ae=re,le=null;k!=null&&K!=null&&(K.excavation!=null&&(ae=cS(re,K.excavation)),le=wt.createElement("image",{href:k.src,height:K.h,width:K.w,x:K.x+V,y:K.y+V,preserveAspectRatio:"none",opacity:K.opacity,crossOrigin:K.crossOrigin}));const ye=lS(ae,V);return wt.createElement("svg",fp({height:c,width:c,viewBox:`0 0 ${J} ${J}`,ref:t,role:"img"},U),!!b&&wt.createElement("title",null,b),wt.createElement("path",{fill:g,d:`M0,0 h${J}v${J}H0z`,shapeRendering:"crispEdges"}),wt.createElement("path",{fill:f,d:ye,shapeRendering:"crispEdges"}),le)});hS.displayName="QRCodeSVG";const nj=({isOpen:s,onClose:e,surveyCode:t,surveyTitle:r})=>{if(!s)return null;const o=`${window.location.origin}/participant?code=${t}`,c=()=>{const g=document.createElement("canvas"),f=document.querySelector(".qr-code svg"),m=new XMLSerializer().serializeToString(f),v=new Image;v.onload=()=>{g.width=300,g.height=350;const T=g.getContext("2d");T.fillStyle="white",T.fillRect(0,0,g.width,g.height),T.drawImage(v,50,50,200,200),T.fillStyle="#333",T.font="16px Arial",T.textAlign="center",T.fillText("Код опроса:",g.width/2,280),T.fillText(t,g.width/2,300);const b=document.createElement("a");b.download=`qr-code-${t}.png`,b.href=g.toDataURL(),b.click()},v.src="data:image/svg+xml;base64,"+btoa(m)},h=()=>{navigator.clipboard.writeText(o)};return y.jsx("div",{className:"qr-modal-overlay",children:y.jsxs("div",{className:"qr-modal",children:[y.jsx("button",{className:"qr-modal-close",onClick:e,children:"×"}),y.jsxs("div",{className:"qr-modal-content",children:[y.jsxs("div",{className:"qr-modal-header",children:[y.jsx("h2",{children:"QR-код опроса"}),y.jsx("p",{className:"survey-title",children:r})]}),y.jsxs("div",{className:"qr-code-container",children:[y.jsx("div",{className:"qr-code",children:y.jsx(hS,{value:o,size:200,level:"M",includeMargin:!0,bgColor:"#FFFFFF",fgColor:"#000000"})}),y.jsxs("div",{className:"qr-info",children:[y.jsxs("div",{className:"code-display",children:[y.jsx("span",{className:"code-label",children:"Код опроса:"}),y.jsx("span",{className:"code-value",children:t})]}),y.jsxs("div",{className:"url-display",children:[y.jsx("span",{className:"url-label",children:"Ссылка:"}),y.jsx("span",{className:"url-value",children:o})]})]})]}),y.jsxs("div",{className:"qr-actions",children:[y.jsx("button",{className:"btn btn-primary",onClick:h,children:"📋 Копировать ссылку"}),y.jsx("button",{className:"btn btn-secondary",onClick:c,children:"📥 Скачать QR-код"})]}),y.jsxs("div",{className:"qr-instructions",children:[y.jsx("h4",{children:"Как использовать:"}),y.jsxs("ul",{children:[y.jsx("li",{children:"Участники могут отсканировать QR-код камерой телефона"}),y.jsx("li",{children:"Или ввести код вручную на главной странице"}),y.jsx("li",{children:"QR-код содержит прямую ссылку на опрос"})]})]})]})]})})},sj=()=>{const s=ua(),[e,t]=Y.useState(null),[r,o]=Y.useState([]),[c,h]=Y.useState([]),[g,f]=Y.useState(!1),[m,v]=Y.useState(!1),[T,b]=Y.useState(null),[O,k]=Y.useState("surveys"),[U,V]=Y.useState(!0),[re,J]=Y.useState(!1),[K,ae]=Y.useState(""),[le,ye]=Y.useState({}),[D,R]=Y.useState(!1),[N,M]=Y.useState(null),[I,x]=Y.useState(!1),[S,W]=Y.useState(null),[ue,B]=Y.useState({}),[ee,fe]=Y.useState({}),[Ee,P]=Y.useState(null);Y.useEffect(()=>{if(Ee){const ce=setTimeout(()=>{P(null)},5e3);return()=>clearTimeout(ce)}},[Ee]);const te=async()=>{const ce=Jt.getCurrentAdmin();ce?(t(ce),await he(ce.id),ce.role==="super_admin"&&await oe(),V(!1)):s("/")};Y.useEffect(()=>{te()},[s]),Y.useEffect(()=>{const ce=Ne=>{(Ne.key==="current_admin"||Ne.key===null)&&te()};window.addEventListener("storage",ce);const Fe=setInterval(()=>{const Ne=Jt.getCurrentAdmin();Ne&&(!e||Ne.id!==e.id)&&te()},2e3);return()=>{window.removeEventListener("storage",ce),clearInterval(Fe)}},[e,s]);const he=async ce=>{try{console.log("Загрузка опросов для администратора:",ce);const Me=await Wt.getUserSurveys(ce);console.log("Загружено опросов:",Me.length,Me),o(Me)}catch(Me){console.error("Ошибка загрузки опросов:",Me),o([])}},oe=async()=>{try{const ce=await Jt.getOrganizersWithPasswords();h(ce)}catch(ce){ae(ce.message)}},ve=async ce=>{console.log("Опрос создан:",ce),e&&(console.log("Перезагружаем опросы после создания..."),await he(e.id)),f(!1),P({type:"success",text:"Опрос успешно создан"})},Oe=async(ce,Me)=>{try{console.log("Переключаем статус опроса:",ce,Me),await Wt.updateSurvey(ce,{isActive:Me}),e&&await he(e.id)}catch(Fe){console.error("Ошибка при обновлении опроса:",Fe),alert("Ошибка обновления опроса: "+Fe.message)}},we=ce=>{b(ce),v(!0)},vt=()=>{v(!1),b(null)},We=()=>{Jt.logout(),t(null),o([]),h([]),s("/")},Pn=()=>{s("/")},cs=async ce=>{if(!ee[ce]){fe(Me=>({...Me,[ce]:!0}));try{const Me=await Wt.getSurveyStats(ce);B(Fe=>({...Fe,[ce]:Me}))}catch(Me){console.error("Ошибка загрузки статистики для опроса:",ce,Me),B(Fe=>({...Fe,[ce]:null}))}finally{fe(Me=>({...Me,[ce]:!1}))}}};Y.useEffect(()=>{r.length>0&&r.forEach(ce=>{cs(ce.id)})},[r]);const wn=ce=>new Date(ce).toLocaleString("ru-RU"),Ps=()=>{J(!0)},ks=()=>{J(!1)},Ls=async ce=>{await oe(),J(!1)},yr=async ce=>{if(window.confirm("Вы уверены, что хотите удалить этого организатора?"))try{await Jt.deleteAdmin(ce),await oe()}catch(Me){ae(Me.message)}},ya=ce=>{ye(Me=>({...Me,[ce]:!Me[ce]}))},mn=ce=>{M(ce),R(!0)},Lo=()=>{R(!1),M(null)},vr=ce=>{W(ce),x(!0)},Ei=async()=>{if(S)try{console.log("Принудительно удаляем опрос:",S.id),await Wt.forceDeleteSurvey(S.id),console.log("Опрос принудительно удален, обновляем список..."),e&&await he(e.id),x(!1),W(null),P({type:"success",text:"Опрос успешно удален"})}catch(ce){console.error("Ошибка при удалении опроса:",ce),P({type:"error",text:"Ошибка удаления опроса: "+ce.message})}},Us=()=>{x(!1),W(null)},Uo=async()=>{e&&(V(!0),await he(e.id),e.role==="super_admin"&&await oe(),V(!1))},Ti=async ce=>{const Me=await Wt.getSurveyResponses(ce.id);if(!Me.length)return;const Fe=["Имя участника",...ce.questions.map((pn,cn)=>`${cn+1}. ${pn.text}`),"Баллы","Дата"],Ne=(pn,cn)=>{const _t=ce.questions.find(qt=>qt.id===pn);if(!_t||!_t.options)return"";const Ht=_t.options.find(qt=>qt.id===cn);return Ht?Ht.text:""},ln=Me.map(pn=>{const cn=ce.questions.map(_t=>{const Ht=pn.answers[_t.id];return _t.type==="single_choice"?Ne(_t.id,Ht):_t.type==="multiple_choice"?Array.isArray(Ht)?Ht.map(qt=>Ne(_t.id,qt)).join(", "):"":_t.type==="text"?Ht||"":_t.type==="rating"&&Ht?`${Ht} из ${_t.maxRating||5}`:""});return[pn.participantName,...cn,pn.score,new Date(pn.submittedAt).toLocaleString("ru-RU")]}),Vt=[Fe,...ln].map(pn=>pn.map(cn=>`"${String(cn).replace(/"/g,'""')}"`).join(",")).join(`
`),va=new Blob([Vt],{type:"text/csv;charset=utf-8;"});Wb.saveAs(va,`survey_results_${ce.id}.csv`)};return U?y.jsxs("div",{className:"dashboard-loading",children:[y.jsx("div",{className:"loading-spinner"}),y.jsx("p",{children:"Загрузка дашборда..."})]}):e?y.jsxs("div",{className:"dashboard-page",children:[y.jsxs("div",{className:"dashboard-header",children:[y.jsxs("div",{className:"dashboard-title",children:[y.jsx("h1",{children:"Панель управления"}),y.jsxs("p",{children:["Добро пожаловать, ",e.name," (",e.role,")"]})]}),y.jsxs("div",{className:"dashboard-actions",children:[y.jsx("button",{className:"btn btn-outline",onClick:Uo,children:"🔄 Обновить"}),y.jsx("button",{className:"btn btn-outline",onClick:Pn,children:"Вернуться на главную"}),y.jsx("button",{className:"btn btn-outline",onClick:We,children:"Выйти"})]})]}),Ee&&y.jsxs("div",{className:`message ${Ee.type}`,children:[y.jsx("span",{className:"message-text",children:Ee.text}),y.jsx("button",{className:"message-close",onClick:()=>P(null),children:"×"})]}),y.jsxs("div",{className:"dashboard-tabs",children:[y.jsxs("button",{className:`tab-btn ${O==="surveys"?"active":""}`,onClick:()=>k("surveys"),children:["📊 Мои опросы (",r.length,")"]}),e.role==="super_admin"&&y.jsx("button",{className:`tab-btn ${O==="admins"?"active":""}`,onClick:()=>k("admins"),children:"👥 Управление организаторами"})]}),O==="surveys"&&y.jsxs("div",{className:"dashboard-content",children:[y.jsx("div",{className:"surveys-header",children:y.jsx("h2",{children:"Мои опросы"})}),y.jsx("div",{className:"surveys-actions",children:y.jsx("button",{className:"btn btn-primary",onClick:()=>f(!0),children:"+ Создать опрос"})}),r.length===0?y.jsxs("div",{className:"empty-surveys",children:[y.jsx("div",{className:"empty-icon",children:"📋"}),y.jsx("h3",{children:"У вас пока нет опросов"}),y.jsx("p",{children:"Создайте первый опрос, чтобы начать собирать данные"}),y.jsx("button",{className:"btn btn-primary",onClick:()=>f(!0),children:"Создать первый опрос"})]}):y.jsx("div",{className:"surveys-grid",children:r.map(ce=>{const Me=ue[ce.id],Fe=ee[ce.id];return y.jsxs("div",{className:"survey-card",children:[y.jsxs("div",{className:"survey-header",children:[y.jsxs("div",{className:"survey-title",children:[y.jsx("h3",{children:y.jsx(ss,{text:ce.title,maxLength:40})}),y.jsx("span",{className:`status-badge ${ce.isActive?"active":"inactive"}`,children:ce.isActive?"Активен":"Неактивен"})]}),y.jsxs("div",{className:"survey-actions",children:[y.jsx("button",{className:"action-btn",onClick:()=>mn(ce),title:"Показать QR-код",children:"📱"}),Me&&Me.totalParticipants>0&&y.jsx("button",{className:"action-btn",onClick:()=>we(ce),title:"Просмотреть результаты",children:"📊"}),y.jsx("button",{className:"action-btn",onClick:()=>Oe(ce.id,!ce.isActive),title:ce.isActive?"Деактивировать":"Активировать",children:ce.isActive?"⏸️":"▶️"}),y.jsx("button",{className:"action-btn delete",onClick:()=>vr(ce),title:"Удалить",children:"🗑️"})]})]}),ce.description&&y.jsx("p",{className:"survey-description",children:dp(ce.description)}),y.jsxs("div",{className:"survey-info",children:[y.jsxs("div",{className:"info-item",children:[y.jsx("span",{className:"info-label",children:"Код:"}),y.jsx("span",{className:"info-value code",children:ce.code})]}),y.jsxs("div",{className:"info-item",children:[y.jsx("span",{className:"info-label",children:"Вопросов:"}),y.jsx("span",{className:"info-value",children:ce.questions.length})]}),y.jsxs("div",{className:"info-item",children:[y.jsx("span",{className:"info-label",children:"Время:"}),y.jsx("span",{className:"info-value",children:ce.timeLimit>0?`${Math.floor(ce.timeLimit/60)}ч ${ce.timeLimit%60}мин`:"Без ограничения"})]}),y.jsxs("div",{className:"info-item",children:[y.jsx("span",{className:"info-label",children:"Участников:"}),y.jsx("span",{className:"info-value",children:Fe?"⏳":Me?.totalParticipants||0})]}),Me?.averageScore!==void 0&&y.jsxs("div",{className:"info-item",children:[y.jsx("span",{className:"info-label",children:"Средний балл:"}),y.jsx("span",{className:"info-value",children:Me.averageScore})]})]}),y.jsx("div",{className:"survey-meta",children:y.jsxs("span",{className:"meta-item",children:["Создан: ",wn(ce.createdAt)]})}),Me&&Me.totalParticipants>0&&y.jsxs("div",{className:"survey-stats",children:[y.jsx("h4",{children:"Последние ответы:"}),y.jsx("div",{className:"recent-responses",children:Me.recentResponses.slice(0,3).map(Ne=>y.jsxs("div",{className:"response-item",children:[y.jsx("span",{className:"participant-name",children:Jb(Ne.participantName)}),y.jsx("span",{className:"response-date",children:wn(Ne.submittedAt)}),Ne.score!==null&&y.jsxs("span",{className:"response-score",children:[Ne.score," баллов"]})]},Ne.id))})]})]},ce.id)})})]}),O==="admins"&&e.role==="super_admin"&&y.jsxs("div",{className:"dashboard-content",children:[y.jsx("div",{className:"admins-header",children:y.jsx("h2",{children:"Управление организаторами"})}),y.jsx("div",{className:"admins-actions",children:y.jsx("button",{className:"btn btn-primary",onClick:Ps,children:"+ Добавить организатора"})}),K&&y.jsx("div",{className:"error-message",children:K}),y.jsx("div",{className:"admins-list",children:c.length===0?y.jsxs("div",{className:"empty-admins",children:[y.jsx("div",{className:"empty-icon",children:"👥"}),y.jsx("h3",{children:"Организаторы не найдены"}),y.jsx("p",{children:"Добавьте первого организатора для начала работы"})]}):c.map(ce=>y.jsxs("div",{className:"admin-card",children:[y.jsxs("div",{className:"admin-info",children:[y.jsxs("div",{className:"admin-main-info",children:[y.jsx("h3",{children:ce.name}),y.jsxs("p",{className:"admin-login",children:["Логин: ",ce.login]}),y.jsxs("div",{className:"admin-password",children:[y.jsx("span",{className:"password-label",children:"Пароль: "}),y.jsx("button",{className:"password-toggle-btn",onClick:()=>ya(ce.id),type:"button",children:le[ce.id]?"👁️":"🙈"}),y.jsx("span",{className:`password-value ${le[ce.id]?"visible":"hidden"}`,children:le[ce.id]?ce.password:"••••••••"})]})]}),y.jsxs("div",{className:"admin-meta",children:[y.jsx("span",{className:"admin-status",children:ce.isActive?"Активен":"Неактивен"}),y.jsxs("span",{className:"admin-date",children:["Создан: ",wn(ce.createdAt)]})]})]}),y.jsx("div",{className:"admin-actions",children:y.jsx("button",{className:"btn btn-danger",onClick:()=>yr(ce.id),children:"Удалить"})})]},ce.id))})]}),g&&y.jsx(FM,{isOpen:g,onClose:()=>f(!1),onSurveyCreated:ve}),m&&T&&y.jsx(GM,{survey:T,onClose:vt,onExportCSV:Ti}),re&&y.jsx($M,{isOpen:re,onClose:ks,onSuccess:Ls}),D&&N&&y.jsx(nj,{isOpen:D,onClose:Lo,surveyCode:N.code,surveyTitle:N.title}),I&&S&&y.jsx("div",{className:"delete-confirm-modal",children:y.jsxs("div",{className:"confirm-message",children:[y.jsxs("div",{className:"confirm-text",children:['Вы уверены, что хотите удалить опрос "',y.jsx(ss,{text:S.title,maxLength:40}),'"?']}),y.jsxs("div",{className:"confirm-actions",children:[y.jsx("button",{className:"btn btn-danger",onClick:Ei,children:"Удалить"}),y.jsx("button",{className:"btn btn-secondary",onClick:Us,children:"Отмена"})]})]})})]}):y.jsxs("div",{className:"dashboard-loading",children:[y.jsx("div",{className:"loading-spinner"}),y.jsx("p",{children:"Загрузка данных пользователя..."})]})},ij=({survey:s,participantName:e,onSubmit:t,onClose:r})=>{const o=ua(),[c,h]=Y.useState({}),[g,f]=Y.useState(0),[m,v]=Y.useState(!1),[T,b]=Y.useState([]),[O,k]=Y.useState(s.timeLimit>0?s.timeLimit*60:0),[U,V]=Y.useState(!1),[re,J]=Y.useState(new Date().toISOString());Y.useEffect(()=>{const S={};s.questions.forEach(W=>{W.type==="multiple_choice"?S[W.id]=[]:S[W.id]=""}),h(S)},[s]),Y.useEffect(()=>{if(s.timeLimit===0||O<=0)return;const S=setInterval(()=>{k(W=>W<=1?(V(!0),clearInterval(S),0):W-1)},1e3);return()=>clearInterval(S)},[O,s.timeLimit]),Y.useEffect(()=>{U&&M(!0)},[U]);const K=S=>{const W=Math.floor(S/3600),ue=Math.floor(S%3600/60),B=S%60;return W>0?`${W}:${ue.toString().padStart(2,"0")}:${B.toString().padStart(2,"0")}`:`${ue}:${B.toString().padStart(2,"0")}`},ae=(S,W)=>{h(ue=>({...ue,[S]:W})),T.length>0&&b([])},le=(S,W,ue)=>{h(B=>{const ee=Array.isArray(B[S])?B[S]:[],fe=ue?[...ee,W]:ee.filter(Ee=>Ee!==W);return{...B,[S]:fe}}),T.length>0&&b([])},ye=()=>(s.questions[g],!0),D=()=>{g<s.questions.length-1&&(f(S=>S+1),b([]))},R=()=>{g>0&&(f(S=>S-1),b([]))},N=S=>{S>=0&&S<s.questions.length&&(f(S),b([]))},M=async(S=!1)=>{!S&&ye(),v(!0),b([]);try{const W=await Wt.submitResponse(s.id,e,c,re);t&&t(W.response)}catch(W){b([W.message])}finally{v(!1)}},I=()=>{o("/")},x=(S,W)=>{const ue=W===g,B=c[S.id]||"";return ue?y.jsxs("div",{className:"question-container",children:[y.jsx("div",{className:"question-header",children:y.jsxs("div",{className:"question-number",children:[y.jsxs("span",{className:"question-number-text",children:["Вопрос ",W+1]}),y.jsxs("span",{className:"question-total",children:["из ",s.questions.length]})]})}),y.jsxs("div",{className:"question-content",children:[y.jsx("h3",{className:"question-text",children:S.text}),S.type==="single_choice"&&y.jsx("div",{className:"options-list",children:S.options.map(ee=>y.jsxs("label",{className:"option-item",children:[y.jsxs("div",{className:"option-radio",children:[y.jsx("input",{type:"radio",name:`question_${S.id}`,value:ee.id,checked:B===ee.id,onChange:fe=>ae(S.id,fe.target.value)}),y.jsx("span",{className:"radio-custom"})]}),y.jsx("span",{className:"option-text",children:ee.text})]},ee.id))}),S.type==="multiple_choice"&&y.jsx("div",{className:"options-list",children:S.options.map(ee=>y.jsxs("label",{className:"option-item",children:[y.jsxs("div",{className:"option-checkbox",children:[y.jsx("input",{type:"checkbox",checked:Array.isArray(B)&&B.includes(ee.id),onChange:fe=>le(S.id,ee.id,fe.target.checked)}),y.jsx("span",{className:"checkbox-custom"})]}),y.jsx("span",{className:"option-text",children:ee.text})]},ee.id))}),S.type==="text"&&y.jsx("div",{className:"text-input-container",children:y.jsx("textarea",{value:B,onChange:ee=>ae(S.id,ee.target.value),placeholder:"Введите ваш ответ...",className:"text-input",rows:"4"})}),S.type==="rating"&&y.jsxs("div",{className:"rating-container",children:[y.jsx("div",{className:"rating-stars",children:[...Array(S.maxRating||5)].map((ee,fe)=>{const Ee=fe+1,P=B>=Ee;return y.jsx("button",{type:"button",className:`star-btn ${P?"selected":""}`,onClick:()=>ae(S.id,Ee),children:"⭐"},fe)})}),y.jsx("span",{className:"rating-label",children:B?`Оценка: ${B} из ${S.maxRating||5}`:"Выберите оценку"})]})]})]},S.id):null};return s?y.jsx("div",{className:"survey-form-overlay",children:y.jsxs("div",{className:"survey-form-modal",children:[y.jsx("button",{className:"survey-form-close",onClick:r,children:"×"}),y.jsxs("div",{className:"survey-form-content",children:[y.jsxs("div",{className:"survey-header",children:[y.jsxs("div",{className:"survey-header-top",children:[y.jsxs("div",{className:"survey-title-section",children:[y.jsx("h2",{children:y.jsx(ss,{text:s.title,maxLength:50})}),s.description&&y.jsx("p",{className:"survey-description",children:y.jsx(ss,{text:s.description,maxLength:100})})]}),y.jsx("button",{className:"btn btn-outline",onClick:I,children:"Вернуться на главную"})]}),y.jsxs("div",{className:"survey-info",children:[y.jsxs("div",{className:"participant-info",children:[y.jsx("span",{className:"participant-label",children:"Участник:"}),y.jsx("span",{className:"participant-name",children:Jb(e)})]}),O>0&&y.jsxs("div",{className:`time-info ${O<=60?"time-warning":""}`,children:[y.jsx("span",{className:"time-label",children:"Осталось времени:"}),y.jsx("span",{className:"time-value",children:K(O)})]})]})]}),T.length>0&&y.jsx("div",{className:"error-messages",children:T.map((S,W)=>y.jsx("div",{className:"error-message",children:S},W))}),y.jsxs("div",{className:"progress-section",children:[y.jsx("div",{className:"progress-bar",children:y.jsx("div",{className:"progress-fill",style:{width:`${(g+1)/s.questions.length*100}%`}})}),y.jsxs("div",{className:"progress-text",children:[g+1," из ",s.questions.length," вопросов"]})]}),y.jsx("div",{className:"questions-navigation",children:y.jsx("div",{className:"navigation-dots",children:s.questions.map((S,W)=>{const ue=c[S.id],B=S.type==="multiple_choice"?Array.isArray(ue)&&ue.length>0:ue&&ue.toString().trim()!=="",ee=W===g;return y.jsx("button",{type:"button",className:`nav-dot ${ee?"current":""} ${B?"answered":"unanswered"}`,onClick:()=>N(W),title:`Вопрос ${W+1}: ${B?"Отвечен":"Не отвечен"}`,children:W+1},W)})})}),y.jsx("div",{className:"questions-container",children:s.questions.map((S,W)=>x(S,W))}),y.jsx("div",{className:"form-actions",children:y.jsxs("div",{className:"navigation-buttons",children:[g>0&&y.jsx("button",{type:"button",className:"btn btn-secondary",onClick:R,disabled:m,children:"← Назад"}),g<s.questions.length-1?y.jsx("button",{type:"button",className:"btn btn-primary",onClick:D,disabled:m,children:"Далее →"}):y.jsx("button",{type:"button",className:"btn btn-success",onClick:()=>M(!1),disabled:m,children:m?"Отправка...":"Завершить опрос"})]})})]})]})}):null},rj=()=>{const s=ua(),[e]=H1(),[t,r]=Y.useState(""),[o,c]=Y.useState(null),[h,g]=Y.useState(!1),[f,m]=Y.useState(!1),[v,T]=Y.useState(null),[b,O]=Y.useState([]),[k,U]=Y.useState(!1),V=e.get("code");Y.useEffect(()=>{V&&re()},[V]);const re=async()=>{try{const R=await Wt.getSurveyByCode(V.toUpperCase());R&&R.isActive&&c(R)}catch(R){console.error("Error loading survey:",R)}},J=async R=>{if(R.preventDefault(),!t.trim()){O(["Введите ваше имя"]);return}if(t.trim().length<2){O(["Имя должно содержать минимум 2 символа"]);return}U(!0),O([]);try{const N=await Wt.getSurveyByCode(V.toUpperCase());if(!N){O(["Опрос с таким кодом не найден"]);return}if(!N.isActive){O(["Этот опрос неактивен"]);return}c(N),g(!0)}catch(N){O([N.message])}finally{U(!1)}},K=R=>{T(R),g(!1),m(!0)},ae=()=>{g(!1),c(null)},le=()=>{m(!1),T(null),c(null),r("")},ye=()=>{m(!1),T(null),c(null),r(""),O([])},D=()=>{s("/")};return h&&o?y.jsx(ij,{survey:o,participantName:t,onSubmit:K,onClose:ae}):f&&v?y.jsx("div",{className:"participant-results-overlay",children:y.jsxs("div",{className:"participant-results-modal",children:[y.jsx("button",{className:"results-close",onClick:le,children:"×"}),y.jsxs("div",{className:"results-content",children:[y.jsxs("div",{className:"results-header",children:[y.jsx("h2",{children:"Опрос завершен!"}),y.jsxs("p",{children:['Спасибо за участие в опросе "',y.jsx(ss,{text:o.title,maxLength:50}),'"']})]}),y.jsxs("div",{className:"results-info",children:[y.jsxs("div",{className:"result-item",children:[y.jsx("span",{className:"result-label",children:"Участник:"}),y.jsx("span",{className:"result-value",children:t})]}),y.jsxs("div",{className:"result-item",children:[y.jsx("span",{className:"result-label",children:"Дата завершения:"}),y.jsx("span",{className:"result-value",children:new Date(v.submittedAt).toLocaleString("ru-RU")})]}),v.score!==null&&y.jsxs("div",{className:"result-item",children:[y.jsx("span",{className:"result-label",children:"Ваш результат:"}),y.jsxs("span",{className:"result-value score",children:[v.score," баллов"]})]})]}),y.jsxs("div",{className:"results-actions",children:[y.jsx("button",{className:"btn btn-outline",onClick:D,children:"Вернуться на главную"}),y.jsx("button",{className:"btn btn-primary",onClick:ye,children:"Пройти другой опрос"})]})]})]})}):y.jsx("div",{className:"participant-page",children:y.jsxs("div",{className:"participant-container",children:[y.jsxs("div",{className:"participant-header",children:[y.jsx("button",{className:"btn btn-outline back-button",onClick:D,children:"Вернуться на главную"}),y.jsx("div",{className:"participant-header-top",children:y.jsx("h1",{children:"Участие в опросе"})}),y.jsx("p",{children:"Введите ваше имя для начала участия в опросе"}),o&&y.jsxs("div",{className:"survey-info-display",children:[y.jsx("h3",{children:y.jsx(ss,{text:o.title,maxLength:50})}),dp(o.description)&&y.jsx("p",{children:dp(o.description)}),y.jsxs("div",{className:"survey-details",children:[y.jsxs("span",{children:["Код: ",V]}),y.jsxs("span",{children:["Вопросов: ",o.questions.length]}),o.timeLimit>0&&y.jsxs("span",{children:["Время: ",o.timeLimit," мин"]})]})]})]}),y.jsx("div",{className:"participant-form-container",children:y.jsxs("form",{className:"participant-form",onSubmit:J,children:[b.length>0&&y.jsx("div",{className:"error-messages",children:b.map((R,N)=>y.jsx("div",{className:"error-message",children:R},N))}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"participantName",children:"Ваше имя *"}),y.jsx("input",{type:"text",id:"participantName",value:t,onChange:R=>r(R.target.value),placeholder:"Введите ваше имя",className:"form-input",maxLength:"50",autoFocus:!0}),y.jsx("small",{className:"form-hint",children:"Имя будет отображаться в результатах опроса (максимум 50 символов)"})]}),y.jsx("button",{type:"submit",className:"btn btn-primary submit-btn",disabled:k,children:k?"Загрузка...":"Начать опрос"})]})}),y.jsxs("div",{className:"participant-info-section",children:[y.jsxs("div",{className:"info-card",children:[y.jsx("div",{className:"info-icon",children:"📋"}),y.jsx("h3",{children:"Как участвовать"}),y.jsx("p",{children:'Введите ваше имя и нажмите "Начать опрос" для участия'})]}),y.jsxs("div",{className:"info-card",children:[y.jsx("div",{className:"info-icon",children:"✅"}),y.jsx("h3",{children:"Результаты"}),y.jsx("p",{children:"После завершения вы увидите результаты и сможете пройти другие опросы"})]})]})]})})},_g=async()=>{try{console.log("🔍 Тестирование подключения к Firebase...");const s=jo(ko,"surveys"),e=await En(s);return console.log("✅ Подключение к Firebase успешно!"),console.log(`📊 Найдено опросов: ${e.size}`),{success:!0,surveysCount:e.size}}catch(s){return console.error("❌ Ошибка подключения к Firebase:",s.message),s.message.includes("Missing or insufficient permissions")&&(console.error("🔧 Решение: Настройте правила безопасности в Firebase Console"),console.error("📖 Инструкция: См. файл FIREBASE_SETUP.md")),{success:!1,error:s.message}}},aj=async()=>{try{const s={title:"Тестовый опрос",description:"Это тестовый опрос для проверки работы Firebase",timeLimit:0,isPublic:!1,questions:[{id:"q1",text:"Какой ваш любимый цвет?",type:"single_choice",required:!0,hasCorrectAnswer:!1,correctAnswer:null,points:1,options:[{id:"opt1",text:"Красный"},{id:"opt2",text:"Синий"},{id:"opt3",text:"Зеленый"}]}]},e=await Wt.createSurvey(s,"test-admin");return console.log("✅ Тестовый опрос создан:",e.survey),{success:!0,survey:e.survey}}catch(s){return console.error("❌ Ошибка создания тестового опроса:",s.message),{success:!1,error:s.message}}},oj=async s=>{try{const e=await Wt.getUserSurveys(s);return console.log(`✅ Получено опросов для пользователя ${s}:`,e.length),{success:!0,surveys:e}}catch(e){return console.error("❌ Ошибка получения опросов пользователя:",e.message),{success:!1,error:e.message}}},lj=async s=>{try{const e={q1:"opt1"},t=await Wt.submitResponse(s,"Тестовый участник",e);return console.log("✅ Тестовый ответ отправлен:",t.response),{success:!0,response:t.response}}catch(e){return console.error("❌ Ошибка отправки ответа:",e.message),{success:!1,error:e.message}}},cj=async()=>{try{const s=["surveys","responses","admins"],e={};for(const t of s){const r=jo(ko,t),o=await En(r);e[t]=o.size}return console.log("📊 Статистика коллекций:",e),{success:!0,collections:e}}catch(s){return console.error("❌ Ошибка проверки коллекций:",s.message),{success:!1,error:s.message}}},uj=async()=>{console.log("🧪 Запуск полного теста системы опросов...");try{const s=await _g();if(!s.success)return console.log("❌ Тест подключения провален"),s;const e=await aj();if(!e.success)return console.log("❌ Создание тестового опроса провалено"),e;const t=await oj("test-admin");if(!t.success)return console.log("❌ Получение опросов пользователя провалено"),t;const r=await lj(e.survey.id);if(!r.success)return console.log("❌ Отправка ответа провалена"),r;const o=await Wt.getSurveyStats(e.survey.id);return console.log("📊 Статистика тестового опроса:",o),console.log("🎉 Все тесты пройдены успешно!"),{success:!0,survey:e.survey,response:r.response,stats:o}}catch(s){return console.error("❌ Ошибка в полном тесте:",s.message),{success:!1,error:s.message}}},hj=()=>{const[s,e]=Y.useState(null),[t,r]=Y.useState(!1),[o,c]=Y.useState(null),[h,g]=Y.useState(null),f=async()=>{r(!0);try{const b=await _g();c(b)}catch(b){c({success:!1,error:b.message})}finally{r(!1)}},m=async()=>{r(!0);try{const b=await cj();g(b)}catch(b){g({success:!1,error:b.message})}finally{r(!1)}},v=async()=>{r(!0);try{const b=await uj();e(b)}catch(b){e({success:!1,error:b.message})}finally{r(!1)}},T=()=>Wt.firebaseAvailable?"✅ Доступен":"❌ Недоступен";return y.jsx("div",{className:"test-page",children:y.jsxs("div",{className:"test-container",children:[y.jsx("h1",{children:"🧪 Тестирование Firebase"}),y.jsxs("div",{className:"status-section",children:[y.jsx("h2",{children:"Статус Firebase"}),y.jsxs("p",{children:["Статус: ",T()]})]}),y.jsxs("div",{className:"test-buttons",children:[y.jsx("button",{onClick:f,disabled:t,className:"test-btn",children:"🔗 Тест подключения"}),y.jsx("button",{onClick:m,disabled:t,className:"test-btn",children:"📊 Проверить коллекции"}),y.jsx("button",{onClick:v,disabled:t,className:"test-btn primary",children:"🧪 Полный тест системы"})]}),t&&y.jsxs("div",{className:"loading",children:[y.jsx("div",{className:"spinner"}),y.jsx("p",{children:"Выполняется тест..."})]}),o&&y.jsxs("div",{className:`test-result ${o.success?"success":"error"}`,children:[y.jsx("h3",{children:"Результат теста подключения:"}),o.success?y.jsxs("div",{children:[y.jsx("p",{children:"✅ Подключение успешно!"}),y.jsxs("p",{children:["📊 Найдено опросов: ",o.surveysCount]})]}):y.jsxs("div",{children:[y.jsxs("p",{children:["❌ Ошибка подключения: ",o.error]}),o.error.includes("permissions")&&y.jsxs("div",{className:"error-help",children:[y.jsx("p",{children:"🔧 Решение: Настройте правила безопасности в Firebase Console"}),y.jsx("p",{children:"📖 См. файл FIREBASE_SETUP.md для инструкций"})]})]})]}),h&&y.jsxs("div",{className:`test-result ${h.success?"success":"error"}`,children:[y.jsx("h3",{children:"Информация о коллекциях:"}),h.success?y.jsxs("div",{className:"collections-info",children:[y.jsxs("p",{children:["📋 surveys: ",h.collections.surveys," документов"]}),y.jsxs("p",{children:["📝 responses: ",h.collections.responses," документов"]}),y.jsxs("p",{children:["👥 admins: ",h.collections.admins," документов"]})]}):y.jsxs("p",{children:["❌ Ошибка: ",h.error]})]}),s&&y.jsxs("div",{className:`test-result ${s.success?"success":"error"}`,children:[y.jsx("h3",{children:"Результат полного теста:"}),s.success?y.jsxs("div",{className:"full-test-results",children:[y.jsx("p",{children:"🎉 Все тесты пройдены успешно!"}),y.jsxs("div",{className:"test-details",children:[y.jsx("h4",{children:"Созданный опрос:"}),y.jsxs("p",{children:["📝 Название: ",s.survey.title]}),y.jsxs("p",{children:["🔢 Код: ",s.survey.code]}),y.jsxs("p",{children:["👤 Создатель: ",s.survey.createdBy]}),y.jsx("h4",{children:"Отправленный ответ:"}),y.jsxs("p",{children:["👤 Участник: ",s.response.participantName]}),y.jsxs("p",{children:["📅 Дата: ",new Date(s.response.submittedAt).toLocaleString()]}),y.jsx("h4",{children:"Статистика:"}),y.jsxs("p",{children:["👥 Участников: ",s.stats.totalParticipants]}),y.jsxs("p",{children:["📊 Средний балл: ",s.stats.averageScore]})]})]}):y.jsxs("div",{children:[y.jsxs("p",{children:["❌ Ошибка в тесте: ",s.error]}),y.jsxs("div",{className:"error-help",children:[y.jsx("p",{children:"🔧 Возможные решения:"}),y.jsxs("ul",{children:[y.jsx("li",{children:"Проверьте подключение к интернету"}),y.jsx("li",{children:"Убедитесь, что Firebase настроен правильно"}),y.jsx("li",{children:"Проверьте правила безопасности в Firebase Console"})]})]})]})]}),y.jsxs("div",{className:"help-section",children:[y.jsx("h3",{children:"💡 Справка"}),y.jsx("p",{children:"Эта страница помогает проверить работу Firebase и системы опросов."}),y.jsx("p",{children:"Если тесты не проходят, проверьте:"}),y.jsxs("ul",{children:[y.jsx("li",{children:"Подключение к интернету"}),y.jsxs("li",{children:["Настройки Firebase в файле ",y.jsx("code",{children:"src/firebase.js"})]}),y.jsx("li",{children:"Правила безопасности в Firebase Console"}),y.jsxs("li",{children:["Файл ",y.jsx("code",{children:"FIREBASE_SETUP.md"})," для инструкций"]})]})]})]})})},dj=({children:s})=>Jt.isAdminLoggedIn()?s:y.jsx(P1,{to:"/",replace:!0}),fj=({children:s})=>s;function mj(){return Y.useEffect(()=>{(async()=>{const e=await _g();e.success?console.log("🎉 Firebase подключен успешно!"):console.error("🔥 Ошибка подключения к Firebase:",e.error)})()},[]),y.jsx(F1,{children:y.jsx("div",{className:"App",children:y.jsxs(L1,{children:[y.jsx(Yl,{path:"/",element:y.jsx(BM,{})}),y.jsx(Yl,{path:"/dashboard",element:y.jsx(dj,{children:y.jsx(sj,{})})}),y.jsx(Yl,{path:"/participant",element:y.jsx(fj,{children:y.jsx(rj,{})})}),y.jsx(Yl,{path:"/test",element:y.jsx(hj,{})})]})})})}Qw.createRoot(document.getElementById("root")).render(y.jsx(Y.StrictMode,{children:y.jsx(mj,{})}));
